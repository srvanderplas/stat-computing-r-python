<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="dcterms.date" content="2025-06-09">
<title>33&nbsp; Web Scraping – Statistical Computing using R and Python</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../part-advanced-topics/04-APIs.html" rel="next">
<link href="../part-advanced-topics/02-data-doc.html" rel="prev">
<link href="../build_deps/favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-4ZFBDKXJXP"></script><script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-4ZFBDKXJXP', { 'anonymize_ip': true});
</script><script src="https://kit.fontawesome.com/baac5f0610.js" crossorigin="anonymous"></script><style>
div.callout-demo.callout {
  border-left-color: #91d5d4;
}
div.callout-demo.callout-style-default > .callout-header {
  background-color: rgba(145, 213, 212, 0.13);
}
div.callout-demo .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewbox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"></path></svg>');}
div.callout-demo.callout-style-default .callout-icon::before, div.callout-demo.callout-titled .callout-icon::before {
  font-family: 'Font Awesome 6 Free', FontAwesome;
  font-style: normal;
  content: '\f12e' !important;
  background-image: none;
}
div.callout-advanced.callout {
  border-left-color: #cbbaf9;
}
div.callout-advanced.callout-style-default > .callout-header {
  background-color: rgba(203, 186, 249, 0.13);
}
div.callout-advanced .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewbox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"></path></svg>');}
div.callout-advanced.callout-style-default .callout-icon::before, div.callout-advanced.callout-titled .callout-icon::before {
  font-family: 'Font Awesome 6 Free', FontAwesome;
  font-style: normal;
  content: '\f5dc' !important;
  background-image: none;
}
div.callout-example.callout {
  border-left-color: #f39c12;
}
div.callout-example.callout-style-default > .callout-header {
  background-color: rgba(243, 156, 18, 0.13);
}
div.callout-example .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewbox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"></path></svg>');}
div.callout-example.callout-style-default .callout-icon::before, div.callout-example.callout-titled .callout-icon::before {
  font-family: 'Font Awesome 6 Free', FontAwesome;
  font-style: normal;
  content: '\f206' !important;
  background-image: none;
}
div.callout-learnmore.callout {
  border-left-color: #f09bb6;
}
div.callout-learnmore.callout-style-default > .callout-header {
  background-color: rgba(240, 155, 182, 0.13);
}
div.callout-learnmore .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewbox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"></path></svg>');}
div.callout-learnmore.callout-style-default .callout-icon::before, div.callout-learnmore.callout-titled .callout-icon::before {
  font-family: 'Font Awesome 6 Free', FontAwesome;
  font-style: normal;
  content: '\f02d' !important;
  background-image: none;
}
div.callout-setup.callout {
  border-left-color: #f3e969;
}
div.callout-setup.callout-style-default > .callout-header {
  background-color: rgba(243, 233, 105, 0.13);
}
div.callout-setup .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewbox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"></path></svg>');}
div.callout-setup.callout-style-default .callout-icon::before, div.callout-setup.callout-titled .callout-icon::before {
  font-family: 'Font Awesome 6 Free', FontAwesome;
  font-style: normal;
  content: '\f6e3' !important;
  background-image: none;
}
</style>
<script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script><link rel="stylesheet" href="../build_deps/style.css">
</head>
<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../part-advanced-topics/00-advanced.html">Part IV: Advanced Topics</a></li><li class="breadcrumb-item"><a href="../part-advanced-topics/03-web-scraping.html"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Web Scraping</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Statistical Computing using R and Python</a> 
        <div class="sidebar-tools-main tools-wide">
    <a href="https://github.com/srvanderplas/stat-computing-r-python/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../part-tools/00-tools-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part I: Tools</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/01-computer-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Computer Basics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/02-setting-up-computer.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Setting Up Your Computer</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/03-Rstudio-interface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">RStudio’s Interface</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/04-scripts-notebooks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Scripts and Notebooks</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/05-git-and-github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Version Control with Git</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/06-documents.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Reproducibility and Professional Communication</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../part-gen-prog/00-gen-prog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part II: General Programming</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/00-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Introduction to Programming</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/01-basic-var-types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Variables and Basic Data Types</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/01a-math-logical-operators.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Mathematical and Logical Operators</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/02-prog-functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Functions, Packages, and Environments</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/03-data-struct.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Data Structures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/035-matrix-calcs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Matrix Calculations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/04-control-struct.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Control Structures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/05-functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Writing Functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/06-debugging.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Debugging</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/07-prog-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Programming With Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/99-extra.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Other Helpful Programming Resources</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../part-wrangling/00-wrangling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part III: Data Wrangling</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/01-data-input.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Data Input</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/02-basic-data-vis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Data Visualization Basics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/02a-eda.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/02b-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Data Visualization</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/02c-good-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Creating Good Charts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/03-data-cleaning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Data Cleaning</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/04-strings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Working with Strings</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/05-data-reshape.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Reshaping Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/05b-normal-forms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Normal Forms of Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/06-data-join.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Joining Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/07-datetime.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Dates and Times</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/08-functional-prog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Functional Programming</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/09-spatial-formats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Spatial data</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../part-advanced-topics/00-advanced.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part IV: Advanced Topics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/01-simulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Simulation and Reproducibility</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/02-data-doc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Data Documentation: Codebooks, Reproducibility, and more</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/03-web-scraping.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Web Scraping</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/04-APIs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Application Programming Interfaces</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/05-xml.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">XML data and List Processing Strategies</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/06-pdf-tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">Working with PDFs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/07-intro-interactive-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">Interactive Graphics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/08-javascript-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Interactive Graphics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/09-big-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">“Big” Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/10-databases.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Databases</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/11-arrow-parquet.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Efficient Data Access: Arrow and Parquet Files</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/12-memory-handling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">42</span>&nbsp; <span class="chapter-title">Memory and Computational Efficiency</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../graveyard.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">43</span>&nbsp; <span class="chapter-title">Other Topics</span></span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#objectives" id="toc-objectives" class="nav-link active" data-scroll-target="#objectives"><span class="header-section-number">33.1</span> <i class="fa-solid fa-bullseye" aria-label="bullseye"></i> Objectives</a></li>
  <li>
<a href="#html-and-xml-language-specification" id="toc-html-and-xml-language-specification" class="nav-link" data-scroll-target="#html-and-xml-language-specification"><span class="header-section-number">33.2</span> HTML and XML Language Specification</a>
  <ul class="collapse">
<li><a href="#xml" id="toc-xml" class="nav-link" data-scroll-target="#xml"><span class="header-section-number">33.2.1</span> XML</a></li>
  <li><a href="#html" id="toc-html" class="nav-link" data-scroll-target="#html"><span class="header-section-number">33.2.2</span> HTML</a></li>
  </ul>
</li>
  <li>
<a href="#filtering-data-from-htmlxml-css-and-xpath-selectors" id="toc-filtering-data-from-htmlxml-css-and-xpath-selectors" class="nav-link" data-scroll-target="#filtering-data-from-htmlxml-css-and-xpath-selectors"><span class="header-section-number">33.3</span> Filtering Data from HTML/XML: CSS and XPath Selectors</a>
  <ul class="collapse">
<li><a href="#selecting-by-element-type" id="toc-selecting-by-element-type" class="nav-link" data-scroll-target="#selecting-by-element-type"><span class="header-section-number">33.3.1</span> Selecting by element type</a></li>
  <li><a href="#selecting-by-element-idclass" id="toc-selecting-by-element-idclass" class="nav-link" data-scroll-target="#selecting-by-element-idclass"><span class="header-section-number">33.3.2</span> Selecting by element ID/Class</a></li>
  <li><a href="#selecting-by-element-attributevalue" id="toc-selecting-by-element-attributevalue" class="nav-link" data-scroll-target="#selecting-by-element-attributevalue"><span class="header-section-number">33.3.3</span> Selecting by element attribute/value</a></li>
  </ul>
</li>
  <li><a href="#sec-webscraping-refs" id="toc-sec-webscraping-refs" class="nav-link" data-scroll-target="#sec-webscraping-refs"><span class="header-section-number">33.4</span> References</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/srvanderplas/stat-computing-r-python/edit/main/part-advanced-topics/03-web-scraping.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full column-body" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../part-advanced-topics/00-advanced.html">Part IV: Advanced Topics</a></li><li class="breadcrumb-item"><a href="../part-advanced-topics/03-web-scraping.html"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Web Scraping</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="sec-data-web" class="quarto-section-identifier"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Web Scraping</span></span></h1>
</div>



<div class="quarto-title-meta column-body">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">June 9, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header><section id="objectives" class="level2 nonumber" data-number="33.1"><h2 class="nonumber anchored" data-number="33.1" data-anchor-id="objectives">
<span class="header-section-number">33.1</span> <i class="fa-solid fa-bullseye" aria-label="bullseye"></i> Objectives</h2>
<ul>
<li>Understand the structure of XML and HTML files</li>
<li>Use developer tools to locate nodes of interest and CSS or XPATH to precisely identify those nodes</li>
<li>Identify web pages that cannot be scraped using simple methods because of content injection</li>
<li>Scrape data from web pages
<ul>
<li>by reading in HTML tables directly using R or Python</li>
<li>by writing custom functions to pull data from individual fields</li>
</ul>
</li>
</ul></section><section id="html-and-xml-language-specification" class="level2 page-columns page-full" data-number="33.2"><h2 data-number="33.2" class="anchored" data-anchor-id="html-and-xml-language-specification">
<span class="header-section-number">33.2</span> HTML and XML Language Specification</h2>
<p>Let’s start at the beginning. <strong>eXtensible Markup Language (XML)</strong> was developed in the late 1990s to provide a flexible specification for documents, data files, and various other documents. You’ve (likely) been using XML-based documents for most of your life, either in Microsoft Office (.docx, .xlsx, .pptx - the x is for XML) or in web pages. <strong>HyperText Markup Language (HTML)</strong> is a specific flavor of XML <span class="citation" data-cites="wikimediacontributorsXML2025"><a href="#ref-wikimediacontributorsXML2025" role="doc-biblioref">[1]</a></span> that uses a defined set of fields to specify the composition of a web page<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
<p>If you right click in your browser on this page, and “Inspect Source”, you can see the HTML code that generates this book.</p>
<div id="fig-browser-inspect" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-browser-inspect-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="../images/advanced/chromium-inspect-source.png" class="img-fluid figure-img" alt="A screenshot of https://duckduckgo.com in chromium, where the user has right-clicked on the page. The options 'View Page Source' and 'Inspect' are located at the bottom of the pop-up menu and are highlighted."></p>
<figcaption>Chromium right click menu</figcaption></figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="../images/advanced/firefox-inspect-source.png" class="img-fluid figure-img" alt="A screenshot of https://duckduckgo.com in Firefox, where the user has right-clicked on the page. The options 'View Page Source' and 'Inspect' are located towards the bottom of the pop-up menu and are highlighted."></p>
<figcaption>Firefox right click menu</figcaption></figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-browser-inspect-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;33.1: Right click menu options that allow the user to see the HTML code for a webpage.
</figcaption></figure>
</div>
<section id="xml" class="level3 page-columns page-full" data-number="33.2.1"><h3 data-number="33.2.1" class="anchored" data-anchor-id="xml">
<span class="header-section-number">33.2.1</span> XML</h3>
<p>XML documents are composed of a series of tags that look like this:</p>
<pre><code>&lt;tag-type attribute="value"&gt;Tag contents&lt;/tag-type&gt;</code></pre>
<p>Each tag name, <code>tag</code>, is enclosed in angle brackets, <code>&lt;tag&gt;</code>, and has a closing tag that starts with a slash but has the same name, <code>&lt;/tag&gt;</code>. Tags can include additional information that is typically encoded in <code>key="value"</code> pairs - above, there is an <strong>attribute</strong> field (the part before the <code>=</code>) that has <strong>value</strong> <code>"value"</code> (the part after the <code>=</code>). A set of matching tags is called an <strong>element</strong>, and the information within the start and end tags is called the <strong>content</strong>.</p>
<p>The XML 1.0 (5th edition) specification requires that</p>
<ul>
<li><p>The document contains only one element, called the <strong>root</strong> or document element, at the top level. No part of the root element appears in the content of any other element.</p></li>
<li>
<p>Any other elements</p>
<ul>
<li>are defined by start and end tags, and</li>
<li>nest properly within each other (are well formed)</li>
</ul>
</li>
<li><p>An element contains <strong>text</strong>, a sequence of characters. Legal characters are tab, carriage return, line feed, and the legal characters of <a href="https://home.unicode.org/">Unicode</a> and <a href="https://unicode.org/L2/L2010/10038-fcd10646-main.pdf">ISO/IEC 10646 (PDF warning)</a><a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</p></li>
<li><p>Comments start with <code>&lt;!--</code> and end with <code>--&gt;</code>. The <code>--</code> string cannot be present within the text of a comment. Comments may NOT end with <code>---&gt;</code> - the specification requires exactly two dashes.</p></li>
</ul>
<p>Elements are typically nested in an XML document. Consider the following set of elements that describe the main characters in the children’s TV show <a href="https://www.youtube.com/channel/UCVzLLZkDuFGAE2BGdBuBNBg">Bluey</a>:</p>
<pre><code>&lt;family&gt;
  &lt;adults&gt;
    &lt;person sex="M" coat="blue"&gt;Bandit Heeler&lt;/person&gt;
    &lt;person sex="F" coat="orange"&gt;Chili Heeler&lt;/person&gt;
  &lt;/adults&gt;
  &lt;kids&gt;
    &lt;person sex="F" coat="blue"&gt;Bluey Heeler&lt;/person&gt;
    &lt;person sex="F" coat="orange"&gt;Bingo Heeler&lt;/person&gt;
  &lt;/kids&gt;
&lt;/family&gt;</code></pre>
<ul>
<li>family contains two <strong>child nodes</strong> - ‘adults’, and ‘kids’. Collectively, family has two direct <strong>children</strong>.</li>
<li>‘adults’ contains two <strong>child nodes</strong> - persons - that describe the adults in the family, Chili and Bandit Heeler</li>
<li>‘kids’ contains two <strong>child nodes</strong> - persons - that describe the kids in the family, Bluey and Bingo Heeler.</li>
<li>The <strong>parent</strong> of the element describing Bingo Heeler is ‘kids’</li>
<li>The <strong>parent</strong> of the ‘kids’ element is ‘family’</li>
<li>‘adults’ and ‘kids’ are <strong>sibling</strong> elements</li>
</ul>
<p>Note that the same information about the family could be described in a number of different hierarchical ways.</p>
<pre><code>&lt;family&gt;
    &lt;person status="adult" sex="M" coat="blue"   &gt; Bandit Heeler  &lt;/person&gt;
    &lt;person status="adult" sex="F" coat="orange" &gt; Chili  Heeler  &lt;/person&gt;
    &lt;person status="kid"   sex="F" coat="blue"   &gt; Bluey  Heeler  &lt;/person&gt;
    &lt;person status="kid"   sex="F" coat="orange" &gt; Bingo  Heeler  &lt;/person&gt;
&lt;/family&gt;</code></pre>
<pre><code>&lt;family&gt;
    &lt;person status="adult" sex="M" coat="blue"   &gt; &lt;name&gt;&lt;first&gt;Bandit&lt;/first&gt; &lt;last&gt;Heeler&lt;/last&gt;&lt;/name&gt; &lt;/person&gt;
    &lt;person status="adult" sex="F" coat="orange" &gt; &lt;name&gt;&lt;first&gt;Chili &lt;/first&gt; &lt;last&gt;Heeler&lt;/last&gt;&lt;/name&gt; &lt;/person&gt;
    &lt;person status="kid"   sex="F" coat="blue"   &gt; &lt;name&gt;&lt;first&gt;Bluey &lt;/first&gt; &lt;last&gt;Heeler&lt;/last&gt;&lt;/name&gt; &lt;/person&gt;
    &lt;person status="kid"   sex="F" coat="orange" &gt; &lt;name&gt;&lt;first&gt;Bingo &lt;/first&gt; &lt;last&gt;Heeler&lt;/last&gt;&lt;/name&gt; &lt;/person&gt;
&lt;/family&gt;</code></pre>
<pre><code>&lt;family&gt;
    &lt;person&gt;
      &lt;name&gt;&lt;first&gt;Bandit&lt;/first&gt; &lt;last&gt;Heeler&lt;/last&gt;&lt;/name&gt; 
      &lt;status&gt;adult&lt;/status&gt; &lt;sex&gt;male&lt;/sex&gt;   &lt;coat&gt;blue&lt;/coat&gt;
    &lt;/person&gt;
    &lt;person&gt;
      &lt;name&gt;&lt;first&gt;Chili &lt;/first&gt; &lt;last&gt;Heeler&lt;/last&gt;&lt;/name&gt; 
      &lt;status&gt;adult&lt;/status&gt; &lt;sex&gt;female&lt;/sex&gt; &lt;coat&gt;orange&lt;/coat&gt;
    &lt;/person&gt;
    &lt;person&gt;
      &lt;name&gt;&lt;first&gt;Bluey &lt;/first&gt; &lt;last&gt;Heeler&lt;/last&gt;&lt;/name&gt; 
      &lt;status&gt;child&lt;/status&gt; &lt;sex&gt;female&lt;/sex&gt; &lt;coat&gt;blue&lt;/coat&gt;
    &lt;/person&gt;
    &lt;person&gt;
      &lt;name&gt;&lt;first&gt;Bingo &lt;/first&gt; &lt;last&gt;Heeler&lt;/last&gt;&lt;/name&gt; 
      &lt;status&gt;child&lt;/status&gt; &lt;sex&gt;female&lt;/sex&gt; &lt;coat&gt;orange&lt;/coat&gt;
    &lt;/person&gt;
&lt;/family&gt;</code></pre>
<p>When working with XML (and HTML), it is important to understand how the data are represented structurally, so that you can get the components of the data back out of this hierarchical format.</p>
<div class="callout callout-style-default callout-advanced callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Advanced: Additional XML metadata
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>A valid XML document also contains some additional metadata at the start of the file. First, there should be an <strong>XML declaration</strong> that specifies the version of XML being used: <code>&lt;?xml version="1.0"?&gt;</code> (Note the <code>?</code> immediately before and after the angle brackets).</p>
<p>In addition, valid XML documents contain a <strong>Document Type Definition (DTD)</strong> that provides some information about valid tags used within the document.</p>
<pre><code>&lt;!DOCTYPE Name (ExternalID)? '[' intSubset ']' &gt;</code></pre>
<p>Document Type Definition requirements:</p>
<ul>
<li>
<code>Name</code> in the DTD has the same value as the root node tag name</li>
<li>An Internal or External Subset of valid entity names (tag names) is provided. It is also possible to specify valid tag attributes, types, and other information within these listings.</li>
</ul>
<pre id="annotated-cell-7" class="code-annotation-code"><code>&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE greeting SYSTEM "hello.dtd"&gt;
&lt;greeting&gt;Hello, world!&lt;/greeting&gt;</code></pre>
<dl>
<dt data-target-cell="annotated-cell-7" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="1" data-code-annotation="1">XML version declaration</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="2" data-code-annotation="2">Document Type Definition. <code>greeting</code> is the name, and the root node matches that name. <code>hello.dtd</code> is the system identifier and provides an address leading to an external document type declaration file</span>
</dd>
<dt data-target-cell="annotated-cell-7" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-7" data-code-lines="3" data-code-annotation="3">Root node. <code>greeting</code> is the tag name. <code>Hello, world!</code> is the tag value. The tag is closed with a valid, matching end tag.</span>
</dd>
</dl>
<pre id="annotated-cell-8" class="code-annotation-code"><code>&lt;?xml version="1.0" encoding="UTF-8" ?&gt;
&lt;!DOCTYPE greeting [
  &lt;!ELEMENT greeting (#PCDATA)&gt;
]&gt;
&lt;greeting&gt;Hello, world!&lt;/greeting&gt;</code></pre>
<dl>
<dt data-target-cell="annotated-cell-8" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-8" data-code-lines="1" data-code-annotation="1">XML version declaration, specifying the document’s text encoding</span>
</dd>
<dt data-target-cell="annotated-cell-8" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-8" data-code-lines="2" data-code-annotation="2">An internally defined DTD that specifies valid elements (tags) (the only valid element is <code>greeting</code>). Additional tags could be specified within the <code>[</code> <code>]</code> space, if desired.</span>
</dd>
<dt data-target-cell="annotated-cell-8" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-8" data-code-lines="5" data-code-annotation="3">The root node with value <code>Hello, world!</code></span>
</dd>
</dl>
</div>
</div>
</div>
<div class="callout callout-style-default callout-demo callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Demo: Exploring an XML file
</div>
</div>
<div class="callout-body-container callout-body">
<p>The District of Columbia (Washington, DC) local government provides a <a href="https://catalog.data.gov/dataset/grocery-store-locations">dataset of grocery store locations throughout the district</a> using a definition of full service grocery store that requires:</p>
<ul>
<li>Sales of six of the following categories of food:
<ul>
<li>Fresh fruits and vegetables</li>
<li>Fresh and uncooked meats, poultry and seafood</li>
<li>Dairy products</li>
<li>Canned foods</li>
<li>Frozen foods</li>
<li>Dry groceries and baked goods</li>
<li>Non-alcoholic beverages</li>
</ul>
</li>
<li>Either 50% of the store’s total square footage, or 6000 square feet must be dedicated to selling the food products above.</li>
<li>At least 5% of the selling area must be dedicated to each food category.</li>
</ul>
<p>The city then included some small grocery stores that are very close to meeting the full-service grocery store definition based on <a href="https://dcfoodpolicy.org/wp-content/uploads/2019/06/2018-food-system-assessment-final-6.13.pdf">Appendix D of a city-wide food system assessment</a> (PDF warning).</p>
<p>We can <a href="https://opendata.dc.gov/api/download/v1/items/1d7c9d0e3aac49c1aa88d377a3bae430/kml?layers=4">download the KML file</a> and change the extension to XML so that the file opens in a standard web browser, or we can directly download the KML file as an XML file as in the code chunk below.</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">url</span> <span class="op">&lt;-</span> <span class="st">"https://opendata.dc.gov/api/download/v1/items/1d7c9d0e3aac49c1aa88d377a3bae430/kml?layers=4"</span></span>
<span><span class="va">filename</span> <span class="op">&lt;-</span> <span class="st">"../data/DC_Grocery_Stores_2025.xml"</span></span>
<span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/files.html">file.exists</a></span><span class="op">(</span><span class="va">filename</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/download.file.html">download.file</a></span><span class="op">(</span><span class="va">url</span>, destfile <span class="op">=</span> <span class="va">filename</span>, mode <span class="op">=</span> <span class="st">"wb"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="va">xml_text</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readLines.html">readLines</a></span><span class="op">(</span><span class="va">filename</span><span class="op">)</span></span>
<span><span class="va">xml_tbl</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>line <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/length.html">length</a></span><span class="op">(</span><span class="va">xml_text</span><span class="op">)</span>, </span>
<span>                      xml <span class="op">=</span> <span class="fu">htmltools</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/htmltools/reference/htmlEscape.html">htmlEscape</a></span><span class="op">(</span><span class="va">xml_text</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># Escaping the XML allows printing it out nicely in the book</span></span>
<span></span>
<span><span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html">kable</a></span><span class="op">(</span><span class="va">xml_tbl</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span>, <span class="fl">35</span><span class="op">:</span><span class="fl">64</span>, <span class="fl">3145</span><span class="op">:</span><span class="fl">3151</span><span class="op">)</span>,<span class="op">]</span>, row.names <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<colgroup>
<col style="width: 4%">
<col style="width: 95%">
</colgroup>
<thead><tr class="header">
<th style="text-align: right;">line</th>
<th style="text-align: left;">xml</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: right;">1</td>
<td style="text-align: left;">&lt;?xml version=“1.0” encoding=“utf-8” ?&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">2</td>
<td style="text-align: left;">&lt;kml xmlns=“http://www.opengis.net/kml/2.2”&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3</td>
<td style="text-align: left;">&lt;Document id=“root_doc”&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">4</td>
<td style="text-align: left;">&lt;Schema name=“Grocery_Store_Locations” id=“Grocery_Store_Locations”&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">5</td>
<td style="text-align: left;">&lt;SimpleField name=“STORENAME” type=“string”&gt;&lt;/SimpleField&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">6</td>
<td style="text-align: left;">&lt;SimpleField name=“ADDRESS” type=“string”&gt;&lt;/SimpleField&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">7</td>
<td style="text-align: left;">&lt;SimpleField name=“ZIPCODE” type=“int”&gt;&lt;/SimpleField&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">8</td>
<td style="text-align: left;">&lt;SimpleField name=“PHONE” type=“float”&gt;&lt;/SimpleField&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">9</td>
<td style="text-align: left;">&lt;SimpleField name=“WARD” type=“string”&gt;&lt;/SimpleField&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">10</td>
<td style="text-align: left;">&lt;SimpleField name=“SSL” type=“string”&gt;&lt;/SimpleField&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">35</td>
<td style="text-align: left;">&lt;SimpleField name=“SE_ANNO_CAD_DATA” type=“string”&gt;&lt;/SimpleField&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">36</td>
<td style="text-align: left;">&lt;SimpleField name=“GLOBALID” type=“string”&gt;&lt;/SimpleField&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">37</td>
<td style="text-align: left;">&lt;SimpleField name=“CREATED” type=“string”&gt;&lt;/SimpleField&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">38</td>
<td style="text-align: left;">&lt;SimpleField name=“EDITED” type=“string”&gt;&lt;/SimpleField&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">39</td>
<td style="text-align: left;">&lt;SimpleField name=“OBJECTID” type=“int”&gt;&lt;/SimpleField&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">40</td>
<td style="text-align: left;">&lt;/Schema&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">41</td>
<td style="text-align: left;">&lt;Folder&gt;&lt;name&gt;Grocery_Store_Locations&lt;/name&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">42</td>
<td style="text-align: left;">&lt;Placemark&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">43</td>
<td style="text-align: left;">&lt;ExtendedData&gt;&lt;SchemaData schemaUrl=“#Grocery_Store_Locations”&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">44</td>
<td style="text-align: left;">&lt;SimpleData name=“STORENAME”&gt;Target &lt;/SimpleData&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">45</td>
<td style="text-align: left;">&lt;SimpleData name=“ADDRESS”&gt;7828 GEORGIA AVENUE NW&lt;/SimpleData&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">46</td>
<td style="text-align: left;">&lt;SimpleData name=“ZIPCODE”&gt;20012&lt;/SimpleData&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">47</td>
<td style="text-align: left;">&lt;SimpleData name=“PHONE”&gt;2028923822&lt;/SimpleData&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">48</td>
<td style="text-align: left;">&lt;SimpleData name=“WARD”&gt;Ward 4&lt;/SimpleData&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">49</td>
<td style="text-align: left;">&lt;SimpleData name=“SSL”&gt;2960 0017&lt;/SimpleData&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">50</td>
<td style="text-align: left;">&lt;SimpleData name=“PRESENT22”&gt;Yes&lt;/SimpleData&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">51</td>
<td style="text-align: left;">&lt;SimpleData name=“PRESENT23”&gt;Yes&lt;/SimpleData&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">52</td>
<td style="text-align: left;">&lt;SimpleData name=“PRESENT24”&gt;Yes&lt;/SimpleData&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">53</td>
<td style="text-align: left;">&lt;SimpleData name=“PRESENT25”&gt;Yes&lt;/SimpleData&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">54</td>
<td style="text-align: left;">&lt;SimpleData name=“GIS_ID”&gt;GroceryStorePt_1&lt;/SimpleData&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">55</td>
<td style="text-align: left;">&lt;SimpleData name=“XCOORD”&gt;397662.57&lt;/SimpleData&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">56</td>
<td style="text-align: left;">&lt;SimpleData name=“YCOORD”&gt;146280.07&lt;/SimpleData&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">57</td>
<td style="text-align: left;">&lt;SimpleData name=“MAR_ID”&gt;300512&lt;/SimpleData&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">58</td>
<td style="text-align: left;">&lt;SimpleData name=“GLOBALID”&gt;{CE302122-4E8D-4DC7-845B-06563B993F66}&lt;/SimpleData&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">59</td>
<td style="text-align: left;">&lt;SimpleData name=“CREATED”&gt;2022/09/28 22:04:54+00&lt;/SimpleData&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">60</td>
<td style="text-align: left;">&lt;SimpleData name=“EDITED”&gt;2025/01/14 19:33:19+00&lt;/SimpleData&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">61</td>
<td style="text-align: left;">&lt;SimpleData name=“OBJECTID”&gt;641&lt;/SimpleData&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">62</td>
<td style="text-align: left;">&lt;/SchemaData&gt;&lt;/ExtendedData&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">63</td>
<td style="text-align: left;">&lt;Point&gt;&lt;coordinates&gt;-77.0269805790129,38.9844552988866&lt;/coordinates&gt;&lt;/Point&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">64</td>
<td style="text-align: left;">&lt;/Placemark&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3145</td>
<td style="text-align: left;">&lt;SimpleData name=“EDITED”&gt;2025/01/14 19:33:19+00&lt;/SimpleData&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">3146</td>
<td style="text-align: left;">&lt;SimpleData name=“OBJECTID”&gt;1921&lt;/SimpleData&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3147</td>
<td style="text-align: left;">&lt;/SchemaData&gt;&lt;/ExtendedData&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">3148</td>
<td style="text-align: left;">&lt;Point&gt;&lt;coordinates&gt;-76.9997257446131,38.9545357353458&lt;/coordinates&gt;&lt;/Point&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3149</td>
<td style="text-align: left;">&lt;/Placemark&gt;</td>
</tr>
<tr class="even">
<td style="text-align: right;">3150</td>
<td style="text-align: left;">&lt;/Folder&gt;</td>
</tr>
<tr class="odd">
<td style="text-align: right;">3151</td>
<td style="text-align: left;">&lt;/Document&gt;&lt;/kml&gt;</td>
</tr>
</tbody>
</table>
</div>
</div>
<ul>
<li>The first line contains the document type definition and encoding.</li>
<li>The second line contains a link to the <a href="https://schemas.opengis.net/kml/2.2.0/ogckml22.xsd">KML specification</a>, which is itself another XML document. Note that it is also a valid tag, so at the end of the file, we should find .</li>
<li>The third line is another tag that indicates that this is the start of the document.</li>
<li>Lines 4-40 contain the dataset schema – a list of all of the fields present for each store, along with their data type.</li>
<li>Line 41 defines a folder, which contains Placemarks (Line 42), which contain ExtendedData (Line 43). The <code>\t</code> characters are a text representation of tabs and indicate some indentation.</li>
<li>Each grocery store appears to be described by a Placemark node that contains ExtendedData nodes containing variables, along with a Point node that contains two coordinates (latitude and longitude).</li>
</ul>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="../images/advanced/DC_Grocery_Stores_2025_xml_screenshot_annotated.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="(Click to Enlarge) Screenshot of DC_Grocery_Stores_2025.xml showing the nodes corresponding to the Schema definition and to one individual grocery store."><img src="../images/advanced/DC_Grocery_Stores_2025_xml_screenshot_annotated.png" class="img-fluid figure-img" alt="XML document with schema definition and store data for grocery store locations. The top section, labeled &quot;Schema Definition,&quot; is enclosed in a blue border and contains XML schema elements describing various data fields related to grocery store locations. The fields include store name, address, zip code, phone number, and other identifiers. Each field is defined by a SimpleField tag with a name and type attribute. The bottom section, labeled &quot;Individual Grocery Store Data,&quot; is enclosed in an orange border and provides detailed data about a specific grocery store location using XML tags. This includes the store’s name, address, phone number, GIS coordinates, and several other identifiers. The text &quot;Schema Definition&quot; and &quot;Individual Grocery Store Data&quot; are prominently displayed in larger font sizes within their respective sections."></a></p>
<figcaption>(Click to Enlarge) Screenshot of DC_Grocery_Stores_2025.xml showing the nodes corresponding to the Schema definition and to one individual grocery store.</figcaption></figure>
</div>
</div></div></section><section id="html" class="level3 page-columns page-full" data-number="33.2.2"><h3 data-number="33.2.2" class="anchored" data-anchor-id="html">
<span class="header-section-number">33.2.2</span> HTML</h3>
<p>HTML is a markup language that appears very similar to XML. Technically, HTML predates XML by a few years (1993 vs 1996) <span class="citation" data-cites="HTMLVsXML2024"><a href="#ref-HTMLVsXML2024" role="doc-biblioref">[2]</a></span>, but they’ve been developed in parallel and there are obvious influences in both directions.</p>
<p>Important differences between HTML and XML <span class="citation" data-cites="HTMLVsXML2024"><a href="#ref-HTMLVsXML2024" role="doc-biblioref">[2]</a></span>:</p>
<ul>
<li>HTML tags <strong>display</strong> information. XML tags <strong>describe</strong> information.</li>
<li>HTML uses <strong>pre-defined</strong> tags instead of XML’s user-defined tags.</li>
<li>HTML doesn’t always require closing tags, while XML does.</li>
<li>HTML is more robust than XML, in that it will ignore small errors.</li>
<li>HTML is not case sensitive, while XML is.</li>
<li>HTML ignores white space, but XML doesn’t <em>necessarily</em> ignore white space.</li>
</ul>
<div class="callout callout-style-default callout-demo callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Demo: HTML Document Structure
</div>
</div>
<div class="callout-body-container callout-body">
<p>Like XML, HTML documents have a basic structure:</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-10"><pre class="sourceCode html code-annotation-code code-with-copy code-annotated"><code class="sourceCode html"><a class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="1" onclick="event.preventDefault();">1</a><span id="annotated-cell-10-1" class="code-annotation-target"><a href="#annotated-cell-10-1" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="2" onclick="event.preventDefault();">2</a><span id="annotated-cell-10-2" class="code-annotation-target"><a href="#annotated-cell-10-2" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="3" onclick="event.preventDefault();">3</a><span id="annotated-cell-10-3" class="code-annotation-target"><a href="#annotated-cell-10-3" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="4" onclick="event.preventDefault();">4</a><span id="annotated-cell-10-4" class="code-annotation-target"><a href="#annotated-cell-10-4" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Page Title<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-10-5"><a href="#annotated-cell-10-5" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-10-6"><a href="#annotated-cell-10-6" aria-hidden="true" tabindex="-1"></a></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="5" onclick="event.preventDefault();">5</a><span id="annotated-cell-10-7" class="code-annotation-target"><a href="#annotated-cell-10-7" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-10-8"><a href="#annotated-cell-10-8" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>Level 1 Heading<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-10-9"><a href="#annotated-cell-10-9" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span>This paragraph provides information about the topic in the L1 heading.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-10-10"><a href="#annotated-cell-10-10" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Level 2 Heading<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-10-11"><a href="#annotated-cell-10-11" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">p</span><span class="dt">&gt;</span>This paragraph provides even more information relating the L2 heading to L1.<span class="dt">&lt;/</span><span class="kw">p</span><span class="dt">&gt;</span></span>
<a class="code-annotation-anchor" data-target-cell="annotated-cell-10" data-target-annotation="6" onclick="event.preventDefault();">6</a><span id="annotated-cell-10-12" class="code-annotation-target"><a href="#annotated-cell-10-12" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">br</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-10-13"><a href="#annotated-cell-10-13" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="annotated-cell-10-14"><a href="#annotated-cell-10-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-10-15"><a href="#annotated-cell-10-15" aria-hidden="true" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span> </span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-grid">
<dt data-target-cell="annotated-cell-10" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="1" data-code-annotation="1">This indicates that the document is an HTML5 document</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="2" data-code-annotation="2">The root element of an HTML page</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="3" data-code-annotation="3">The head element contains meta information about the page. Most scripts and formatting information (CSS) are also loaded in this element.</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="4" data-code-annotation="4">The page title is what will show up in the browser tab.</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="7" data-code-annotation="5">The body element contains the actual information rendered on the page.</span>
</dd>
<dt data-target-cell="annotated-cell-10" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-10" data-code-lines="12" data-code-annotation="6">This element creates a line break, but has no content. Empty elements (elements with no content) do not have to have a closing tag (but you can add one if it makes you happy).</span>
</dd>
</dl>
</div>
</div>
</div>
</div>
<p>You can easily see the HTML code that creates any website by right clicking on the web page in your browser and selecting some variant of “Inspect” or “Inspect Source” or “View Source”, as shown in <a href="#fig-browser-inspect" class="quarto-xref">Figure&nbsp;<span>33.1</span></a>. This is an incredibly helpful tool when you want to figure out how to pull data out of a webpage, getting only the parts you want without the rest of the clutter.</p>
<p>The best way to think about a HTML page is that it consists of a series of elements that are best thought of as boxes. Elements like <code>&lt;h1&gt; &lt;/h1&gt;</code> define a box with specific contents. These boxes are then styled and arranged via the “magic” of <em>Cascading Style Sheets (CSS)</em>. When I first learned HTML (circa 2001?), there were a reasonable number of tags and CSS was not really a thing, so it was easier to understand how web pages were laid out, and we could spend our time decking out webpages <a href="https://www.cameronsworld.net/">with neon colors, animated images, and annoying music</a>.</p>

<div class="no-row-height column-margin column-container"><div class="">
<div id="fig-css-awesome" class="quarto-float quarto-figure quarto-figure-center anchored" alt="A mug that says 'CSS is Awesome' with a box around it, but the box cuts off the 'me' in awesome.">
<figure class="quarto-float quarto-float-fig figure"><div aria-describedby="fig-css-awesome-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/advanced/css-mug.jpg" class="img-fluid figure-img" alt="A mug that says 'CSS is Awesome' with a box around it, but the box cuts off the 'me' in awesome.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-css-awesome-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;33.2: CSS is “magic” … finicky and annoying magic.
</figcaption></figure>
</div>
</div></div><p>Now, there are too many valid HTML tags for to cover in an introduction, but first let’s review the anatomy of an XML or HTML element, and then we can look at some of the most important HTML tags.</p>
<section id="html-element-anatomy" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="html-element-anatomy">HTML Element Anatomy</h4>
<p><span class="math display">\[\overbrace{\overbrace{&lt; \text{p}\ \  \underbrace{\text{class}}_{\text{Attribute}}=\underbrace{\text{'important'}}_{\text{Value}} &gt;}^{\text{Start tag}} \underbrace{\text{This is a paragraph}}_{\text{Content}} \overbrace{&lt;/ \text{p} &gt;}^{\text{End tag}}}^{\text{Element}} \]</span></p>
</section><section id="important-html-tags" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="important-html-tags">Important HTML Tags</h4>
<ul>
<li><p><code>&lt;h1&gt;</code>, <code>&lt;h2&gt;</code>, <code>&lt;h3&gt;</code>, <code>&lt;h4&gt;</code>, <code>&lt;h5&gt;</code>, <code>&lt;h6&gt;</code>: Headings.<br>
Headings should be nested, so you should never have content in <code>&lt;h2&gt;This is wrong&lt;/h2&gt;</code> unless there is an <code>&lt;h1&gt; &lt;/h1&gt;</code> element above it in the same block of content.<br>
Corresponds to <code>#</code>, …, <code>######</code> in markdown.</p></li>
<li><p><code>&lt;p&gt;</code>: Paragraphs. All text that isn’t part of some other tag should be contained in paragraph tags.</p></li>
<li><p><code>&lt;a&gt;</code>: links. <code>&lt;a href="https://google.com"&gt;This links to google&lt;/a&gt;</code><br><code>href</code> is a tag attribute, and <code>https://google.com</code> is the attribute’s value.</p></li>
<li><p><code>&lt;img&gt;</code>: Images. <code>&lt;img src="path/to/picture.jpg" alt="Alt-text description of the picture"&gt;</code>. As with line breaks, you do not have to have a <code>&lt;/img&gt;</code> tag unless having unclosed tags bothers you.</p></li>
<li><p><code>&lt;table&gt;</code>: Tables. In HTML, tables are constructed by row. Here is a minimal table that has a header:</p></li>
</ul>
<div class="columns">
<div class="column">
<p>HTML:</p>
<pre><code>&lt;table&gt;
  &lt;tr&gt;
    &lt;th&gt;Heading Col 1&lt;/th&gt;
    &lt;th&gt;Heading Col 2&lt;/th&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
    &lt;td&gt;Value 1&lt;/td&gt;
    &lt;td&gt;Value 2&lt;/td&gt;
  &lt;/tr&gt;
&lt;/table&gt;</code></pre>
</div><div class="column">
<p>Rendered:</p>
<table class="caption-top table" data-quarto-postprocess="true"><tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">Heading Col 1</td>
<td data-quarto-table-cell-role="th">Heading Col 2</td>
</tr>
<tr class="even">
<td>Value 1</td>
<td>Value 2</td>
</tr>
</tbody></table>
</div>
</div>
<ul>
<li><p><code>&lt;table&gt;&lt;/table&gt;</code> must contain the entire table specification, and indicates the start and end of table content.</p></li>
<li><p><code>&lt;tr&gt; &lt;/tr&gt;</code> defines a table row (hence, tr) and contains any column information for that row.</p></li>
<li><p><code>&lt;th&gt;Heading Col 1&lt;/th&gt;</code> defines a column heading with content ‘Heading Col 1’. Sometimes, <code>&lt;th&gt;</code> elements contain attributes that indicate column width relative to the rest of the table.</p></li>
<li><p><code>&lt;td&gt;Value 1&lt;/td&gt;</code> defines a column that is not a heading. Its content is what is displayed in the column – in this case, ‘Value 1’.</p></li>
<li><p><code>&lt;ul&gt;</code> and <code>&lt;ol&gt;</code>: Unordered (bulleted) and ordered lists. List elements are included as child elements and start/end with <code>&lt;li&gt;&lt;/li&gt;</code> (for both types of lists).</p></li>
<li><p><code>&lt;span&gt;</code>: a container for inline content – that is, content that is part of another piece of text. Spans are often used to highlight specific text using color or other formatting attributes (font, boldness, size).</p></li>
<li><p><code>&lt;div&gt;</code>: a container for other content. These containers are often used to help style and lay out content using CSS.</p></li>
</ul></section><section id="common-html-attributes" class="level4 unnumbered"><h4 class="unnumbered anchored" data-anchor-id="common-html-attributes">Common HTML Attributes</h4>
<p>Some attributes in HTML are special and are used across a number of different tag types.</p>
<ul>
<li>ID: A shorthand name for the element. For instance, the ID for this level 4 section heading is <code>common-html-attributes</code>
</li>
<li>Class: The category the element belongs to. Often, this is used to help style the element with appropriate CSS - for instance, to ensure that all level 4 headings have the same font size and color. There can be multiple values for the class attribute, separated by spaces. The class value for this level 4 section heading is <code>level4 unnumbered</code>, indicating both the heading level and that I’ve switched off numbering for this sub-sub-sub-sub-section.</li>
<li>Style: Any CSS items which apply only to the specific element. For this section, only the link to this section added by quarto/pandoc has a style attribute specified (because it is applied automatically when the quarto document is compiled)</li>
</ul>
<div class="callout callout-style-default callout-demo callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Demo: HTML for the Common HTML Attributes subsection
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>I have added line-breaks and indentation for readability, but the rest of the code is copied from my browser.</p>
<pre><code>&lt;section id="common-html-attributes" class="level4 unnumbered"&gt;
  &lt;h4 class="unnumbered anchored" data-anchor-id="common-html-attributes"&gt;
    Common HTML Attributes
    &lt;a class="anchorjs-link " aria-label="Anchor" data-anchorjs-icon="" 
       href="#common-html-attributes" 
       style="font: 1em / 1 anchorjs-icons; margin-left: 0.1875em; 
              padding-right: 0.1875em; padding-left: 0.1875em;"&gt;&lt;/a&gt;
  &lt;/h4&gt;
  &lt;p&gt;Some attributes in HTML are special and are used across a number of 
     different tag types.&lt;/p&gt;
  &lt;ul&gt;
    &lt;li&gt;ID: A shorthand name for the element. 
        For instance, the ID for this level 4 section heading is 
        &lt;code&gt;common-html-attributes&lt;/code&gt;&lt;/li&gt;
    &lt;li&gt;Class: The category the element belongs to. 
        Often, this is used to help style the element with appropriate CSS - 
        for instance, to ensure that all level 4 headings have the same font 
        size and color. 
        There can be multiple values for the class attribute, separated by spaces. 
        The class value for this level 4 section heading is 
        &lt;code&gt;level4 unnumbered&lt;/code&gt;, 
        indicating both the heading level and that I’ve switched off numbering 
        for this sub-sub-sub-sub-section.&lt;/li&gt;
    &lt;li&gt;Style: Any CSS items which apply only to the specific element. 
        For this section, only the link to this section added by quarto/pandoc 
        has a style attribute specified (because it is applied automatically 
        when the quarto document is compiled)&lt;/li&gt;
  &lt;/ul&gt;
&lt;/section&gt;</code></pre>
</div>
</div>
</div>
</section></section></section><section id="filtering-data-from-htmlxml-css-and-xpath-selectors" class="level2" data-number="33.3"><h2 data-number="33.3" class="anchored" data-anchor-id="filtering-data-from-htmlxml-css-and-xpath-selectors">
<span class="header-section-number">33.3</span> Filtering Data from HTML/XML: CSS and XPath Selectors</h2>
<p>Often, when pulling data from HTML or XML documents, it is useful to be able to navigate to one or more specific elements of the document and extract only those elements. There are two different “languages” for doing this - CSS selectors, which primarily are used with HTML documents, and XPath selectors, which can be used with both HTML and XML.</p>
<div class="callout callout-style-default callout-learnmore callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Learn More
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>You may find it helpful to reference these guides to XPath and CSS selectors directly:</p>
<ul>
<li><a href="https://www.w3schools.com/xml/xpath_syntax.asp">XPath syntax</a></li>
<li><a href="https://www.w3schools.com/cssref/css_selectors.php">CSS selectors</a></li>
</ul>
</div>
</div>
</div>
<section id="selecting-by-element-type" class="level3" data-number="33.3.1"><h3 data-number="33.3.1" class="anchored" data-anchor-id="selecting-by-element-type">
<span class="header-section-number">33.3.1</span> Selecting by element type</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 85%">
<col style="width: 7%">
<col style="width: 6%">
</colgroup>
<thead><tr class="header">
<th>Task</th>
<th>CSS</th>
<th>XPath</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Select all <code>&lt;p&gt;</code> elements from the document</td>
<td>p</td>
<td>//p</td>
</tr>
<tr class="even">
<td>Select all <code>&lt;p&gt;</code> elements that are direct descendants of an <code>&lt;h1&gt;</code> element</td>
<td>h1 &gt; p</td>
<td>h1/p</td>
</tr>
<tr class="odd">
<td>Select all <code>&lt;p&gt;</code> elements that are descendants of an <code>&lt;h1&gt;</code> element, no matter where they are under <code>&lt;h1&gt;</code>
</td>
<td>h1 p</td>
<td>h1//p</td>
</tr>
</tbody>
</table>
<p>CSS elements can be combined using <strong>combinators</strong> - <a href="https://www.w3schools.com/cssref/css_ref_combinators.php">specific combination operators</a>. There are also <a href="https://www.w3schools.com/xml/xpath_axes.asp">XPath axes</a> that provide some useful ways to combine selectors to get specific results.</p>
</section><section id="selecting-by-element-idclass" class="level3" data-number="33.3.2"><h3 data-number="33.3.2" class="anchored" data-anchor-id="selecting-by-element-idclass">
<span class="header-section-number">33.3.2</span> Selecting by element ID/Class</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead><tr class="header">
<th>Task</th>
<th>CSS</th>
<th>XPath</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Select the element with ID “objectives”</td>
<td>#objectives</td>
<td>//[@id=‘objectives’]</td>
</tr>
<tr class="even">
<td>Select the <code>&lt;p&gt;</code> element with ID “objectives”</td>
<td>p#objectives</td>
<td>//p[@id=‘objectives’]</td>
</tr>
<tr class="odd">
<td>Select the element with class ‘level2’</td>
<td>.level2</td>
<td>//[@class=‘level2’]</td>
</tr>
<tr class="even">
<td>Select the <code>&lt;p&gt;</code> element with class ‘level2’</td>
<td>p.level2</td>
<td>//p[@class=‘level2’]</td>
</tr>
</tbody>
</table>
<p>Of course, you can chain these selectors together just as in the previous section.</p>
</section><section id="selecting-by-element-attributevalue" class="level3" data-number="33.3.3"><h3 data-number="33.3.3" class="anchored" data-anchor-id="selecting-by-element-attributevalue">
<span class="header-section-number">33.3.3</span> Selecting by element attribute/value</h3>
<table class="caption-top table">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead><tr class="header">
<th>Task</th>
<th>CSS</th>
<th>XPath</th>
</tr></thead>
<tbody>
<tr class="odd">
<td>Select all elements with a “dataID” attribute</td>
<td>[dataID]</td>
<td>//@dataID</td>
</tr>
<tr class="even">
<td>Select all <code>&lt;p&gt;</code> elements with any attribute</td>
<td>not supported</td>
<td>//p[@*]</td>
</tr>
<tr class="odd">
<td>Select all <code>&lt;p&gt;</code> elements with a “dataID” attribute</td>
<td>p[dataID]</td>
<td>//p[@dataID]</td>
</tr>
<tr class="even">
<td>Select all elements with a “dataID” attribute equal to “mydata”</td>
<td>[dataID=‘mydata’]</td>
<td>//*[<span class="citation" data-cites="dataID"><a href="#ref-dataID" role="doc-biblioref"><strong>dataID?</strong></a></span>=‘mydata’]</td>
</tr>
<tr class="odd">
<td>Select all elements with a “dataID” attribute containing “my”</td>
<td>[dataID~=‘my’] or [dataID*=‘my’]</td>
<td>//*[contains(<span class="citation" data-cites="dataID"><a href="#ref-dataID" role="doc-biblioref"><strong>dataID?</strong></a></span>, ‘mydata’)]</td>
</tr>
</tbody>
</table></section></section><section id="sec-webscraping-refs" class="level2" data-number="33.4"><h2 data-number="33.4" class="anchored" data-anchor-id="sec-webscraping-refs">
<span class="header-section-number">33.4</span> References</h2>


<div id="refs" class="references csl-bib-body" data-entry-spacing="0" role="list">
<div id="ref-wikimediacontributorsXML2025" class="csl-entry" role="listitem">
<div class="csl-left-margin">[1] </div>
<div class="csl-right-inline">Wikimedia contributors, <span>“<span>XML</span>,”</span> <em>Wikipedia</em>. Wikimedia Foundation, Jun. 03, 2025 [Online]. Available: <a href="https://en.wikipedia.org/w/index.php?title=XML&amp;oldid=1293665596">https://en.wikipedia.org/w/index.php?title=XML&amp;oldid=1293665596</a>. [Accessed: Jun. 04, 2025]</div>
</div>
<div id="ref-HTMLVsXML2024" class="csl-entry" role="listitem">
<div class="csl-left-margin">[2] </div>
<div class="csl-right-inline">
<span>“<span>HTML</span> vs <span>XML</span>. <span>GeeksforGeeks</span>,”</span> Jan. 2024. [Online]. Available: <a href="https://www.geeksforgeeks.org/html-vs-xml/">https://www.geeksforgeeks.org/html-vs-xml/</a>. [Accessed: Jun. 09, 2025]</div>
</div>
</div>
</section><section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1"><p>Technically, HTML was developed first, but it does have many of the same components as XML, and we use similar terminology to describe elements, content, attributes, and values, so it’s easiest (imo) to think of HTML as a subset of XML with additional rules and with certain rules relaxed.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>This is a real rabbit hole if you are curious about the very technical details of what makes up a character in text.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/srvanderplas\.github\.io\/stat-computing-r-python\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><script src="https://giscus.app/client.js" data-repo="srvanderplas/stat-computing-r-python" data-repo-id="R_kgDOIvwd2g" data-category="General" data-category-id="DIC_kwDOIvwd2s4CTksR" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script><input type="hidden" id="giscus-base-theme" value="light"><input type="hidden" id="giscus-alt-theme" value="dark"><nav class="page-navigation column-body"><div class="nav-page nav-page-previous">
      <a href="../part-advanced-topics/02-data-doc.html" class="pagination-link" aria-label="Data Documentation: Codebooks, Reproducibility, and more">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Data Documentation: Codebooks, Reproducibility, and more</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../part-advanced-topics/04-APIs.html" class="pagination-link" aria-label="Application Programming Interfaces">
        <span class="nav-page-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Application Programming Interfaces</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2025, Susan Vanderplas</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/srvanderplas/stat-computing-r-python/edit/main/part-advanced-topics/03-web-scraping.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/srvanderplas">
      <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
    </a>
  </li>  
</ul>
</div>
  </div>
</footer><script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","loop":false,"openEffect":"zoom","descPosition":"bottom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>


</body></html>