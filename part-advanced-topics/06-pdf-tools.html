<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-08-19">

<title>34&nbsp; Working with PDFs – Statistical Computing using R and Python</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../part-advanced-topics/07-intro-interactive-graphics.html" rel="next">
<link href="../part-advanced-topics/05-APIs.html" rel="prev">
<link href="../build_deps/favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-3e476e15ae565c222d94875412ae43a1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-e5743f53fa41095997804694e2f5b46d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-4ZFBDKXJXP"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-4ZFBDKXJXP', { 'anonymize_ip': true});
</script>
<script src="https://kit.fontawesome.com/baac5f0610.js" crossorigin="anonymous"></script>
<style>
div.callout-example.callout {
  border-left-color: #f39c12;
}
div.callout-example.callout-style-default > .callout-header {
  background-color: rgba(243, 156, 18, 0.13);
}
div.callout-example .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-example.callout-style-default .callout-icon::before, div.callout-example.callout-titled .callout-icon::before {
  font-family: 'Font Awesome 6 Free', FontAwesome;
  font-style: normal;
  content: '\f206' !important;
  background-image: none;
}
div.callout-setup.callout {
  border-left-color: #f3e969;
}
div.callout-setup.callout-style-default > .callout-header {
  background-color: rgba(243, 233, 105, 0.13);
}
div.callout-setup .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-setup.callout-style-default .callout-icon::before, div.callout-setup.callout-titled .callout-icon::before {
  font-family: 'Font Awesome 6 Free', FontAwesome;
  font-style: normal;
  content: '\f6e3' !important;
  background-image: none;
}
div.callout-diy.callout {
  border-left-color: #b3e094;
}
div.callout-diy.callout-style-default > .callout-header {
  background-color: rgba(179, 224, 148, 0.13);
}
div.callout-diy .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-diy.callout-style-default .callout-icon::before, div.callout-diy.callout-titled .callout-icon::before {
  font-family: 'Font Awesome 6 Free', FontAwesome;
  font-style: normal;
  content: '\f0ad' !important;
  background-image: none;
}
div.callout-learnmore.callout {
  border-left-color: #f09bb6;
}
div.callout-learnmore.callout-style-default > .callout-header {
  background-color: rgba(240, 155, 182, 0.13);
}
div.callout-learnmore .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-learnmore.callout-style-default .callout-icon::before, div.callout-learnmore.callout-titled .callout-icon::before {
  font-family: 'Font Awesome 6 Free', FontAwesome;
  font-style: normal;
  content: '\f02d' !important;
  background-image: none;
}
div.callout-demo.callout {
  border-left-color: #91d5d4;
}
div.callout-demo.callout-style-default > .callout-header {
  background-color: rgba(145, 213, 212, 0.13);
}
div.callout-demo .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-demo.callout-style-default .callout-icon::before, div.callout-demo.callout-titled .callout-icon::before {
  font-family: 'Font Awesome 6 Free', FontAwesome;
  font-style: normal;
  content: '\f12e' !important;
  background-image: none;
}
div.callout-advanced.callout {
  border-left-color: #cbbaf9;
}
div.callout-advanced.callout-style-default > .callout-header {
  background-color: rgba(203, 186, 249, 0.13);
}
div.callout-advanced .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-advanced.callout-style-default .callout-icon::before, div.callout-advanced.callout-titled .callout-icon::before {
  font-family: 'Font Awesome 6 Free', FontAwesome;
  font-style: normal;
  content: '\f5dc' !important;
  background-image: none;
}
</style>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../build_deps/style.css">
</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../part-advanced-topics/00-advanced.html">Part IV: Advanced Topics</a></li><li class="breadcrumb-item"><a href="../part-advanced-topics/06-pdf-tools.html"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Working with PDFs</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Statistical Computing using R and Python</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/srvanderplas/stat-computing-r-python/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../part-tools/00-tools-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part I: Tools</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/01-computer-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Computer Basics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/02-setting-up-computer.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Setting Up Your Computer</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/03-Rstudio-interface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">RStudio’s Interface</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/04-scripts-notebooks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Scripts and Notebooks and Terminals</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/05-git-and-github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Version Control with Git</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/06-documents.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Reproducibility and Professional Communication</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../part-gen-prog/00-gen-prog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part II: General Programming</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/00-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Introduction to Programming</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/01-basic-var-types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Variables and Basic Data Types</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/01a-math-logical-operators.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Mathematical and Logical Operators</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/02-prog-functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Functions, Packages, and Environments</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/03-data-struct.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Data Structures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/035-matrix-calcs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Matrix Calculations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/04-control-struct.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Control Structures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/05-functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Writing Functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/06-debugging.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Debugging</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/07-prog-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Programming With Data</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../part-wrangling/00-wrangling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part III: Data Wrangling</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/01-data-input.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Data Input</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/02-basic-data-vis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Data Visualization Basics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/02a-eda.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/02b-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">A Grammar of Graphics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/02c-good-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Creating Good Charts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/03-data-cleaning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Data Cleaning</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/04-strings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Working with Strings</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/05-data-reshape.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Reshaping Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/05b-normal-forms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Normal Forms of Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/06-data-join.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Joining Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/07-datetime.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Dates and Times</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/08-functional-prog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Functional Programming</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../part-advanced-topics/00-advanced.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part IV: Advanced Topics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/01-simulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Simulation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/02-data-doc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Data Documentation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/03-web-scraping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Web Scraping</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/04-xml-json-list-processing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Record-based Data and List Processing Strategies</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/05-APIs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Application Programming Interfaces</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/06-pdf-tools.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Working with PDFs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/07-intro-interactive-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Animated and Interactive Graphics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/08-javascript-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">JavaScript Graphics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/09-big-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">“Big” Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/10-databases.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Databases</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/11-arrow-parquet.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Efficient Data Access: Arrow and Parquet Files</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/12-memory-handling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Memory and Computational Efficiency</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../graveyard.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Other Topics</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#objectives" id="toc-objectives" class="nav-link active" data-scroll-target="#objectives">Objectives</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><span class="header-section-number">34.1</span> Introduction</a>
  <ul class="collapse">
  <li><a href="#pdf-file-format" id="toc-pdf-file-format" class="nav-link" data-scroll-target="#pdf-file-format"><span class="header-section-number">34.1.1</span> PDF File Format</a></li>
  </ul></li>
  <li><a href="#types-of-pdf-files" id="toc-types-of-pdf-files" class="nav-link" data-scroll-target="#types-of-pdf-files"><span class="header-section-number">34.2</span> Types of PDF Files</a>
  <ul class="collapse">
  <li><a href="#layers" id="toc-layers" class="nav-link" data-scroll-target="#layers"><span class="header-section-number">34.2.1</span> Layers</a></li>
  <li><a href="#the-trouble-with-text-layers" id="toc-the-trouble-with-text-layers" class="nav-link" data-scroll-target="#the-trouble-with-text-layers"><span class="header-section-number">34.2.2</span> The Trouble with Text Layers</a></li>
  <li><a href="#converting-images-to-text-using-optical-character-recognition" id="toc-converting-images-to-text-using-optical-character-recognition" class="nav-link" data-scroll-target="#converting-images-to-text-using-optical-character-recognition"><span class="header-section-number">34.2.3</span> Converting Images to Text Using Optical Character Recognition</a></li>
  </ul></li>
  <li><a href="#working-with-pdfs-programmatically" id="toc-working-with-pdfs-programmatically" class="nav-link" data-scroll-target="#working-with-pdfs-programmatically"><span class="header-section-number">34.3</span> Working with PDFs Programmatically</a>
  <ul class="collapse">
  <li><a href="#reading-text-from-raster-based-pdfs-with-ocr" id="toc-reading-text-from-raster-based-pdfs-with-ocr" class="nav-link" data-scroll-target="#reading-text-from-raster-based-pdfs-with-ocr"><span class="header-section-number">34.3.1</span> Reading Text from Raster-based PDFs with OCR</a></li>
  <li><a href="#reading-tabular-data-from-text-or-hybrid-pdfs" id="toc-reading-tabular-data-from-text-or-hybrid-pdfs" class="nav-link" data-scroll-target="#reading-tabular-data-from-text-or-hybrid-pdfs"><span class="header-section-number">34.3.2</span> Reading Tabular Data from Text or Hybrid PDFs</a></li>
  </ul></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/srvanderplas/stat-computing-r-python/edit/main/part-advanced-topics/06-pdf-tools.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../part-advanced-topics/00-advanced.html">Part IV: Advanced Topics</a></li><li class="breadcrumb-item"><a href="../part-advanced-topics/06-pdf-tools.html"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Working with PDFs</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-pdf-data" class="quarto-section-identifier"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Working with PDFs</span></span></h1>
</div>



<div class="quarto-title-meta column-body">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">August 19, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<p>When I started my first job out of graduate school, one particular process used by my coworkers completely mystified me: they would print out a document, and then immediately scan it back in, with the scan emailed to themselves. This seemed like a waste of toner, paper, and time to me – why would anyone do such a thing? Eventually, I found out that the printer would automatically recognize the text and add a text layer to a PDF that previously couldn’t be highlighted. So, my coworkers found a handy workaround to manually typing out the numbers they needed from older PDF documents! As clever as this was, it was also unnecessary. A lot of paper, toner, and time could have been saved if the company had just provided <strong>Optical Character Recognition</strong> (OCR) programs and made them available to workers.</p>
<p>In this chapter, you’ll learn about PDF document structure, as well as how to use OCR programs.</p>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/advanced/xkcd-2304-preprint.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="DOWNSIDES: Adobe people may periodically email your newsroom to ask you to call it an ‘Adobe® PDF document,’ but they’ll reverse course once they learn how sarcastically you can pronounce the registered trademark symbol. CC-A-NC2.5 by Randall Munroe. source"><img src="../images/advanced/xkcd-2304-preprint.png" class="img-fluid figure-img" alt="The image is a comic strip depicting a person sitting at a news desk. The person has simplistic features with a round head, short hair, and no facial features drawn. A speech bubble above them says &quot;According to a new PDF...&quot; Behind them is a sign reading &quot;Breaking News.&quot; Crossed out phrases above them include &quot;According to a new preprint...&quot;, &quot;...an unpublished study...&quot;, and &quot;According to a new paper uploaded to a preprint server, but which has not undergone peer review...&quot;. Below the main image, there's a section titled &quot;Benefits of just saying 'a PDF':&quot; followed by three bullet points. • AVOIDS IMPLICATIONS ABOUT PUBLICATION STATUS • IMMEDIATELY RAISES QUESTIONS ABOUT AUTHOR(S) • STILL IMPLIES &quot;THIS DOCUMENT WAS PROBABLY PREPARED BY A PROFESSIONAL, BECAUSE NO NORMAL HUMAN TRYING TO COMMUNICATE IN 2020 WOULD CHOOSE THIS RIDICULOUS FORMAT&quot;."></a></p>
<figcaption>DOWNSIDES: Adobe people may periodically email your newsroom to ask you to call it an ‘Adobe® PDF document,’ but they’ll reverse course once they learn how sarcastically you can pronounce the registered trademark symbol.<br>CC-A-NC2.5 by Randall Munroe. <a href="https://xkcd.com/2304/">source</a></figcaption>
</figure>
</div>
</div></div><section id="objectives" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="objectives">Objectives</h2>
<ul>
<li>Identify the type of PDF and the data it contains.</li>
<li>Develop a strategy to extract the data from the PDF programmatically, using strategies to improve the success of Optical Character Recognition (OCR) if necessary.</li>
<li>Augment the PDF files with OCR to add a text layer, if necessary, before extracting information.</li>
<li>Extract information from PDFs programmatically and format the information appropriately.</li>
<li>Implement quality control and data cleaning measures which handle the most common OCR errors elegantly.</li>
</ul>
</section>
<section id="introduction" class="level2 page-columns page-full" data-number="34.1">
<h2 data-number="34.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">34.1</span> Introduction</h2>
<p>Over the objections of open data organizations, data archivists <span class="citation" data-cites="klindtPDFConsideredHarmful2017"><a href="#ref-klindtPDFConsideredHarmful2017" role="doc-biblioref">[1]</a></span>, and programmers <span class="citation" data-cites="edwardsWhyExtractingData2025 zhangDocumentParsingUnveiled2024"><a href="#ref-edwardsWhyExtractingData2025" role="doc-biblioref">[2]</a>, <a href="#ref-zhangDocumentParsingUnveiled2024" role="doc-biblioref">[3]</a></span>, companies and government agencies frequently use PDF (portable document format) documents to store and release data. Election results (<a href="https://sos.oregon.gov/elections/Documents/results/november-general-2024-results.pdf">Oregon, 2024</a>), property appraisals (<a href="../data/Lancaster-County-NE-Real-Estate-AppraisalCard-28719-2025-147568.pdf">Lancaster County, Nebraska</a>), public health reports (<a href="../data/cdc-mmwr-2025-07-10.pdf">Centers for Disease Control Morbidity and Mortality Weekly Reports</a>), and more, locked up in PDF format instead of stored properly in nicely formatted CSVs, spreadsheets, or databases <span class="citation" data-cites="merrillPurifyingSeaPDF2017"><a href="#ref-merrillPurifyingSeaPDF2017" role="doc-biblioref">[4]</a></span>. Even though we object to the storage mechanism, learning how to deal with data stored in PDF format is a valuable skill for the aspiring data scientist. Even if you never work with PDF data in a professional capacity (and I hope you’re that lucky), these skills are very useful for public data side projects.</p>
<section id="pdf-file-format" class="level3 page-columns page-full" data-number="34.1.1">
<h3 data-number="34.1.1" class="anchored" data-anchor-id="pdf-file-format"><span class="header-section-number">34.1.1</span> PDF File Format</h3>
<p>The PDF file format was created in 1993 by Adobe and was a proprietary format until 2008, when the format became an open standard under the control of the International Standards Organization <span class="citation" data-cites="wikimediacontributorsHistoryPDF2024"><a href="#ref-wikimediacontributorsHistoryPDF2024" role="doc-biblioref">[5]</a></span>. As the acronym suggests, Portable Document Format is intended to be readable on any computer. This was something of a novel idea in the 1990s, when Mac users used one document creation software and Windows users another, and there was not a version of e.g.&nbsp;Microsoft Office available for Mac.</p>
<p>The technical details of a PDF file are complex <span class="citation" data-cites="gnupdfprojectIntroductionPDF2014 hodsonPDFSuccinctly2012"><a href="#ref-gnupdfprojectIntroductionPDF2014" role="doc-biblioref">[6]</a>, <a href="#ref-hodsonPDFSuccinctly2012" role="doc-biblioref">[7]</a></span>. However, conceptually, there are four required components to a PDF document, as shown in <a href="#fig-pdf-doc-components" class="quarto-xref">Figure&nbsp;<span>34.1</span></a>:</p>

<div class="no-row-height column-margin column-container"><div class="">
<div id="fig-pdf-doc-components" class="lightbox quarto-float quarto-figure quarto-figure-center anchored" alt="A box containing four colored boxes: Header, Body, Cross-ref table, and Trailer.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-pdf-doc-components-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="../images/advanced/pdf-document-components.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="Figure&nbsp;34.1: High-level required components of a PDF document."><img src="../images/advanced/pdf-document-components.png" class="img-fluid figure-img" alt="A box containing four colored boxes: Header, Body, Cross-ref table, and Trailer."></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-pdf-doc-components-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;34.1: High-level required components of a PDF document.
</figcaption>
</figure>
</div>
<div id="fig-pdf-body-components" class="lightbox quarto-float quarto-figure quarto-figure-center anchored" alt="A network diagram showing the Catalog, with an arrow leading to the Page Tree. Below the Page tree are two page nodes, Page 1 and Page 2. Arrows connect the Page tree to the pages, and the pages to the page tree. The final layer of the network contains page 1 content, resources, and page 2 content. Arrows point from page 1 and 2 to the resources node, as well as to the corresponding page content.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-pdf-body-components-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="../images/advanced/pdf-body-components.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="Figure&nbsp;34.2: Required components of a PDF Body"><img src="../images/advanced/pdf-body-components.png" class="img-fluid figure-img" alt="A network diagram showing the Catalog, with an arrow leading to the Page Tree. Below the Page tree are two page nodes, Page 1 and Page 2. Arrows connect the Page tree to the pages, and the pages to the page tree. The final layer of the network contains page 1 content, resources, and page 2 content. Arrows point from page 1 and 2 to the resources node, as well as to the corresponding page content."></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-pdf-body-components-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;34.2: Required components of a PDF Body
</figcaption>
</figure>
</div>
</div></div><ul>
<li>Header
<ul>
<li>PDF version number</li>
<li>arbitrary sequence of binary data to prevent applications from opening the document as a text file (which would corrupt the file)</li>
</ul></li>
<li>Body (relationships between body components shown in <a href="#fig-pdf-body-components" class="quarto-xref">Figure&nbsp;<span>34.2</span></a>)
<ul>
<li>Page tree - serves as the root of the document, and may be as simple as a list of pages.</li>
<li>Pages - each page is defined independently and contains its own metadata, links to resources, and content (defined separately).</li>
<li>Resources - objects required to render a page, such as fonts.</li>
<li>Content - text and graphics which appear visually on the page.</li>
<li>Catalog - an indication to programs as to where to start reading the document. Often this is just a link to the root page tree.</li>
</ul></li>
<li>Cross-reference table - Records the location in the file of each object in the body of the file so that when viewing a page, only objects from that page are loaded into memory.</li>
<li>Trailer - tells applications how to read the file
<ul>
<li>A reference to the catalog which links to the document root</li>
<li>Location of the cross-reference table</li>
<li>Size of the cross-reference table</li>
</ul></li>
</ul>
<p><span class="citation" data-cites="kingAdobeIntroductionInsides2005"><a href="#ref-kingAdobeIntroductionInsides2005" role="doc-biblioref">[8]</a></span> has some good examples showing pages and the PDF document code that create the pages.</p>
<p>Within the page, <strong>streams</strong> are often used to define the page’s appearance (the other option is <strong>lattices</strong>, which can be used to divide the page up into sections). To add text, commands are issued to define the font, position the text cursor, and type the text onto the page. Text is positioned from the bottom left corner, with <span class="math inline">\(Y\)</span> defining the vertical and <span class="math inline">\(X\)</span> defining the horizontal location. Line breaks and other formatting features are not a part of the PDF format – these operations are performed by another program before the file is saved as PDF. As a result, text commands in PDF can be fragmented, leading to a continuous paragraph of words being written in the PDF file as separate lines, with other page elements present in between (like figure captions, page numbers, and images). In addition, PDF documents allow for changing the kerning of text (space between letters) in specific ways that may make it difficult for the characters to be separated visually. One common example of this is the sequence of characters <code>ff</code> or <code>fi</code> in a document, which can sometimes be read in interesting ways by OCR: sometimes, as unicode ﬀ or ﬁ, sometimes as Cyrillic characters, and sometimes left out entirely or misplaced.</p>
<div class="callout callout-style-default callout-demo callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Demo: PDF Fun
</div>
</div>
<div class="callout-body-container callout-body">
<p>Consider a <a href="../data/Lancaster-County-NE-Real-Estate-AppraisalCard-28719-2025-147568.pdf">Home appraisal record from Lancaster County, NE</a>. Opening the card in a PDF reader and selecting all the text yields a <a href="../data/Lancaster-County-NE-Real-Estate-AppraisalCard-28719-2025-147568.txt">disorganized text file</a> (and this PDF is actually created using modern methods and relatively clean!)</p>
<p>A few observations, marked up in <a href="#fig-pdf-layout-text" class="quarto-xref">Figure&nbsp;<span>34.3</span></a>:</p>
<ul>
<li>The title on page 1 is on line 39 of the file, and it appears that the data from the first column is on lines 1-38.</li>
<li>When there are multi-column tables, as in the “Inspection History” table in the middle of the first page, the values are listed by column, but missing values (the times of inspection) are not indicated at all!</li>
<li>The Appraised Values table has columns Land, Building, Total, and Method. Line 142 of the text file shows an entry for “Total Method”, and it is clear that the text for the two columns has been combined.</li>
</ul>
<div id="fig-pdf-layout-text" class="lightbox quarto-float quarto-figure quarto-figure-center anchored" alt="A screenshot of the first page of the PDF, with boxes highlighting the locations corresponding to the points shown above. In the Appraised Values table, arrows are shown connecting the Appraised Values header, Land, Building, Total Method, Current, $45,000, $111,000, $156,000 IDXVAL, Prior, $45,000, $111,000, and $156,000 IDXVAL sequentially.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-pdf-layout-text-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="../images/advanced/Lancaster-County-NE-Real-Estate-AppraisalCard-28719-2025-147568.svg" class="lightbox" data-gallery="quarto-lightbox-gallery-4" title="Figure&nbsp;34.3: Comparing text of PDF document to the rendered PDF document."><img src="../images/advanced/Lancaster-County-NE-Real-Estate-AppraisalCard-28719-2025-147568.svg" class="img-fluid figure-img" alt="A screenshot of the first page of the PDF, with boxes highlighting the locations corresponding to the points shown above. In the Appraised Values table, arrows are shown connecting the Appraised Values header, Land, Building, Total Method, Current, $45,000, $111,000, $156,000 IDXVAL, Prior, $45,000, $111,000, and $156,000 IDXVAL sequentially."></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-pdf-layout-text-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;34.3: Comparing text of PDF document to the rendered PDF document.
</figcaption>
</figure>
</div>
<p>Now, perhaps we could write a script that would disentangle some of this information and format it properly, though I think the missing values would still be unrecoverable without someone visually mapping the data to the corresponding lines.</p>
<p>The arrangement of the text you get from selecting all text is different in different PDF applications – I tried it with <a href="../data/Lancaster-County-NE-Real-Estate-AppraisalCard-28749-2025-147568.txt">Okular</a> and <a href="../data/Lancaster-County-NE-Real-Estate-AppraisalCard-28749-2025-147568-Firefox.txt">Firefox</a>, and got totally different orders of text boxes.</p>
<p>The scope of the actual problem only becomes visible when you look at a second <a href="../data/Lancaster-County-NE-Real-Estate-AppraisalCard-28749-2025-147568.pdf">PDF document</a> and the corresponding <a href="../data/Lancaster-County-NE-Real-Estate-AppraisalCard-28749-2025-147568.txt">text file</a>. <a href="#fig-pdf-layout-text-parallel" class="quarto-xref">Figure&nbsp;<span>34.4</span></a> shows the two PDF files and their corresponding text files, with the comparable portion of each PDF and text file highlighted.</p>
<div id="fig-pdf-layout-text-parallel" class="lightbox quarto-float quarto-figure quarto-figure-center anchored" alt="A screenshot of the text files and PDF files for both real estate appraisal cards. The recent appeal history and assessed value history table headers and first row of text are highlighted in both sets of documents.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-pdf-layout-text-parallel-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="../images/advanced/Lancaster-County-NE-Real-Estate-AppraisalCard-28749-2025-147568.png" class="lightbox" data-gallery="quarto-lightbox-gallery-5" title="Figure&nbsp;34.4: Lancaster county, NE real estate appraisal cards and text, with correpsonding sections highlighted across two appraisal cards. The text corresponding to the same space on the PDF has different formatting because one row of the table is blank on one of the cards."><img src="../images/advanced/Lancaster-County-NE-Real-Estate-AppraisalCard-28749-2025-147568.png" class="img-fluid figure-img" alt="A screenshot of the text files and PDF files for both real estate appraisal cards. The recent appeal history and assessed value history table headers and first row of text are highlighted in both sets of documents."></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-pdf-layout-text-parallel-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;34.4: Lancaster county, NE real estate appraisal cards and text, with correpsonding sections highlighted across two appraisal cards. The text corresponding to the same space on the PDF has different formatting because one row of the table is blank on one of the cards.
</figcaption>
</figure>
</div>
</div>
</div>
<p>Hopefully you’re beginning to understand how challenging this whole extracting data from PDFs thing can be! What we would really want to do here is detect the column boundaries somehow, and then read the data in from each table column-wise - this would be easier than postprocessing it, and we can also get coordinates for x and y to help us determine which data correspond to the same rows. Hold on to that thought – we’ll come back to it.</p>
</section>
</section>
<section id="types-of-pdf-files" class="level2" data-number="34.2">
<h2 data-number="34.2" class="anchored" data-anchor-id="types-of-pdf-files"><span class="header-section-number">34.2</span> Types of PDF Files</h2>
<section id="layers" class="level3" data-number="34.2.1">
<h3 data-number="34.2.1" class="anchored" data-anchor-id="layers"><span class="header-section-number">34.2.1</span> Layers</h3>
<p>Practically, we can think of PDFs as having a text layer, an image layer, or both (hybrid PDFs). A PDF with a text layer will allow you to select embedded text and copy it into a text file, while a PDF that just has an image layer does not. It is also possible to have a PDF that has an image layer with a corresponding text layer on top. Optical Character Recognition takes a PDF with only image layers and creates a text file (or layer, depending on the tool) by identifying the characters in the document and converting those characters to text with a corresponding <span class="math inline">\((x,y)\)</span> location in the document. Different OCR programs use different conventions for this process, and the quality of the image matters a lot as well - some images are just not good enough to produce a passable transcription of the text using automatic methods.</p>
<p>Thus, if we want to think about classifying PDF files by type, we might come up with the following groups:</p>
<ul>
<li>A PDF file that has an image layer, but no text layer. (This is sometimes called a “raster” PDF, because an image that’s made up of pixels is a raster image.)</li>
<li>A PDF file that has a text layer but no image layer is unsurprisingly called a <strong>text</strong> PDF.</li>
<li>Many files have both text and images; these are <strong>hybrid</strong> PDFs.</li>
</ul>
<p>How we ingest data from PDF files depends heavily on the type of PDF we have.</p>
<div class="callout callout-style-default callout-demo callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Demo: Types of PDF Files
</div>
</div>
<div class="callout-body-container callout-body">
<p>For this demo, I’ve converted the first page of one of the Lancaster county, NE property appraisal PDFs into:</p>
<ul>
<li>an <a href="../data/Lancaster-County-NE-Real-Estate-AppraisalCard-28749-2025-147568-pg1-image.pdf">image only PDF</a> and</li>
<li>a <a href="../data/Lancaster-County-NE-Real-Estate-AppraisalCard-28749-2025-147568-pg1-text.pdf">text-based PDF</a> (the original form).</li>
</ul>
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>Open these up in your favorite PDF editor and try to highlight the text in each. How does it work?</p>
</div>
</div>
</div>
<p>We can also examine the format of a PDF file using R and python libraries.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>You’ll need the <code>pdftools</code> package, which you can install with <code>install.packages("pdftools")</code>. This may require you to install <code>libpoppler</code> on Linux <i class="fa-brands fa-linux" aria-hidden="true"></i>, but versions for other operating systems should be self-contained.</p>
<p>The <code>pdf_info</code> function gives us information from the PDF header, and the <code>pdf_text</code> function tries to extract the text, if it exists.</p>
<section id="text-based-pdf" class="level5 unnumbered">
<h5 class="unnumbered anchored" data-anchor-id="text-based-pdf">Text-Based PDF</h5>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-2"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-2-1"><a href="#annotated-cell-2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pdftools)</span>
<span id="annotated-cell-2-2"><a href="#annotated-cell-2-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="annotated-cell-2-3"><a href="#annotated-cell-2-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-2-4"><a href="#annotated-cell-2-4" aria-hidden="true" tabindex="-1"></a><span class="fu">pdf_info</span>(<span class="st">"../data/Lancaster-County-NE-Real-Estate-AppraisalCard-28749-2025-147568-pg1-text.pdf"</span>)<span class="sc">$</span>version</span>
<span id="annotated-cell-2-5"><a href="#annotated-cell-2-5" aria-hidden="true" tabindex="-1"></a><span class="fu">pdf_text</span>(<span class="st">"../data/Lancaster-County-NE-Real-Estate-AppraisalCard-28749-2025-147568-pg1-text.pdf"</span>) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="1">1</button><span id="annotated-cell-2-6" class="code-annotation-target"><a href="#annotated-cell-2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="2">2</button><span id="annotated-cell-2-7" class="code-annotation-target"><a href="#annotated-cell-2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">unlist</span>() <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-2" data-target-annotation="3">3</button><span id="annotated-cell-2-8" class="code-annotation-target"><a href="#annotated-cell-2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">head</span>()</span>
<span id="annotated-cell-2-9"><a href="#annotated-cell-2-9" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "1.3"</span></span>
<span id="annotated-cell-2-10"><a href="#annotated-cell-2-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "                                                                   LANCASTER COUNTY APPRAISAL CARD"                                                                                                        </span></span>
<span id="annotated-cell-2-11"><a href="#annotated-cell-2-11" aria-hidden="true" tabindex="-1"></a><span class="do">## [2] "     Parcel ID: 10-24-201-025-000                                         Tax Year: 2025                                                Run Date: 7/15/2025 12:23:27 PM                  Page       1 of 2"</span></span>
<span id="annotated-cell-2-12"><a href="#annotated-cell-2-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [3] "    OWNER NAME AND MAILING ADDRESS                                                                                 SALES INFORMATION"                                                                      </span></span>
<span id="annotated-cell-2-13"><a href="#annotated-cell-2-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [4] "EASTDALE RENTALS LLC                           Date                Type            Sale Amount          Validity              Multi           Inst.Type                            Instrument #"           </span></span>
<span id="annotated-cell-2-14"><a href="#annotated-cell-2-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [5] "Attn: JEFF &amp; ANITA EASTMAN                     05/20/2022          Improved                   $0        Disqualified                          Warranty Deed                        2022025796"             </span></span>
<span id="annotated-cell-2-15"><a href="#annotated-cell-2-15" aria-hidden="true" tabindex="-1"></a><span class="do">## [6] "2501 S 74 ST                                   04/23/1996          Improved              $37,000        Disqualified                          Warranty Deed                        1996016959"</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-2" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="6" data-code-annotation="1">Split text into lines</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="7" data-code-annotation="2">Remove from list structure – make a vector</span>
</dd>
<dt data-target-cell="annotated-cell-2" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-2" data-code-lines="8" data-code-annotation="3">Show first few lines</span>
</dd>
</dl>
</div>
</div>
</section>
<section id="image-based-pdf" class="level5 unnumbered">
<h5 class="unnumbered anchored" data-anchor-id="image-based-pdf">Image-Based PDF</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">pdf_info</span>(<span class="st">"../data/Lancaster-County-NE-Real-Estate-AppraisalCard-28749-2025-147568-pg1-image.pdf"</span>)<span class="sc">$</span>version</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "1.5"</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">pdf_text</span>(<span class="st">"../data/Lancaster-County-NE-Real-Estate-AppraisalCard-28749-2025-147568-pg1-image.pdf"</span>) </span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] ""</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>You will need the <code>pdfplumber</code> package <span class="citation" data-cites="singer-vinePdfplumber2025"><a href="#ref-singer-vinePdfplumber2025" role="doc-biblioref">[9]</a></span>, which you can install with pip.</p>
<p>The <code>pdf</code> object contains <code>metadata</code> and <code>pages</code>, and page text (if it exists) can be accessed with the <code>pdf.pages[i].extract_text()</code> method.</p>
<section id="text-based-pdf-1" class="level5 unnumbered">
<h5 class="unnumbered anchored" data-anchor-id="text-based-pdf-1">Text-Based PDF</h5>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-4"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="1">1</button><span id="annotated-cell-4-1" class="code-annotation-target"><a href="#annotated-cell-4-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pdfplumber</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="2">2</button><span id="annotated-cell-4-2" class="code-annotation-target"><a href="#annotated-cell-4-2" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> pdfplumber.<span class="bu">open</span>(<span class="st">"../data/Lancaster-County-NE-Real-Estate-AppraisalCard-28749-2025-147568-pg1-text.pdf"</span>) <span class="im">as</span> pdf:</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="3">3</button><span id="annotated-cell-4-3" class="code-annotation-target"><a href="#annotated-cell-4-3" aria-hidden="true" tabindex="-1"></a>  metadata <span class="op">=</span> pdf.metadata</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="4">4</button><span id="annotated-cell-4-4" class="code-annotation-target"><a href="#annotated-cell-4-4" aria-hidden="true" tabindex="-1"></a>  first_page <span class="op">=</span>  pdf.pages[<span class="dv">0</span>]</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="5">5</button><span id="annotated-cell-4-5" class="code-annotation-target"><a href="#annotated-cell-4-5" aria-hidden="true" tabindex="-1"></a>  text <span class="op">=</span> first_page.extract_text()</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="6">6</button><span id="annotated-cell-4-6" class="code-annotation-target"><a href="#annotated-cell-4-6" aria-hidden="true" tabindex="-1"></a>  pdf.close()</span>
<span id="annotated-cell-4-7"><a href="#annotated-cell-4-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-4-8"><a href="#annotated-cell-4-8" aria-hidden="true" tabindex="-1"></a>metadata</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-4" data-target-annotation="7">7</button><span id="annotated-cell-4-9" class="code-annotation-target"><a href="#annotated-cell-4-9" aria-hidden="true" tabindex="-1"></a>text.split(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)[<span class="dv">0</span>:<span class="dv">5</span>]</span>
<span id="annotated-cell-4-10"><a href="#annotated-cell-4-10" aria-hidden="true" tabindex="-1"></a><span class="co">## {'CreationDate': "D:20250715122327-05'00'", 'Producer': 'iText# by Gerald Henson (r0.95 of lowagie.com, based on version Paulo build 103)'}</span></span>
<span id="annotated-cell-4-11"><a href="#annotated-cell-4-11" aria-hidden="true" tabindex="-1"></a><span class="co">## ['LANCASTER COUNTY APPRAISAL CARD', 'Parcel ID:10-24-201-025-000 Tax Year: 2025 Run Date: 7/15/2025 12:23:27 PM Page 1 of 2', 'OWNER NAME AND MAILING ADDRESS SALES INFORMATION', 'EASTDALE RENTALS LLC Date Type Sale Amount Validity Multi Inst.Type Instrument #', 'Attn: JEFF &amp; ANITA EASTMAN 05/20/2022 Improved $0 Disqualified Warranty Deed 2022025796']</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-4" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="1" data-code-annotation="1">Use the <code>pdfplumber</code> library</span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="2" data-code-annotation="2">Open the file and call it <code>pdf</code></span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="3" data-code-annotation="3">Get the metadata</span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="4" data-code-annotation="4">Get the data for the first page</span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="5" data-code-annotation="5">Extract the text from the first page</span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="6" data-code-annotation="6">Close the file (important to release memory)</span>
</dd>
<dt data-target-cell="annotated-cell-4" data-target-annotation="7">7</dt>
<dd>
<span data-code-cell="annotated-cell-4" data-code-lines="9" data-code-annotation="7">Split the text by <code>\n</code> and show the first few lines</span>
</dd>
</dl>
</div>
</div>
</section>
<section id="image-based-pdf-1" class="level5 unnumbered">
<h5 class="unnumbered anchored" data-anchor-id="image-based-pdf-1">Image-Based PDF</h5>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="cf">with</span> pdfplumber.<span class="bu">open</span>(<span class="st">"../data/Lancaster-County-NE-Real-Estate-AppraisalCard-28749-2025-147568-pg1-image.pdf"</span>) <span class="im">as</span> pdf:</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  metadata <span class="op">=</span> pdf.metadata</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>  first_page <span class="op">=</span>  pdf.pages[<span class="dv">0</span>]</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  text <span class="op">=</span> first_page.extract_text()</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  pdf.close()</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>metadata</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a><span class="co">## {'Producer': 'cairo 1.16.0 (https://cairographics.org)', 'CreationDate': "D:20250715133207-05'00"}</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>text.split(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)[<span class="dv">0</span>:<span class="dv">5</span>]</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a><span class="co">## ['']</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
</div>
</div>
</div>
<p>Notice that the text does not exist for the image-based PDF. I created the image version of the PDF by opening the PDF in an image editor and saving the resulting file as PDF within that image editor, so it’s not surprising that the text layer is not present in that version of the file.</p>
</div>
</div>
</section>
<section id="the-trouble-with-text-layers" class="level3" data-number="34.2.2">
<h3 data-number="34.2.2" class="anchored" data-anchor-id="the-trouble-with-text-layers"><span class="header-section-number">34.2.2</span> The Trouble with Text Layers</h3>
<blockquote class="blockquote">
<p>Data scientists are often interested in data from tables. Unfortunately the pdf format is pretty dumb and does not have notion of a table (unlike for example HTML). Tabular data in a pdf file is nothing more than strategically positioned lines and text, which makes it difficult to extract the raw data… <span class="citation" data-cites="oomsPdftoolsTextExtraction2025"><a href="#ref-oomsPdftoolsTextExtraction2025" role="doc-biblioref">[10]</a></span></p>
</blockquote>
<p>The quote above gives you some idea of the challenge of extracting text from a PDF, but it’s likely you’ve already come across this challenge when trying to copy text out of a PDF and into some other program for editing. Incidentally, the PDF representation of text is also a reason why some groups are shifting away from the format entirely – it is difficult to make PDF documents accessible to screen readers, because the text isn’t inherently ordered in any way<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
<p>Text extraction from PDFs can be annoying, but extracting structured text in tables is an even harder challenge. Hopefully, the next few demonstrations will help you appreciate why it’s so challenging, as well as introducing you to the tools you may need to convert image layers to text layers.</p>
</section>
<section id="converting-images-to-text-using-optical-character-recognition" class="level3" data-number="34.2.3">
<h3 data-number="34.2.3" class="anchored" data-anchor-id="converting-images-to-text-using-optical-character-recognition"><span class="header-section-number">34.2.3</span> Converting Images to Text Using Optical Character Recognition</h3>
<p>In order to covert image layers to text layers, we need to use Optical Character Recognition (OCR).</p>
<p>Most free OCR tools are based on the <code>tesseract</code> library <span class="citation" data-cites="weilTesseract2025"><a href="#ref-weilTesseract2025" role="doc-biblioref">[11]</a></span>, which you can access using <code>pytesseract</code> in python <span class="citation" data-cites="leePytesseractPythontesseractPython2024"><a href="#ref-leePytesseractPythontesseractPython2024" role="doc-biblioref">[12]</a></span> or the <code>tesseract</code> R package <span class="citation" data-cites="tesseract-r"><a href="#ref-tesseract-r" role="doc-biblioref">[13]</a></span> You can also run <code>tesseract</code> from the command line, if you <a href="https://tesseract-ocr.github.io/tessdoc/Installation.html">install the library</a> for your operating system and language.</p>
<div class="callout callout-style-default callout-demo callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Demo: Optical Character Recognition
</div>
</div>
<div class="callout-body-container callout-body">
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Bash</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-3" role="tab" aria-controls="tabset-2-3" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<p>For the sake of shorter commands, let’s assume I’m working with a 1-page PDF file named <code>file.pdf</code> and want to create <code>file.txt</code> which contains the text of the image-based PDF.</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-6"><pre class="sourceCode bash code-annotation-code code-with-copy code-annotated"><code class="sourceCode bash"><button class="code-annotation-anchor" data-target-cell="annotated-cell-6" data-target-annotation="1">1</button><span id="annotated-cell-6-1" class="code-annotation-target"><a href="#annotated-cell-6-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pdftoppm</span> <span class="at">-png</span> ../data/file.pdf file</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-6" data-target-annotation="2">2</button><span id="annotated-cell-6-2" class="code-annotation-target"><a href="#annotated-cell-6-2" aria-hidden="true" tabindex="-1"></a><span class="ex">tesseract</span>  <span class="at">-l</span> eng ../data/file-1.png ../data/file-1-bash</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-6" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-6" data-code-lines="1" data-code-annotation="1">Convert PDF to PNG to work with Tesseract. If the PDF file has more than one page, this will create <code>file-1.png</code> … <code>file-n.png</code> images that can be fed into tesseract using a bash for loop.</span>
</dd>
<dt data-target-cell="annotated-cell-6" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-6" data-code-lines="2" data-code-annotation="2">Extract the text to a text file.</span>
</dd>
</dl>
</div>
</div>
<div class="callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Output
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="columns">
<div class="column">
<section id="png" class="level6 unnumbered">
<h6 class="unnumbered anchored" data-anchor-id="png">PNG</h6>
<p><a href="../data/file-1-bash.png">Link to the PNG file</a> <a href="../data/Lancaster-County-NE-Real-Estate-AppraisalCard-28749-2025-147568-pg1-image.png" class="lightbox" data-gallery="quarto-lightbox-gallery-6"><img src="../data/Lancaster-County-NE-Real-Estate-AppraisalCard-28749-2025-147568-pg1-image.png" class="img-fluid" alt="A detailed Lancaster County Appraisal Card for a property detailing owner, sales, inspection, and value information. The document presents comprehensive information about a property for tax year 2025, with a run date of July 15, 2025. The document is formatted into several sections, including owner information, sales information, property address, general property information, inspection history, appeal history, assessed value history, appraised values, and market land information. The owner section lists &quot;EASTDALE RENTALS LLC&quot; with mailing details. Sales information includes several dates of transactions, instrument types, and amounts related to property sales and transfers. The property site address is listed as 2250 Sheldon St, Lincoln, NE 68503. The general property information provides details like property class, zoning, neighborhood, and school code base. An inspection history section lists dates and reasons for inspections, along with the appraiser involved and contact code. Recent appeal history and assessed value history show changes in land and building values over recent years. Appraised values include current and prior values, detailing land, building, and total values. The legal description notes the property location in &quot;ENGLISH ADDITION, BLOCK 2, Lot 23.&quot;"></a></p>
</section>
</div><div class="column">
<section id="text" class="level6 unnumbered">
<h6 class="unnumbered anchored" data-anchor-id="text">Text</h6>
<p><a href="../data/file-1-bash.txt">Link to the text file</a></p>
<div class="cell">
<pre><code>## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN,
## 2501 S 74 ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## MAGEE AOE NOON
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## | PROPERTY FACTORS
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parkina Type:
## Parking Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## 
## Tax Year: 2025 Run Date: 7/15/2025 12:23:27 PM Page 1 of 2
## 
## Date Type Sale Amount Validity Multi Inst.Type Instrument #
## 05/20/2022 Improved $0 Disqualified Warranty Deed 2022025796
## 04/23/1996 Improved $37,000 Disqualified Warranty Deed 1996016959
## 09/08/1994 Improved $0 Disaualified Death Certificate 1994045456
## 
## Number Issue Date Amount Status Type Description
## 
## Date Time Process Reason Appraiser Contact-Code
## 
## 07/11/2022 Interview and Measure - 01 General Review MRC Tenant - 2
## 
## 11/20/2015 11:45AM —_—No Answer At Door, Exterior - 04 General Review afo
## 
## 07/15/2010 Field Review - 08 Final Review CAB
## 
## 0504/2010 No Answer At Door, Measured - 05 General Review TMJ
## 
## 09/17/2008 Field Review - 08 Final Review CAB
## 
## Year Level Case # Status Action Year Land Building Total
## 2025 $45,000 $124,700 $169,700
## 2024 $45,000 $124,700 $169,700
## 2023 $45,000 $115,700 $160,700
## 2022 $25,000 $69,400 $94,400
## 2021 $25,000 $69,400 $94,400
## 
## Land Building Total Method
## 
## Current $45,000 $124,700 $169,700 IDXVAL
## Prior $45,000 $124,700 $169,700 IDXVAL
## Cost $158,280 Market $332,300 GRM $169,700
## Income $0 MRA $160,100 Ovr
## 
## Method Type AC/SF (Units Inft Factt Inf2 Fact2 InflC FactC Avg Unit Val Land Value
## 
## Site RPI-Primary Interior 45,000 45,000
## 
## Total Acres 0.15 GIS SF 6402 Mkt Land Total $45,000
## 
## Taxable Aq Land Total $0</code></pre>
</div>
</section>
</div>
</div>
</div>
</div>
</div>
<p>After OCR, you can search for text in the text output, but it doesn’t provide all of the features that a hybrid PDF with both an image and a text layer provides – the text isn’t associated with the <span class="math inline">\((x,y)\)</span> location on the page(s). Also, note that the OCR isn’t perfect: because the word “Flags:” under Exemptions in the left column is partially obscured, it is transcribed as “Flaas:”, which isn’t an english word. Using OCR can introduce errors in to the data in ways that are not necessarily predictable (though, predictable issues include confusing capital O for 0, lowercase L for 1, and so on). However, OCR is miles better than doing things manually!</p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<p>On <i class="fa-brands fa-apple" aria-hidden="true"></i> Mac and <i class="fa-brands fa-linux" aria-hidden="true"></i> Linux, you will likely need to install some system packages to make the <code>tesseract</code> package installable.</p>
<pre><code>Try installing:
 * deb: libtesseract-dev libleptonica-dev (Debian, Ubuntu, etc)
 * rpm: tesseract-devel leptonica-devel (Fedora, CentOS, RHEL)
 * brew: tesseract (Mac OSX)</code></pre>
<p>The <i class="fa-brands fa-windows" aria-hidden="true"></i> Windows R package should contain the dependencies required.</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-9"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-9-1"><a href="#annotated-cell-9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("tesseract")</span></span>
<span id="annotated-cell-9-2"><a href="#annotated-cell-9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tesseract)</span>
<span id="annotated-cell-9-3"><a href="#annotated-cell-9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pdftools)</span>
<span id="annotated-cell-9-4"><a href="#annotated-cell-9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="annotated-cell-9-5"><a href="#annotated-cell-9-5" aria-hidden="true" tabindex="-1"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="1">1</button><span id="annotated-cell-9-6" class="code-annotation-target"><a href="#annotated-cell-9-6" aria-hidden="true" tabindex="-1"></a><span class="fu">pdf_convert</span>(<span class="at">pdf =</span> <span class="st">"../data/file.pdf"</span>, <span class="at">filenames =</span> <span class="st">"../data/file-%d-r.%s"</span>)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-9" data-target-annotation="2">2</button><span id="annotated-cell-9-7" class="code-annotation-target"><a href="#annotated-cell-9-7" aria-hidden="true" tabindex="-1"></a>text <span class="ot">&lt;-</span> <span class="fu">ocr</span>(<span class="st">"../data/file-1-r.png"</span>, <span class="at">engine =</span> <span class="fu">tesseract</span>(<span class="st">"eng"</span>))</span>
<span id="annotated-cell-9-8"><a href="#annotated-cell-9-8" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(text, <span class="st">"../data/file-1-r.txt"</span>)</span>
<span id="annotated-cell-9-9"><a href="#annotated-cell-9-9" aria-hidden="true" tabindex="-1"></a><span class="do">## Converting page 1 to ../data/file-1-r.png... done!</span></span>
<span id="annotated-cell-9-10"><a href="#annotated-cell-9-10" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "../data/file-1-r.png"</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-9" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-9" data-code-lines="6" data-code-annotation="1">Convert the pdf to an image. Provide placeholder <code>%d</code> in the string for the number, and <code>%s</code> in the string for the extension.</span>
</dd>
<dt data-target-cell="annotated-cell-9" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-9" data-code-lines="7" data-code-annotation="2">Run OCR on the image using the english language engine</span>
</dd>
</dl>
</div>
</div>
<div class="callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Output Text
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><a href="../data/file-1-r.txt">Link to the text file created with R</a></p>
<div class="cell">
<pre><code>## Parc: 102420125000 Tox Yous 2125 Fun Date: Tn e227 PM_——_—Pooe_1 of 2
## omen ue ano mauincavoness ale ont
## Serer aaracsrion lowe ees So Staules tar bees ‘oro
## PROPERTY STS ADDRESS aun pats
## 20 S204 st hmber——sueOHe Amount Sts Toe esc
## event Propenr?HoRNTON
## Uineunis: 2 magento,
## bape aot FO cen72008 Ft Bevew “08 ral lene ec
## ronan mecenrapremnmstony —sseDvatuenisromy
## ae a $e00 Stat Steir
## | pnorenryractons ie Soo. oan “Bee
## Socino: arrnatseovawues
## [Araaupesonenon cent som st2t7— SD xvAL
## 
## ‘cosmo Wort ABE ORM HERD
##  asereanminconiion
## Towlawes 015 ossr 612 etLand Tot $4500
## 
## Taiabe Aa Land Tt 8</code></pre>
</div>
</div>
</div>
</div>
<p>Why is this OCR version so much worse than the version using Bash? They’re using the same <code>tesseract</code> library under the hood!</p>
<p>A look at the documentation of <code>pdftoppm</code> suggests that the default resolution is 150 DPI for image conversion, where the default resolution used by <code>pdf_convert</code> in R is 72 DPI. If we pass in 150 DPI, what happens?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tesseract)</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pdftools)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">pdf_convert</span>(<span class="at">pdf =</span> <span class="st">"../data/file.pdf"</span>, <span class="at">dpi  =</span> <span class="dv">150</span>, <span class="at">filenames =</span> <span class="st">"../data/file-%d-r-150dpi.%s"</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a><span class="do">## Converting page 1 to ../data/file-1-r-150dpi.png... done!</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "../data/file-1-r-150dpi.png"</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>text <span class="ot">&lt;-</span> <span class="fu">ocr</span>(<span class="st">"../data/file-1-r-150dpi.png"</span>, <span class="at">engine =</span> <span class="fu">tesseract</span>(<span class="st">"eng"</span>))</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a><span class="fu">writeLines</span>(text, <span class="st">"../data/file-1-r-150dpi.txt"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-5-contents" aria-controls="callout-5" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Output Text at 150 DPI
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-5" class="callout-5-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><a href="../data/file-1-r-150dpi.txt">Link to the text file created with R at 150 DPI</a></p>
<div class="cell">
<pre><code>## LANCASTER COUNTY APPRAISAL CARD
## Parcel ID: 10-24-201-025-000 Tax Year: 2025 Run Date: 7/15/2025 12:28:27 PM Page 1 of 2
## EASTDALE RENTALS LLC Date Type Sale Amount Validity Multi Inst.Type Instrument #
## Attn: JEFF &amp; ANITA EASTMAN 05/20/2022 Improved $0 Disqualified Warranty Deed 2022025796
## 2501 $ 74ST 04/23/1996 Improved $37,000 _Disaualified Warranty Deed 1996016959
## LINCOLN, NE 68506 0908/1994 Improved $0 Disqualified Death Certificate 1994045456
## Additional Owners
## No.
## 2250 SHELDON ST Number Issue Date Amount Status Type Description
## LINCOLN, NE 68503
## Prop Class: Residential Improved
## Primary Use: Conversion-Apt
## Livina Units: 2 INSPECTION HISTORY
## vo. slemtial Diet Date Time Process Reason Appraiser Contact-Code
## Zonina: R4-Residential District 07/11/2022 Interview and Measure - 01 General Review MRC Tenant -2
## Noha: 8NCO1 - North Central - 11202015 11:45AM —_No Answer At Door, Exterior - 04 General Review afo
## cvbu 07/15/2010 Field Review - 08 Final Review CAB
## br: 05/04/2010 No Answer At Door, Measured - 05 General Review TMJ
## Tax Unit Grp: 0001 09/17/2008 Field Review - 08 Final Review CAB
## Schl Code Base: 55-0001 Lincoln
## Exemptions: ~ RECENTAPPEALHISTORY = ASSESSEDVALUEHISTORY
## Year Level Case # Status Action Year Land Building Total
## Flaas: 2025 $45,000 $124,700 $169,700
## : 2024 $45,000 $124,700 $169,700
## | Property Factors poe peso Ser) Sjonaoo
## 2022 $25,000 $69,400 $94,400
## GBA: 0 2021 $25,000 $69,400 $94,400
## NRA:
## ponent  APPRAISEDVALUES
## Parkina Type:
## Parkina Quantity: Land Building Total Method
## — = LEGAL DESCRIPTION, Current $45,000 $124,700 $169,700 IDXVAL
## ENGLESIDE ADDITION, BLOCK 2, Lot 23 Prior $45,000 $124,700 $169,700 IDXVAL
## Cost $158,280 Market $332,300 GRM $169,700
## Income $0 MRA $160.100 Ovr
## Method Type ACSFUnits Infl_ Fact! ~—sInf2._—sFact2=—SsInflC_— Fact. ~=— Av Unit Val Land Value
## Site RPI-Primary Interior u 45,000 45,000
## TotalAcres 0.15 GIS SF 6402 Mkt Land Total $45,000
## Taxable Aa Land Total $0</code></pre>
</div>
</div>
</div>
</div>
</div>
<div id="tabset-2-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-3-tab">
<p>If you don’t have the image created, you have to first create an image (<code>imgBlob</code>) for each page, and then run <code>image_to_string</code> on that image. Note that this method does not require that you write the image out to a separate file: the image is only stored in memory. This might be preferable to the bash method, which produces one file for each PDF page and will use up disk space unless you delete the intermediate files at some point after the text extraction is complete.</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-13"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><span id="annotated-cell-13-1"><a href="#annotated-cell-13-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> PIL <span class="im">import</span> Image</span>
<span id="annotated-cell-13-2"><a href="#annotated-cell-13-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pytesseract</span>
<span id="annotated-cell-13-3"><a href="#annotated-cell-13-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pdf2image <span class="im">import</span> convert_from_path</span>
<span id="annotated-cell-13-4"><a href="#annotated-cell-13-4" aria-hidden="true" tabindex="-1"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="1">1</button><span id="annotated-cell-13-5" class="code-annotation-target"><a href="#annotated-cell-13-5" aria-hidden="true" tabindex="-1"></a>pages <span class="op">=</span> convert_from_path(<span class="st">"../data/file.pdf"</span>)</span>
<span id="annotated-cell-13-6"><a href="#annotated-cell-13-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-13-7"><a href="#annotated-cell-13-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> pageNum,imgBlob <span class="kw">in</span> <span class="bu">enumerate</span>(pages): </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="2">2</button><span id="annotated-cell-13-8" class="code-annotation-target"><a href="#annotated-cell-13-8" aria-hidden="true" tabindex="-1"></a>  text <span class="op">=</span> pytesseract.image_to_string(imgBlob, lang<span class="op">=</span><span class="st">'eng'</span>)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-13" data-target-annotation="3">3</button><span id="annotated-cell-13-9" class="code-annotation-target"><a href="#annotated-cell-13-9" aria-hidden="true" tabindex="-1"></a>  <span class="cf">with</span> <span class="bu">open</span>(<span class="ss">f'../data/file-</span><span class="sc">{</span>pageNum<span class="op">+</span><span class="dv">1</span><span class="sc">}</span><span class="ss">-py.txt'</span>, <span class="st">'a'</span>) <span class="im">as</span> the_file:</span>
<span id="annotated-cell-13-10"><a href="#annotated-cell-13-10" aria-hidden="true" tabindex="-1"></a>    the_file.write(text)</span>
<span id="annotated-cell-13-11"><a href="#annotated-cell-13-11" aria-hidden="true" tabindex="-1"></a><span class="co">## 1796</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-13" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-13" data-code-lines="5" data-code-annotation="1">Read in the PDF (by default, uses 200 dpi)</span>
</dd>
<dt data-target-cell="annotated-cell-13" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-13" data-code-lines="8" data-code-annotation="2">Run OCR on each page of the PDF</span>
</dd>
<dt data-target-cell="annotated-cell-13" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-13" data-code-lines="9,10" data-code-annotation="3">Write a file for each page of the PDF containing the text from OCR.</span>
</dd>
</dl>
</div>
</div>
<p>If you already have the image created, it’s simple to get the text out with <code>pytesseract</code>, using <code>Image.open(&lt;file&gt;)</code> instead of <code>convert_from_path()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>pytesseract.image_to_string(Image.<span class="bu">open</span>(<span class="st">'../data/file-1.png'</span>)).split(<span class="st">"</span><span class="ch">\n</span><span class="st">"</span>)[<span class="dv">0</span>:<span class="dv">5</span>] </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="co">## ['Parcel ID: 10-24-201-025-000', '', 'EASTDALE RENTALS LLC', 'Attn: JEFF &amp; ANITA EASTMAN,', '2501 S 74 ST']</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-6-contents" aria-controls="callout-6" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Output Text
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-6" class="callout-6-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p><a href="../data/file-1-py.txt">Link to the text file created with Python</a></p>
<div class="cell">
<pre><code>## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0
## Parcel ID: 10-24-201-025-000
## 
## EASTDALE RENTALS LLC
## Attn: JEFF &amp; ANITA EASTMAN
## 2501S 74ST
## 
## LINCOLN, NE 68506
## 
## Additional Owners
## No.
## 
## 2250 SHELDON ST
## LINCOLN, NE 68503
## 
## Prop Class: Residential Improved
## 
## Primary Use: Conversion-Apt
## 
## Living Units: 2
## 
## Zonina: R4-Residential District
## 
## Nbhd: 8NC01 - North Central -
## CVDU
## 
## Tax Unit Grp: 0001
## 
## Schl Code Base: 55-0001 Lincoln
## 
## Exemptions:
## 
## Flaas:
## 
## GBA: 0
## 
## NRA:
## 
## Location:
## 
## Parking Tvpe:
## 
## Parkina Quantitv:
## 
## ENGLESIDE ADDITION, BLOCK 2, Lot 23
## 
## LANCASTER COUNTY APPRAISAL CARD
## Tax Year: 2025
## 
## Date Type Sale Amount Validity
## 
## 05/20/2022 Improved $0 Disqualified
## 04/23/1996 Improved $37,000 Disaualified
## 09/08/1994 Improved $0 Disqualified
## 
## Number Issue Date
## 
## Date Time Process
## 
## 07/11/2022 Interview and Measure - 01
## 11/20/2015 11:45 AM No Answer At Door, Exterior - 04
## 07/15/2010 Field Review - 08
## 
## 05/04/2010 No Answer At Door, Measured - 05
## 09/17/2008 Field Review - 08
## 
## Case # Status Action
## 
## Amount _ Status Type
## 
## Run Date: 7/15/2025 12:23:27 PM
## 
## Description
## 
## Reason
## General Review
## General Review
## Final Review
## General Review
## Final Review
## 
## Current
## Prior
## Cost
## 
## Income
## 
## Page 1 of 2
## 
## Multi Inst.Type Instrument #
## Warranty Deed 2022025796
## Warranty Deed 1996016959
## Death Certificate 1994045456
## 
## Appraiser Contact-Code
## MRC Tenant - 2
## 
## afo
## 
## CAB
## 
## TMJ
## 
## CAB
## 
## Land Buildina Total
## $45,000 $124,700 $169,700
## $45,000 $124,700 $169,700
## $45,000 $115,700 $160,700
## $25,000 $69.400 $94,400
## $25,000 $69.400 $94,400
## 
## Land Buildina Total Method
## $45,000 $124,700 $169,700 IDXVAL
## $45.000 $124,700 $169,700 IDXVAL
## 
## $158,280 Market $332,300 GRM $169,700
## $0 MRA $160,100 Ovr
## 
## Method Type
## Site RPI-Primary Interior
## 
## Total Acres 0.15 GIS SF 6402
## 
## ACSF Units Inf1 Fact1
## 
## Inf2 Fact2
## 
## InflC FactC Land Value
## 
## 45,000
## 
## Avg Unit Val
## 45,000
## 
## Mkt Land Total $45,000
## Taxable Aq Land Total $0</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<section id="assessment-of-ocr-methods" class="level5 unnumbered">
<h5 class="unnumbered anchored" data-anchor-id="assessment-of-ocr-methods">Assessment of OCR Methods</h5>
<p>What is interesting is that even when controlling the DPI, the OCR programs in each language generate different text files. Bash and python are fairly similar, but R’s text file is ordered by horizontal lines, not columns. It seems likely that we could probably fix the issue if we got the right set of options, but a more straightforward option might be to crop the images into separate chunks for each table and section. That might produce cleaner and more interpretable OCR’d images. If we wanted to process many of these files and ingest the information into a database, then we would need to ensure that we could determine how to crop the images</p>
</section>
</div>
</div>
<p>In many cases, we don’t want to deal with only a text file - we want the context of the image, but we’d like to be able to see the text, use Ctrl/Cmd-F to find the right page, and copy the text back out of the file.</p>
<p>Consider <a href="../data/hamlet-shakespeare.pdf">Hamlet</a>, which I downloaded from <a href="https://ia801907.us.archive.org/1/items/hamletby00shakuoft/hamletby00shakuoft.pdf">The Internet Archive</a> - it has the original text, but it also has a text layer that allows you to search through the document and find, for instance, the 11 instances of the word “skull”, four of which are on page 82. In general, the text layer is either not displayed, or, more commonly, situated behind the image layer, allowing the reader to access the words without showing the text over top of the image. How are these hybrid PDF documents created?</p>
<div class="callout callout-style-default callout-demo callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Demo: Creating Hybrid PDFs
</div>
</div>
<div class="callout-body-container callout-body">
<p>When I need OCR and don’t necessarily want to bother with R, I prefer to use a program called <a href="https://github.com/ocrmypdf/OCRmyPDF"><code>ocrmypdf</code></a> that is based on tesseract and available for most distributions. I started using <code>ocrmypdf</code> before I realized that it’s actually a python package that can just be called from the Linux command line. In any case, it’s possible to use this command within R or Python, but once you have the python package installed and the binary in your system path, it’s just as easy to use the program from the terminal – everything else is just overhead.</p>
<p>Let’s OCR the Lancaster county, NE home appraisal image PDF and see what we come up with.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="ex">ocrmypdf</span> <span class="at">-l</span> eng ../data/file.pdf ../data/file-ocrmypdf.pdf</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>The output of <code>ocrmypdf</code> is a <a href="../data/file-ocrmypdf.pdf">hybrid PDF</a> that has the text and image data superimposed (the text is not visible until you highlight it).</p>
</div>
</div>
</section>
</section>
<section id="working-with-pdfs-programmatically" class="level2 page-columns page-full" data-number="34.3">
<h2 data-number="34.3" class="anchored" data-anchor-id="working-with-pdfs-programmatically"><span class="header-section-number">34.3</span> Working with PDFs Programmatically</h2>
<section id="reading-text-from-raster-based-pdfs-with-ocr" class="level3 page-columns page-full" data-number="34.3.1">
<h3 data-number="34.3.1" class="anchored" data-anchor-id="reading-text-from-raster-based-pdfs-with-ocr"><span class="header-section-number">34.3.1</span> Reading Text from Raster-based PDFs with OCR</h3>
<p>In many real-world situations, we may not need to read tabular data out of a PDF. For instance, Google’s <a href="https://support.google.com/websearch/answer/9690276?hl=en">Library Project</a> scanned millions of books, allowing them to show <a href="https://books.google.com/ngrams/graph?content=delved&amp;year_start=1800&amp;year_end=2022&amp;corpus=en&amp;smoothing=3&amp;case_insensitive=false">the frequency of a word’s use over time</a>. This wouldn’t be possible without a very good OCR library (which is one reason Google took over <code>tesseract</code> when IBM open-sourced it).</p>
<p>The primary challenges when the goal is reading in text from an OCR’d PDF are:</p>
<ol type="1">
<li>If documents are the result of lower-quality scans, noise removal, background removal, and brightness/contrast adjustments may be necessary before the OCR step.</li>
<li>Ensuring word order is maintained across lines</li>
<li>Removing page numbers and header/footer information</li>
</ol>
<section id="extended-example-trial-transcripts" class="level4 page-columns page-full" data-number="34.3.1.1">
<h4 data-number="34.3.1.1" class="anchored" data-anchor-id="extended-example-trial-transcripts"><span class="header-section-number">34.3.1.1</span> Extended Example: Trial Transcripts</h4>
<p>Let’s start out with a relatively simple case, based on a real problem I tried to tackle in 2022. We have a number of court trial transcripts, and we want to systematically search for certain phrases to determine how common they are<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>. We’ll ignore, for now, the problem of actually understanding what the words are saying and classifying that properly (that would require language or topic modeling), and focus on the problem of even getting the trial transcripts converted into plain text in a format which is readable.</p>
<p>The first step will be to run OCR on the <a href="../data/legal-transcript-trial_-_day_1.pdf">first day’s trial transcript</a>. I acquired these transcripts from a <a href="https://www.millerandzois.com/professional-attorney-information-center/sample-trial-documents/sample-trial-transcripts/">professional attorney information site</a> for demonstration purposes, as the transcripts I was working with were confidential.</p>
<p>I will show code for running OCR on all pages of the file, but it doesn’t make sense to actually run that code yet – there is always some tweaking to be done, so I usually will run 1 page, and then 5 pages, and then 10, and then the full set, optimizing the code as I go.</p>
<div class="callout callout-style-default callout-demo callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Step 1: Testing OCR of full page(s)
</div>
</div>
<div class="callout-body-container callout-body">
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Bash</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-17"><pre class="sourceCode bash code-annotation-code code-with-copy code-annotated"><code class="sourceCode bash"><span id="annotated-cell-17-1"><a href="#annotated-cell-17-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="annotated-cell-17-2"><a href="#annotated-cell-17-2" aria-hidden="true" tabindex="-1"></a><span class="va">pdf</span><span class="op">=</span><span class="st">"../data/legal-transcript-trial_-_day_1.pdf"</span></span>
<span id="annotated-cell-17-3"><a href="#annotated-cell-17-3" aria-hidden="true" tabindex="-1"></a><span class="va">path</span><span class="op">=</span><span class="st">"../data/legal-transcript-trial-day-1"</span></span>
<span id="annotated-cell-17-4"><a href="#annotated-cell-17-4" aria-hidden="true" tabindex="-1"></a><span class="fu">mkdir</span> <span class="at">-p</span> <span class="va">$path</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-17" data-target-annotation="1">1</button><span id="annotated-cell-17-5" class="code-annotation-target"><a href="#annotated-cell-17-5" aria-hidden="true" tabindex="-1"></a><span class="ex">pdftoppm</span> <span class="at">-png</span> <span class="at">-r</span> 300 <span class="st">"</span><span class="va">$pdf</span><span class="st">"</span> <span class="st">"</span><span class="va">$path</span><span class="st">/page"</span></span>
<span id="annotated-cell-17-6"><a href="#annotated-cell-17-6" aria-hidden="true" tabindex="-1"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-17" data-target-annotation="2">2</button><span id="annotated-cell-17-7" class="code-annotation-target"><a href="#annotated-cell-17-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> file <span class="kw">in</span> <span class="st">"</span><span class="va">$path</span><span class="st">/*.png"</span></span>
<span id="annotated-cell-17-8"><a href="#annotated-cell-17-8" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-17" data-target-annotation="3">3</button><span id="annotated-cell-17-9" class="code-annotation-target"><a href="#annotated-cell-17-9" aria-hidden="true" tabindex="-1"></a>  <span class="ex">tesseract</span>  <span class="at">-l</span> eng <span class="va">$file</span> <span class="st">"</span><span class="va">${file</span><span class="op">%</span>.<span class="pp">*</span><span class="va">}</span><span class="st">-bash"</span><span class="kw">;</span></span>
<span id="annotated-cell-17-10"><a href="#annotated-cell-17-10" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span>
<span id="annotated-cell-17-11"><a href="#annotated-cell-17-11" aria-hidden="true" tabindex="-1"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-17" data-target-annotation="4">4</button><span id="annotated-cell-17-12" class="code-annotation-target"><a href="#annotated-cell-17-12" aria-hidden="true" tabindex="-1"></a><span class="ex">tesseract</span>  <span class="at">-l</span> eng <span class="st">"</span><span class="va">$path</span><span class="st">/page-001.png"</span> <span class="st">"</span><span class="va">$path</span><span class="st">/page-001-bash"</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-17" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-17" data-code-lines="5" data-code-annotation="1">Convert each page to a separate PNG. The <code>\</code> character allows extending the command over multiple lines for readability</span>
</dd>
<dt data-target-cell="annotated-cell-17" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-17" data-code-lines="7" data-code-annotation="2">Iterate over the PNGs (commented out because there’s no point in doing it multiple times at the moment)</span>
</dd>
<dt data-target-cell="annotated-cell-17" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-17" data-code-lines="9" data-code-annotation="3">Convert each PNG to a corresponding text file, removing the extension and adding <code>-text</code> to the end of the file name (tesseract will add the <code>.txt</code> extension). <code>${file%.*}</code> is a bash convention to remove the file extension, and adding <code>-text</code> at the end ensures that we have a valid file name.</span>
</dd>
<dt data-target-cell="annotated-cell-17" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-17" data-code-lines="12" data-code-annotation="4">This is the single-file version of the command in the for loop - the biggest difference being that we specify the input and output file name instead of using <code>$file</code> placeholders.</span>
</dd>
</dl>
</div>
</div>
<p>We could speed this up using <code>gnu parallel</code> if we wanted to do so - see <a href="https://stackoverflow.com/questions/18916500/parallelize-nested-for-loop-in-gnu-parallel">this script</a> for an example of what that would look like.</p>
<p>Any further cleaning work should <em>probably</em> be done in some other language (we could go through the use of <code>awk</code> and <code>sed</code> here, but that’s probably beyond the scope of this book).</p>
<div class="callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>tesseract</code> file output
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> ../data/legal-transcript-trial-day-1/page-001-bash.txt</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">## e ® COPY</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">## CIRCUIT COURT FOR FREDERICK COUNTY</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co">## COURT HOUSE</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co">## FREDERICK, MARYLAND 21701</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 24</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co">## 29</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co">## IN THE CIRCUIT COURT FOR FREDERICK COUNTY, MARYLAND</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="co">## EXLINE-HASSLER</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="co">## Plaintiff</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="co">## Vv. Civil Docket</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="co">## No. 10-C-12-000410</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="co">## PENN NATIONAL INSURANCE, ET AL.,</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="co">## Defendant</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="co">## OFFICIAL TRANSCRIPT OF PROCEEDINGS</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a><span class="co">## (JURY TRIAL - DAY ONE)</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a><span class="co">## Frederick, Maryland</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a><span class="co">## January 22, 2013</span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a><span class="co">## BEFORE:</span></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a><span class="co">## THE HONORABLE JULIE S. SOLT, JUDGE</span></span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a><span class="co">## APPEARANCES :</span></span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a><span class="co">## For the Plaintiff:</span></span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a><span class="co">## LAURA C. ZOIS, ESQUIRE</span></span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a><span class="co">## JOHN B. BRATT, ESQUIRE</span></span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a><span class="co">## For the Defendant:</span></span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a><span class="co">## WALTER E. GILLCRIST, JR., ESQUIRE</span></span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a><span class="co">## ANNE K. HOWARD, ESQUIRE</span></span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a><span class="co">## For Penn National Insurance, et al.:</span></span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a><span class="co">## GUIDO PORCARELLI, ESQUIRE</span></span>
<span id="cb11-46"><a href="#cb11-46" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb11-47"><a href="#cb11-47" aria-hidden="true" tabindex="-1"></a><span class="co">## TRANSCRIBED BY:</span></span>
<span id="cb11-48"><a href="#cb11-48" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb11-49"><a href="#cb11-49" aria-hidden="true" tabindex="-1"></a><span class="co">## Victoria Eastridge</span></span>
<span id="cb11-50"><a href="#cb11-50" aria-hidden="true" tabindex="-1"></a><span class="co">## Official Transcriber</span></span>
<span id="cb11-51"><a href="#cb11-51" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb11-52"><a href="#cb11-52" aria-hidden="true" tabindex="-1"></a><span class="co">## 100 W. Patrick Street</span></span>
<span id="cb11-53"><a href="#cb11-53" aria-hidden="true" tabindex="-1"></a><span class="co">## Frederick, Maryland 21701</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-19"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-19-1"><a href="#annotated-cell-19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tesseract)</span>
<span id="annotated-cell-19-2"><a href="#annotated-cell-19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pdftools)</span>
<span id="annotated-cell-19-3"><a href="#annotated-cell-19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="annotated-cell-19-4"><a href="#annotated-cell-19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-19" data-target-annotation="1">1</button><span id="annotated-cell-19-5" class="code-annotation-target"><a href="#annotated-cell-19-5" aria-hidden="true" tabindex="-1"></a><span class="co"># pdf_convert(</span></span>
<span id="annotated-cell-19-6"><a href="#annotated-cell-19-6" aria-hidden="true" tabindex="-1"></a><span class="co">#   pdf = "../data/legal-transcript-trial_-_day_1.pdf",</span></span>
<span id="annotated-cell-19-7"><a href="#annotated-cell-19-7" aria-hidden="true" tabindex="-1"></a><span class="co">#   filenames = "../data/legal-transcript-trial-day-1/page-%03d.%s",</span></span>
<span id="annotated-cell-19-8"><a href="#annotated-cell-19-8" aria-hidden="true" tabindex="-1"></a><span class="co">#   dpi = 300)</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-19" data-target-annotation="2">2</button><span id="annotated-cell-19-9" class="code-annotation-target"><a href="#annotated-cell-19-9" aria-hidden="true" tabindex="-1"></a>png_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">"../data/legal-transcript-trial-day-1/"</span>,</span>
<span id="annotated-cell-19-10"><a href="#annotated-cell-19-10" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"png$"</span>, <span class="at">full.names =</span> T)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-19" data-target-annotation="3">3</button><span id="annotated-cell-19-11" class="code-annotation-target"><a href="#annotated-cell-19-11" aria-hidden="true" tabindex="-1"></a><span class="co"># text &lt;- map_chr(png_files, ~ocr(., engine = tesseract("eng")))</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-19" data-target-annotation="4">4</button><span id="annotated-cell-19-12" class="code-annotation-target"><a href="#annotated-cell-19-12" aria-hidden="true" tabindex="-1"></a>text1 <span class="ot">&lt;-</span> <span class="fu">ocr</span>(png_files[<span class="dv">1</span>], <span class="at">engine =</span> <span class="fu">tesseract</span>(<span class="st">"eng"</span>))</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-19" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-19" data-code-lines="5,6,7,8" data-code-annotation="1">Convert PDF pages to PNGs using R</span>
</dd>
<dt data-target-cell="annotated-cell-19" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-19" data-code-lines="9,10" data-code-annotation="2">List out all png files in the folder</span>
</dd>
<dt data-target-cell="annotated-cell-19" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-19" data-code-lines="11" data-code-annotation="3">OCR each PNG file and return the text in a character vector (all files)</span>
</dd>
<dt data-target-cell="annotated-cell-19" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-19" data-code-lines="12" data-code-annotation="4">OCR the first PNG and return the text</span>
</dd>
</dl>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>text1[[<span class="dv">1</span>]]</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] "IN THE CIRCUIT COURT FOR FREDERICK COUNTY, MARYLAND\nEXLINE-HASSLER\nPlaintiff a\nVv. Civil Docket\nNo. 10-C-12-000410\nPENN NATIONAL INSURANCE, ET AL.,\n: Defendant\nOFFICIAL TRANSCRIPT OF PROCEEDINGS\n(JURY TRIAL - DAY ONE)\nFrederick, Maryland\nJanuary 22, 2013\nBEFORE: . .\nTHE HONORABLE JULIE S. SOLT, JUDGE\nAPPEARANCES:\n| For the Plaintiff:\n| LAURA C. ZOIS, ESQUIRE\nJOHN B. BRATT, ESQUIRE\n) For the Defendant:\nWALTER E. GILLCRIST, JR., ESQUIRE\nANNE K. HOWARD, ESQUIRE\n| For Penn National Insurance, et al.: |\n/ GUIDO PORCARELLI, ESQUIRE\n,\n3 TRANSCRIBED BY:\nVictoria Eastridge\ni Official Transcriber\n. 100 W. Patrick Street\n&gt; Frederick, Maryland 21701\n"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-10-contents" aria-controls="callout-10" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
R tesseract file output
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-10" class="callout-10-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>text1[[<span class="dv">1</span>]] <span class="sc">|&gt;</span> </span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, <span class="at">simplify =</span> F) <span class="sc">|&gt;</span> <span class="fu">unlist</span>()</span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] "IN THE CIRCUIT COURT FOR FREDERICK COUNTY, MARYLAND"</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  [2] "EXLINE-HASSLER"                                     </span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  [3] "Plaintiff a"                                        </span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  [4] "Vv. Civil Docket"                                   </span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  [5] "No. 10-C-12-000410"                                 </span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  [6] "PENN NATIONAL INSURANCE, ET AL.,"                   </span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  [7] ": Defendant"                                        </span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  [8] "OFFICIAL TRANSCRIPT OF PROCEEDINGS"                 </span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  [9] "(JURY TRIAL - DAY ONE)"                             </span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [10] "Frederick, Maryland"                                </span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [11] "January 22, 2013"                                   </span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [12] "BEFORE: . ."                                        </span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a><span class="do">## [13] "THE HONORABLE JULIE S. SOLT, JUDGE"                 </span></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="do">## [14] "APPEARANCES:"                                       </span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a><span class="do">## [15] "| For the Plaintiff:"                               </span></span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="do">## [16] "| LAURA C. ZOIS, ESQUIRE"                           </span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="do">## [17] "JOHN B. BRATT, ESQUIRE"                             </span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a><span class="do">## [18] ") For the Defendant:"                               </span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="do">## [19] "WALTER E. GILLCRIST, JR., ESQUIRE"                  </span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="do">## [20] "ANNE K. HOWARD, ESQUIRE"                            </span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a><span class="do">## [21] "| For Penn National Insurance, et al.: |"           </span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a><span class="do">## [22] "/ GUIDO PORCARELLI, ESQUIRE"                        </span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a><span class="do">## [23] ","                                                  </span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a><span class="do">## [24] "3 TRANSCRIBED BY:"                                  </span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a><span class="do">## [25] "Victoria Eastridge"                                 </span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a><span class="do">## [26] "i Official Transcriber"                             </span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a><span class="do">## [27] ". 100 W. Patrick Street"                            </span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a><span class="do">## [28] "&gt; Frederick, Maryland 21701"                        </span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a><span class="do">## [29] ""</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p>R seems to read in the characters closer to the left side of the page, like the gutter notes and the line numbers, where <code>tesseract</code> via bash did not.</p>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-22"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><span id="annotated-cell-22-1"><a href="#annotated-cell-22-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> PIL <span class="im">import</span> Image</span>
<span id="annotated-cell-22-2"><a href="#annotated-cell-22-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pytesseract</span>
<span id="annotated-cell-22-3"><a href="#annotated-cell-22-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pdf2image <span class="im">import</span> convert_from_path</span>
<span id="annotated-cell-22-4"><a href="#annotated-cell-22-4" aria-hidden="true" tabindex="-1"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-22" data-target-annotation="1">1</button><span id="annotated-cell-22-5" class="code-annotation-target"><a href="#annotated-cell-22-5" aria-hidden="true" tabindex="-1"></a><span class="co">#pages = convert_from_path("../data/legal-transcript-trial_-_day_1.pdf", dpi = 300)</span></span>
<span id="annotated-cell-22-6"><a href="#annotated-cell-22-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-22-7"><a href="#annotated-cell-22-7" aria-hidden="true" tabindex="-1"></a>pages <span class="op">=</span> convert_from_path(<span class="st">"../data/legal-transcript-trial_-_day_1.pdf"</span>, </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-22" data-target-annotation="2">2</button><span id="annotated-cell-22-8" class="code-annotation-target"><a href="#annotated-cell-22-8" aria-hidden="true" tabindex="-1"></a>                          dpi <span class="op">=</span> <span class="dv">300</span>, first_page<span class="op">=</span><span class="dv">1</span>, last_page<span class="op">=</span><span class="dv">1</span>)</span>
<span id="annotated-cell-22-9"><a href="#annotated-cell-22-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-22-10"><a href="#annotated-cell-22-10" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> pageNum,imgBlob <span class="kw">in</span> <span class="bu">enumerate</span>(pages):</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-22" data-target-annotation="3">3</button><span id="annotated-cell-22-11" class="code-annotation-target"><a href="#annotated-cell-22-11" aria-hidden="true" tabindex="-1"></a>  text <span class="op">=</span> pytesseract.image_to_string(imgBlob, lang<span class="op">=</span><span class="st">'eng'</span>)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-22" data-target-annotation="4">4</button><span id="annotated-cell-22-12" class="code-annotation-target"><a href="#annotated-cell-22-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">with</span> <span class="bu">open</span>(<span class="ss">f'../data/legal-transcript-trial-day-1/page-</span><span class="sc">{</span>pageNum<span class="op">+</span><span class="dv">1</span><span class="sc">:03}</span><span class="ss">-py.txt'</span>, <span class="st">'w'</span>) <span class="im">as</span> the_file:</span>
<span id="annotated-cell-22-13"><a href="#annotated-cell-22-13" aria-hidden="true" tabindex="-1"></a>    the_file.write(text)</span>
<span id="annotated-cell-22-14"><a href="#annotated-cell-22-14" aria-hidden="true" tabindex="-1"></a><span class="co">## 708</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-22" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-22" data-code-lines="5" data-code-annotation="1">Convert all pages to images (held in memory, not saved to a file)</span>
</dd>
<dt data-target-cell="annotated-cell-22" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-22" data-code-lines="8" data-code-annotation="2">Convert only the first page to an image in memory</span>
</dd>
<dt data-target-cell="annotated-cell-22" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-22" data-code-lines="11" data-code-annotation="3">OCR the image</span>
</dd>
<dt data-target-cell="annotated-cell-22" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-22" data-code-lines="12,13" data-code-annotation="4">Save the text to a file. <code>{pageNum+1:03}-py.txt</code> is a way to specify the output filename - since Python is 0-indexed, we need to add 1 to the page number index to get the actual page number of the PDF (since we don’t count pages from 0, normally). The <code>:03</code> component is saying that the number should be formatted as an integer with 3 digits, and the front should be padded with 0s, so <code>1</code> becomes <code>001</code>, <code>10</code> becomes <code>010</code>, and so on. The f at the front of the string indicates that this is an <a href="https://docs.python.org/3/reference/lexical_analysis.html#f-strings">f-string</a> – a formatted string literal.</span>
</dd>
</dl>
</div>
</div>
<div class="callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-11-contents" aria-controls="callout-11" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Python tesseract file output
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-11" class="callout-11-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="co">#!/bin/bash</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> ../data/legal-transcript-trial-day-1/page-001-py.txt</span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="co">## CIRCUIT COURT FOR FREDERICK COUNTY</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a><span class="co">## COURT HOUSE</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co">## FREDERICK, MARYLAND 21701</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a><span class="co">## IN THE CIRCUIT COURT FOR FREDERICK COUNTY, MARYLAND</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb14-10"><a href="#cb14-10" aria-hidden="true" tabindex="-1"></a><span class="co">## EXLINE-HASSLER</span></span>
<span id="cb14-11"><a href="#cb14-11" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb14-12"><a href="#cb14-12" aria-hidden="true" tabindex="-1"></a><span class="co">## Plaintiff</span></span>
<span id="cb14-13"><a href="#cb14-13" aria-hidden="true" tabindex="-1"></a><span class="co">## Vv. Civil Docket</span></span>
<span id="cb14-14"><a href="#cb14-14" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb14-15"><a href="#cb14-15" aria-hidden="true" tabindex="-1"></a><span class="co">## No. 10-C-12-000410</span></span>
<span id="cb14-16"><a href="#cb14-16" aria-hidden="true" tabindex="-1"></a><span class="co">## PENN NATIONAL INSURANCE, ET AL.,</span></span>
<span id="cb14-17"><a href="#cb14-17" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb14-18"><a href="#cb14-18" aria-hidden="true" tabindex="-1"></a><span class="co">## Defendant</span></span>
<span id="cb14-19"><a href="#cb14-19" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb14-20"><a href="#cb14-20" aria-hidden="true" tabindex="-1"></a><span class="co">## OFFICIAL TRANSCRIPT OF PROCEEDINGS</span></span>
<span id="cb14-21"><a href="#cb14-21" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb14-22"><a href="#cb14-22" aria-hidden="true" tabindex="-1"></a><span class="co">## (JURY TRIAL - DAY ONE)</span></span>
<span id="cb14-23"><a href="#cb14-23" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb14-24"><a href="#cb14-24" aria-hidden="true" tabindex="-1"></a><span class="co">## Frederick, Maryland</span></span>
<span id="cb14-25"><a href="#cb14-25" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb14-26"><a href="#cb14-26" aria-hidden="true" tabindex="-1"></a><span class="co">## January 22, 2013</span></span>
<span id="cb14-27"><a href="#cb14-27" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb14-28"><a href="#cb14-28" aria-hidden="true" tabindex="-1"></a><span class="co">## BEFORE:</span></span>
<span id="cb14-29"><a href="#cb14-29" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb14-30"><a href="#cb14-30" aria-hidden="true" tabindex="-1"></a><span class="co">## THE HONORABLE JULIE S. SOLT, JUDGE</span></span>
<span id="cb14-31"><a href="#cb14-31" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb14-32"><a href="#cb14-32" aria-hidden="true" tabindex="-1"></a><span class="co">## APPEARANCES :</span></span>
<span id="cb14-33"><a href="#cb14-33" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb14-34"><a href="#cb14-34" aria-hidden="true" tabindex="-1"></a><span class="co">## For the Plaintiff:</span></span>
<span id="cb14-35"><a href="#cb14-35" aria-hidden="true" tabindex="-1"></a><span class="co">## LAURA C. ZOIS, ESQUIRE</span></span>
<span id="cb14-36"><a href="#cb14-36" aria-hidden="true" tabindex="-1"></a><span class="co">## JOHN B. BRATT, ESQUIRE</span></span>
<span id="cb14-37"><a href="#cb14-37" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb14-38"><a href="#cb14-38" aria-hidden="true" tabindex="-1"></a><span class="co">## For the Defendant:</span></span>
<span id="cb14-39"><a href="#cb14-39" aria-hidden="true" tabindex="-1"></a><span class="co">## WALTER E. GILLCRIST, JR., ESQUIRE</span></span>
<span id="cb14-40"><a href="#cb14-40" aria-hidden="true" tabindex="-1"></a><span class="co">## ANNE K. HOWARD, ESQUIRE</span></span>
<span id="cb14-41"><a href="#cb14-41" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb14-42"><a href="#cb14-42" aria-hidden="true" tabindex="-1"></a><span class="co">## For Penn National Insurance, et al.:</span></span>
<span id="cb14-43"><a href="#cb14-43" aria-hidden="true" tabindex="-1"></a><span class="co">## GUIDO PORCARELLI, ESQUIRE</span></span>
<span id="cb14-44"><a href="#cb14-44" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb14-45"><a href="#cb14-45" aria-hidden="true" tabindex="-1"></a><span class="co">## TRANSCRIBED BY:</span></span>
<span id="cb14-46"><a href="#cb14-46" aria-hidden="true" tabindex="-1"></a><span class="co">## Victoria Eastridge</span></span>
<span id="cb14-47"><a href="#cb14-47" aria-hidden="true" tabindex="-1"></a><span class="co">## Official Transcriber</span></span>
<span id="cb14-48"><a href="#cb14-48" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb14-49"><a href="#cb14-49" aria-hidden="true" tabindex="-1"></a><span class="co">## 100 W. Patrick Street</span></span>
<span id="cb14-50"><a href="#cb14-50" aria-hidden="true" tabindex="-1"></a><span class="co">## Frederick, Maryland 21701</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p>The <code>python</code> generated file looks pretty dang perfect to me, which is cool.</p>
</div>
</div>
</div>
</div>
</div>
<p>It’s always preferable to refine your methods before running them on the whole vector, which is why I only OCR’d the first file. Looking at the text produced by bash and R (but not python!), it’s clear that we’ll need to do some cleaning. If possible, we’d like to get line numbers out as a column, but if not, we would at least like to remove them from the text. There is no way to do this without at least looking at the PDF or PNG files; if we want to do a really good job, we’ll need to manually clean each page (ugh).</p>
<section id="step-2-cropping" class="level5 unnumbered page-columns page-full">
<h5 class="unnumbered anchored" data-anchor-id="step-2-cropping">Step 2: Cropping</h5>
<p>We could reduce this work a bit if we could automatically recognize the vertical-ish lines separating the transcript content from the line numbers, but even doing that automatically is tricky and would likely involve line detection, rotation, and cropping for each image.</p>
<p>However, it might be easy enough to make an educated guess, as this PDF is actually a “best case” OCR scenario. The pages don’t have a ton of dust, copy artifacts, etc., so if we can crop off the top, bottom, and left margins, we’d probably get cleaner data. In addition, the pages aren’t that skewed and are mostly in the same alignment – we might be able to get away with specifying a crop boundary for all pages.</p>
<p>I could figure out how to crop images in R or python, but honestly, I think the easiest way to do this is just to use the command line. I encourage you to search for how to do <code>&lt;task&gt;</code> for a folder of files on the command line, because no one remembers the syntax for this stuff unless they’re doing it all the time. I consulted <a href="https://superuser.com/questions/1161340/how-to-crop-an-image-using-imagemagick-from-the-command-line">this page</a> and <a href="https://stackoverflow.com/questions/31104371/cropping-images-with-loop-in-imagemagick">this page</a> and eventually pieced something together. The <code>$(echo $f | sed 's/\.png/-crop.png/')</code> is probably not the most elegant way to rename the output files but it works (which the other methods I tried did not). This requires that <code>imagemagick</code> is installed and on the system path.</p>
<p>Then, we have to figure out how much to crop. Imagemagick’s <code>convert</code> command uses an argument string of <code>&lt;Width&gt;x&lt;Height&gt;+OffsetX+OffsetY</code>. I opened a few files up in an image viewing program that had a crop function and drew some rectangles to see how different cropping arguments would work, as in <a href="#fig-legal-pdf-crop-args" class="quarto-xref">Figure&nbsp;<span>34.5</span></a>.</p>

<div class="no-row-height column-margin column-container"><div class="">
<div id="fig-legal-pdf-crop-args" class="lightbox quarto-float quarto-figure quarto-figure-center anchored" alt="A screenshot of a page of a PDF as a PNG in an image viewer program, with a crop box shown. Arguments Width, Height, Offset X, and Offset Y, are shown at the bottom of the window.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-legal-pdf-crop-args-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="../images/advanced/legal-crop-rectangle-test.png" class="lightbox" data-gallery="quarto-lightbox-gallery-7" title="Figure&nbsp;34.5: Image viewing programs can help you determine what crop arguments should be used in the convert command."><img src="../images/advanced/legal-crop-rectangle-test.png" class="img-fluid figure-img" alt="A screenshot of a page of a PDF as a PNG in an image viewer program, with a crop box shown. Arguments Width, Height, Offset X, and Offset Y, are shown at the bottom of the window."></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-legal-pdf-crop-args-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;34.5: Image viewing programs can help you determine what crop arguments should be used in the <code>convert</code> command.
</figcaption>
</figure>
</div>
<div id="fig-legal-pdf-crop-results" class="lightbox quarto-float quarto-figure quarto-figure-center anchored" alt="An animation showing flipping through all of the cropped pages of the PDF, looking for problems">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-legal-pdf-crop-results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="../images/advanced/legal-cropping-test-flip-through.gif" class="lightbox" data-gallery="quarto-lightbox-gallery-8" title="Figure&nbsp;34.6: After the convert command is run, it can be helpful to quickly page through all of the images looking for potential problems, such as the rotated pages at index 239-240, where the page numbers have not been fully removed. These pages may need extra attention, or an automated rotation algorithm to be applied before cropping."><img src="../images/advanced/legal-cropping-test-flip-through.gif" class="img-fluid figure-img" alt="An animation showing flipping through all of the cropped pages of the PDF, looking for problems"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-legal-pdf-crop-results-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;34.6: After the <code>convert</code> command is run, it can be helpful to quickly page through all of the images looking for potential problems, such as the rotated pages at index 239-240, where the page numbers have not been fully removed. These pages may need extra attention, or an automated rotation algorithm to be applied before cropping.
</figcaption>
</figure>
</div>
</div></div><div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-1"><pre class="sourceCode bash code-annotation-code code-with-copy code-annotated"><code class="sourceCode bash"><button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="1">1</button><span id="annotated-cell-1-1" class="code-annotation-target"><a href="#annotated-cell-1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span> ../data/legal-transcript-trial-day-1/<span class="pp">*</span>-crop.png</span>
<span id="annotated-cell-1-2"><a href="#annotated-cell-1-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> f <span class="kw">in</span> ../data/legal-transcript-trial-day-1/<span class="pp">*</span>.png<span class="kw">;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-1" data-target-annotation="2">2</button><span id="annotated-cell-1-3" class="code-annotation-target"><a href="#annotated-cell-1-3" aria-hidden="true" tabindex="-1"></a>  <span class="cf">do</span> <span class="ex">convert</span> <span class="at">-crop</span> 2000x2700+450+300 +repage <span class="st">"</span><span class="va">$f</span><span class="st">"</span> <span class="va">$(</span><span class="bu">echo</span> <span class="va">$f</span> <span class="kw">|</span> <span class="fu">sed</span> <span class="st">'s/\.png/-crop.png/'</span><span class="va">)</span><span class="kw">;</span></span>
<span id="annotated-cell-1-4"><a href="#annotated-cell-1-4" aria-hidden="true" tabindex="-1"></a><span class="cf">done</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-1" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="1" data-code-annotation="1">Removing previously cropped files prevents cropping <code>*-crop.png</code> files to get <code>*-crop-crop.png</code> files and accumulating ridiculous numbers of files.</span>
</dd>
<dt data-target-cell="annotated-cell-1" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-1" data-code-lines="3" data-code-annotation="2">Crop the page to a 2000 width, 2700 height page, starting (from the top left) at x=450, y = 300. The <code>repage</code> argument resets the coordinates of the PNG so that the canvas doesn’t have the original size. <code>$(echo $f | sed 's/\.png/-crop.png/')</code> renames the output file to have <code>-crop.png</code> at the end… more challenging than expected.</span>
</dd>
</dl>
</div>
</div>
<p>Once the conversion command has run, it can be helpful to page through the cropped files looking for problems, and rerun the crop command if problems are identified, as in <a href="#fig-legal-pdf-crop-results" class="quarto-xref">Figure&nbsp;<span>34.6</span></a>.</p>
<p>Then, we re-run the OCR process on the cropped files.</p>
<div class="callout callout-style-default callout-demo callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Step 3: OCR on cropped images
</div>
</div>
<div class="callout-body-container callout-body">
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Bash</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-24"><pre class="sourceCode bash code-annotation-code code-with-copy code-annotated"><code class="sourceCode bash"><button class="code-annotation-anchor" data-target-cell="annotated-cell-24" data-target-annotation="1">1</button><span id="annotated-cell-24-1" class="code-annotation-target"><a href="#annotated-cell-24-1" aria-hidden="true" tabindex="-1"></a><span class="co"># for file in ../data/legal-transcript-trial-day-1/*-crop.png</span></span>
<span id="annotated-cell-24-2"><a href="#annotated-cell-24-2" aria-hidden="true" tabindex="-1"></a><span class="co"># do</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-24" data-target-annotation="2">2</button><span id="annotated-cell-24-3" class="code-annotation-target"><a href="#annotated-cell-24-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   tesseract  -l eng $file "${file%.*}-bash"</span></span>
<span id="annotated-cell-24-4"><a href="#annotated-cell-24-4" aria-hidden="true" tabindex="-1"></a><span class="co"># done</span></span>
<span id="annotated-cell-24-5"><a href="#annotated-cell-24-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-24-6"><a href="#annotated-cell-24-6" aria-hidden="true" tabindex="-1"></a><span class="va">path</span><span class="op">=</span><span class="st">"../data/legal-transcript-trial-day-1"</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-24" data-target-annotation="3">3</button><span id="annotated-cell-24-7" class="code-annotation-target"><a href="#annotated-cell-24-7" aria-hidden="true" tabindex="-1"></a><span class="ex">tesseract</span>  <span class="at">-l</span> eng <span class="st">"</span><span class="va">$path</span><span class="st">/page-001-crop.png"</span> <span class="st">"</span><span class="va">$path</span><span class="st">/page-001-crop-bash"</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-24" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-24" data-code-lines="1" data-code-annotation="1">Iterate over the PNGs (commented out because there’s no point in doing it multiple times at the moment)</span>
</dd>
<dt data-target-cell="annotated-cell-24" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-24" data-code-lines="3" data-code-annotation="2">Convert each PNG to a corresponding text file, removing the extension and adding <code>-text</code> to the end of the file name (tesseract will add the <code>.txt</code> extension). <code>${file%.*}</code> is a bash convention to remove the file extension, and adding <code>-text</code> at the end ensures that we have a valid file name.</span>
</dd>
<dt data-target-cell="annotated-cell-24" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-24" data-code-lines="7" data-code-annotation="3">This is the single-file version of the command in the for loop - the biggest difference being that we specify the input and output file name instead of using <code>$file</code> placeholders.</span>
</dd>
</dl>
</div>
</div>
<div class="callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-13-contents" aria-controls="callout-13" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>tesseract</code> cropped file output
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-13" class="callout-13-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> ../data/legal-transcript-trial-day-1/page-001-crop-bash.txt</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="co">## IN THE CIRCUIT COURT FOR FREDERICK COUNTY, MARYLAND</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="co">## EXLINE-HASSLER</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a><span class="co">## Plaintiff</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="co">## Vv. Civil Docket</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="co">## No. 10-C-12-000410</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a><span class="co">## PENN NATIONAL INSURANCE, ET AL.,</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a><span class="co">## Defendant</span></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="co">## OFFICIAL TRANSCRIPT OF PROCEEDINGS</span></span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="co">## (JURY TRIAL - DAY ONE)</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="co">## Frederick, Maryland</span></span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="co">## January 22, 2013</span></span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="co">## BEFORE:</span></span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="co">## THE HONORABLE JULIE S. SOLT, JUDGE</span></span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a><span class="co">## APPEARANCES :</span></span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a><span class="co">## For the Plaintiff:</span></span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a><span class="co">## LAURA C. ZOIS, ESQUIRE</span></span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a><span class="co">## JOHN B. BRATT, ESQUIRE</span></span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a><span class="co">## For the Defendant:</span></span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a><span class="co">## WALTER E. GILLCRIST, JR., ESQUIRE</span></span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a><span class="co">## ANNE K. HOWARD, ESQUIRE</span></span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a><span class="co">## For Penn National Insurance, et al.:</span></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a><span class="co">## GUIDO PORCARELLI, ESQUIRE</span></span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a><span class="co">## TRANSCRIBED BY:</span></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a><span class="co">## Victoria Eastridge</span></span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a><span class="co">## Official Transcriber</span></span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a><span class="co">## 100 W. Patrick Street</span></span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a><span class="co">## Frederick, Maryland 21701</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p>The text looks pretty perfect to me at this point.</p>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-26"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-26-1"><a href="#annotated-cell-26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tesseract)</span>
<span id="annotated-cell-26-2"><a href="#annotated-cell-26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pdftools)</span>
<span id="annotated-cell-26-3"><a href="#annotated-cell-26-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="annotated-cell-26-4"><a href="#annotated-cell-26-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="annotated-cell-26-5"><a href="#annotated-cell-26-5" aria-hidden="true" tabindex="-1"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-26" data-target-annotation="1">1</button><span id="annotated-cell-26-6" class="code-annotation-target"><a href="#annotated-cell-26-6" aria-hidden="true" tabindex="-1"></a>png_files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="st">"../data/legal-transcript-trial-day-1/"</span>,</span>
<span id="annotated-cell-26-7"><a href="#annotated-cell-26-7" aria-hidden="true" tabindex="-1"></a>                        <span class="st">"-crop.png$"</span>, <span class="at">full.names =</span> T)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-26" data-target-annotation="2">2</button><span id="annotated-cell-26-8" class="code-annotation-target"><a href="#annotated-cell-26-8" aria-hidden="true" tabindex="-1"></a>textcrop <span class="ot">&lt;-</span> <span class="fu">ocr</span>(png_files[<span class="dv">1</span>], <span class="at">engine =</span> <span class="fu">tesseract</span>(<span class="st">"eng"</span>))</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-26" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-26" data-code-lines="6,7" data-code-annotation="1">List out all png files in the folder</span>
</dd>
<dt data-target-cell="annotated-cell-26" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-26" data-code-lines="8" data-code-annotation="2">OCR the first PNG and return the text</span>
</dd>
</dl>
</div>
</div>
<div class="callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
R cropped file output
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>textcrop[[<span class="dv">1</span>]] <span class="sc">|&gt;</span> </span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">str_split</span>(<span class="st">"</span><span class="sc">\n</span><span class="st">"</span>, <span class="at">simplify =</span> F) <span class="sc">|&gt;</span> <span class="fu">unlist</span>()</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="do">##  [1] "IN THE CIRCUIT COURT FOR FREDERICK COUNTY, MARYLAND"</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="do">##  [2] "EXLINE-HASSLER"                                     </span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="do">##  [3] "Plaintiff a"                                        </span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="do">##  [4] "Vv. Civil Docket"                                   </span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="do">##  [5] "No. 10-C-12-000410"                                 </span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="do">##  [6] "PENN NATIONAL INSURANCE, ET AL.,"                   </span></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a><span class="do">##  [7] ": Defendant"                                        </span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="do">##  [8] "OFFICIAL TRANSCRIPT OF PROCEEDINGS"                 </span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="do">##  [9] "(JURY TRIAL - DAY ONE)"                             </span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="do">## [10] "Frederick, Maryland"                                </span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a><span class="do">## [11] "January 22, 2013"                                   </span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a><span class="do">## [12] "BEFORE: . ."                                        </span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a><span class="do">## [13] "THE HONORABLE JULIE S. SOLT, JUDGE"                 </span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="do">## [14] "APPEARANCES:"                                       </span></span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a><span class="do">## [15] "| For the Plaintiff:"                               </span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a><span class="do">## [16] "| LAURA C. ZOIS, ESQUIRE"                           </span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a><span class="do">## [17] "JOHN B. BRATT, ESQUIRE"                             </span></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a><span class="do">## [18] ") For the Defendant:"                               </span></span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a><span class="do">## [19] "WALTER E. GILLCRIST, JR., ESQUIRE"                  </span></span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a><span class="do">## [20] "ANNE K. HOWARD, ESQUIRE"                            </span></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a><span class="do">## [21] "| For Penn National Insurance, et al.: |"           </span></span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a><span class="do">## [22] "/ GUIDO PORCARELLI, ESQUIRE"                        </span></span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a><span class="do">## [23] ","                                                  </span></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a><span class="do">## [24] "3 TRANSCRIBED BY:"                                  </span></span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a><span class="do">## [25] "Victoria Eastridge"                                 </span></span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a><span class="do">## [26] "i Official Transcriber"                             </span></span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a><span class="do">## [27] ". 100 W. Patrick Street"                            </span></span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a><span class="do">## [28] "&gt; Frederick, Maryland 21701"                        </span></span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a><span class="do">## [29] ""</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p>R is still finding a few extra characters, but this is a vast improvement over the previous version. We could likely remove what’s left through some careful text cleaning.</p>
</div>
<div id="tabset-4-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> PIL <span class="im">import</span> Image</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pytesseract</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pdf2image <span class="im">import</span> convert_from_path</span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>image<span class="op">=</span><span class="st">"../data/legal-transcript-trial-day-1/page-001-crop.png"</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>text <span class="op">=</span> pytesseract.image_to_string(Image.<span class="bu">open</span>(image))</span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>f <span class="op">=</span> <span class="bu">open</span>(<span class="ss">f'../data/legal-transcript-trial-day-1/page-001-crop-py.txt'</span>, <span class="st">'w'</span>)</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a>f.writelines(text)</span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>f.close()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-15-contents" aria-controls="callout-15" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Python tesseract file output
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-15" class="callout-15-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span> ../data/legal-transcript-trial-day-1/page-001-crop-py.txt</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co">## IN THE CIRCUIT COURT FOR FREDERICK COUNTY, MARYLAND</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="co">## EXLINE-HASSLER</span></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co">## Plaintiff</span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co">## Vv. Civil Docket</span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co">## No. 10-C-12-000410</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="co">## PENN NATIONAL INSURANCE, ET AL.,</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co">## Defendant</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="co">## OFFICIAL TRANSCRIPT OF PROCEEDINGS</span></span>
<span id="cb18-12"><a href="#cb18-12" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb18-13"><a href="#cb18-13" aria-hidden="true" tabindex="-1"></a><span class="co">## (JURY TRIAL - DAY ONE)</span></span>
<span id="cb18-14"><a href="#cb18-14" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb18-15"><a href="#cb18-15" aria-hidden="true" tabindex="-1"></a><span class="co">## Frederick, Maryland</span></span>
<span id="cb18-16"><a href="#cb18-16" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb18-17"><a href="#cb18-17" aria-hidden="true" tabindex="-1"></a><span class="co">## January 22, 2013</span></span>
<span id="cb18-18"><a href="#cb18-18" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb18-19"><a href="#cb18-19" aria-hidden="true" tabindex="-1"></a><span class="co">## BEFORE:</span></span>
<span id="cb18-20"><a href="#cb18-20" aria-hidden="true" tabindex="-1"></a><span class="co">## THE HONORABLE JULIE S. SOLT, JUDGE</span></span>
<span id="cb18-21"><a href="#cb18-21" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb18-22"><a href="#cb18-22" aria-hidden="true" tabindex="-1"></a><span class="co">## APPEARANCES :</span></span>
<span id="cb18-23"><a href="#cb18-23" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb18-24"><a href="#cb18-24" aria-hidden="true" tabindex="-1"></a><span class="co">## For the Plaintiff:</span></span>
<span id="cb18-25"><a href="#cb18-25" aria-hidden="true" tabindex="-1"></a><span class="co">## LAURA C. ZOIS, ESQUIRE</span></span>
<span id="cb18-26"><a href="#cb18-26" aria-hidden="true" tabindex="-1"></a><span class="co">## JOHN B. BRATT, ESQUIRE</span></span>
<span id="cb18-27"><a href="#cb18-27" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb18-28"><a href="#cb18-28" aria-hidden="true" tabindex="-1"></a><span class="co">## | For the Defendant:</span></span>
<span id="cb18-29"><a href="#cb18-29" aria-hidden="true" tabindex="-1"></a><span class="co">## WALTER E. GILLCRIST, JR., ESQUIRE</span></span>
<span id="cb18-30"><a href="#cb18-30" aria-hidden="true" tabindex="-1"></a><span class="co">## ANNE K. HOWARD, ESQUIRE</span></span>
<span id="cb18-31"><a href="#cb18-31" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb18-32"><a href="#cb18-32" aria-hidden="true" tabindex="-1"></a><span class="co">## For Penn National Insurance, et al.:</span></span>
<span id="cb18-33"><a href="#cb18-33" aria-hidden="true" tabindex="-1"></a><span class="co">## GUIDO PORCARELLI, ESQUIRE</span></span>
<span id="cb18-34"><a href="#cb18-34" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb18-35"><a href="#cb18-35" aria-hidden="true" tabindex="-1"></a><span class="co">## 3 TRANSCRIBED BY:</span></span>
<span id="cb18-36"><a href="#cb18-36" aria-hidden="true" tabindex="-1"></a><span class="co">## Victoria Eastridge</span></span>
<span id="cb18-37"><a href="#cb18-37" aria-hidden="true" tabindex="-1"></a><span class="co">## t Official Transcriber</span></span>
<span id="cb18-38"><a href="#cb18-38" aria-hidden="true" tabindex="-1"></a><span class="co">## . 100 W. Patrick Street</span></span>
<span id="cb18-39"><a href="#cb18-39" aria-hidden="true" tabindex="-1"></a><span class="co">## &gt; Frederick, Maryland 21701</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<p>In this case, the output from the cropped version is actually not as clean as the output from the cleaned version. This can occur because of settings that detect the main part of the page - if there isn’t enough margin, these settings sometimes don’t work as well. It’s important to calibrate the pipeline to the tools you have available.</p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="step-4-cleaning-the-text-output" class="level5 unnumbered">
<h5 class="unnumbered anchored" data-anchor-id="step-4-cleaning-the-text-output">Step 4: Cleaning The Text Output</h5>
<p>Once the pages have been cropped and OCR’d, then we need to clean up the text output. This might involve some of the following steps:</p>
<ul>
<li>Concatenating the text files into a single file</li>
<li>Joining adjacent lines that are part of the same thought and from the same speaker</li>
<li>Assigning line numbers based on the order of the transcript</li>
<li>Separating out the speaker information, so that there is a column for <code>speaker</code> and a column for <code>text</code></li>
<li>Running the transcript through spell check to handle any minor OCR errors, like using a zero instead of a capital O</li>
<li>Cleaning up punctuation marks that are often confused, like <code>(</code> and <code>{</code> to ensure that all brackets match</li>
<li>Identifying portions of the transcript that are from depositions (which have Q and A at the beginning of each line, instead of speakers)</li>
</ul>
<p>Which steps are undertaken depends heavily on the goal of the analysis. We might not care about punctuation marks if we’re going to apply text processing algorithms that require that we strip all punctuation out of the text, but we may need to remove all of the speaker information so that only spoken text remains.</p>
<p>All of these steps are string processing tasks, which will not be repeated in this chapter.</p>
</section>
</section>
</section>
<section id="reading-tabular-data-from-text-or-hybrid-pdfs" class="level3 page-columns page-full" data-number="34.3.2">
<h3 data-number="34.3.2" class="anchored" data-anchor-id="reading-tabular-data-from-text-or-hybrid-pdfs"><span class="header-section-number">34.3.2</span> Reading Tabular Data from Text or Hybrid PDFs</h3>
<p>As mentioned above, tabular data is a particular challenge to read from PDF files, as the PDF specification doesn’t actually have any way to represent structured text. There are two common open-source libraries recommended for extracting tabular data from PDFs - <code>tabula</code>, which is a Java library <span class="citation" data-cites="aristaranTabulapdfTabula2025"><a href="#ref-aristaranTabulapdfTabula2025" role="doc-biblioref">[14]</a></span>, and <code>camelot</code>, a Python library <span class="citation" data-cites="vinayak-mehtaCamelotPDFTable2025"><a href="#ref-vinayak-mehtaCamelotPDFTable2025" role="doc-biblioref">[15]</a></span>. There are interfaces to the <code>tabula</code> library in both R and Python (<code>tabulapdf</code> and <code>tabula-py</code>, respectively), but there is no R interface to <code>camelot</code>, as far as I am aware. In this chapter, I will focus primarily on <code>tabula</code>, since it works across both R and Python, but if you ever run into issues using it, consider <code>camelot</code> as well – it has some cool features <span class="citation" data-cites="dennisTabulapyVsCamelot2024"><a href="#ref-dennisTabulapyVsCamelot2024" role="doc-biblioref">[16]</a></span>.</p>
<p>Installation of <code>tabulapdf</code> in R depends on <code>rJava</code>, which can be a bit tricky, particularly on Windows. The <a href="https://github.com/ropensci/tabulapdf/">tabulapdf</a> github page has more detailed instructions for <a href="https://github.com/ropensci/tabulapdf/#installing-java-on-windows-with-chocolatey">how to install Java for Windows using Chocolatey</a>.</p>
<div class="callout callout-style-default callout-example callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example: Bureau of Labor Statistics Consumer Price Index
</div>
</div>
<div class="callout-body-container callout-body">
<p>The Bureau of Labor Statistics provides monthly Consumer Price Index news releases. An archive of these releases is available at https://www.bls.gov/bls/news-release/cpi.htm. Let’s acquire 2 years worth of monthly CPI reports, and focus on trying to extract the first table, “Consumer Price Index for All Urban Consumers (CPI-U): US city average, by expenditure category”.</p>
<div class="callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-17-contents" aria-controls="callout-17" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Acquiring 2 years of BLS CPI news releases
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-17" class="callout-17-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>As this material is covered in <a href="03-web-scraping.html" class="quarto-xref"><span>Chapter 31</span></a>, I’m just going to provide the code to do this in R – you can see equivalent python commands in <a href="03-web-scraping.html" class="quarto-xref"><span>Chapter 31</span></a>. After having done this in R, I realized I probably could have accomplished the same task with a single <code>wget</code> command in <code>bash</code>, the lesson being that it is important to pick your tools wisely.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>save_dir <span class="ot">&lt;-</span> <span class="st">"../data/bls-pdfs/"</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="fu">dir.create</span>(save_dir, <span class="at">showWarnings =</span> F)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>url <span class="ot">&lt;-</span> <span class="st">"https://www.bls.gov/bls/news-release/cpi.htm"</span></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>session <span class="ot">&lt;-</span> <span class="fu">read_html_live</span>(url)</span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a><span class="co"># PDFs are the 2nd link in each entry</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>links <span class="ot">&lt;-</span> session<span class="sc">$</span><span class="fu">html_elements</span>(<span class="st">"li a:nth-child(2)"</span>)  </span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="co"># Get the last 2 years of entries</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>link_tbl <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="at">link =</span> <span class="fu">html_attr</span>(links, <span class="st">"href"</span>), </span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a>                   <span class="at">date =</span> <span class="fu">str_extract</span>(link, <span class="st">"</span><span class="sc">\\</span><span class="st">d{8}"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">|&gt;</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">datestr =</span> date, <span class="at">date =</span> <span class="fu">mdy</span>(date)) <span class="sc">|&gt;</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="fu">today</span>() <span class="sc">-</span> <span class="fu">years</span>(<span class="dv">2</span>) <span class="sc">&lt;=</span> date)</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>ua <span class="ot">&lt;-</span> <span class="st">"Mozilla/5.0 (Windows NT x.y; Win64; x64; rv:10.0) Gecko/20100101 Firefox/10.0"</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">HTTPUserAgent =</span> ua)</span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>filelist <span class="ot">&lt;-</span> <span class="fu">paste0</span>(<span class="st">"https://www.bls.gov"</span>, link_tbl<span class="sc">$</span>link)</span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>filesave <span class="ot">&lt;-</span> <span class="fu">paste0</span>(save_dir, <span class="fu">basename</span>(link_tbl<span class="sc">$</span>link))</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a><span class="co"># The site is finicky about user agents, so we need to </span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a><span class="co"># specifically pass that in to the download.file method.</span></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a><span class="fu">walk2</span>(filelist, filesave, <span class="sc">~</span><span class="fu">download.file</span>(.x, <span class="at">destfile =</span> .y, <span class="at">method =</span> <span class="st">"wget"</span>, <span class="at">extra =</span> <span class="fu">paste0</span>(<span class="st">"-U </span><span class="sc">\"</span><span class="st">"</span>, ua, <span class="st">"</span><span class="sc">\"</span><span class="st">"</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>

<p>You can either run the code above (assuming you have <code>wget</code> on your machine), or you can <a href="../data/bls-pdfs/bls-cpi-pdfs.zip">download a zip file of the PDFs</a>.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Tabula-Py</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages("tabulapdf")</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tabulapdf)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pdftools)</span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(purrr)</span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>files <span class="ot">&lt;-</span> <span class="fu">list.files</span>(<span class="at">path =</span> <span class="st">"../data/bls-pdfs"</span>, <span class="at">pattern =</span> <span class="st">".pdf$"</span>, <span class="at">full.names=</span>T)</span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>find_page_number <span class="ot">&lt;-</span> <span class="cf">function</span>(file) {</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  txt <span class="ot">&lt;-</span> <span class="fu">pdf_text</span>(file)</span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  txt_by_page <span class="ot">&lt;-</span> <span class="fu">map_chr</span>(txt, <span class="sc">~</span><span class="fu">paste</span>(., <span class="at">collapse=</span><span class="st">" "</span>))</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">which</span>(<span class="fu">str_detect</span>(txt_by_page, <span class="st">"Table 1"</span>))</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a><span class="co"># page_numbers &lt;- map_int(files, find_page_number)</span></span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>page_numbers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">9</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">9</span>, <span class="dv">9</span>, <span class="dv">9</span>, <span class="dv">9</span>, <span class="dv">9</span>, <span class="dv">9</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">9</span>, <span class="dv">10</span>, <span class="dv">9</span>)</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>tables <span class="ot">&lt;-</span> <span class="fu">extract_tables</span>(files[<span class="dv">1</span>], <span class="at">page =</span> page_numbers[<span class="dv">1</span>],  <span class="at">output =</span> <span class="st">"tibble"</span>)[[<span class="dv">1</span>]]</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tables)</span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 6 × 5</span></span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a><span class="do">##   ...1                 ...2    ...3  `Unadjusted percent` Seasonally adjusted …¹</span></span>
<span id="cb20-23"><a href="#cb20-23" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;                &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;                &lt;chr&gt;                 </span></span>
<span id="cb20-24"><a href="#cb20-24" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 &lt;NA&gt;                 Relati… Unad… change               change                </span></span>
<span id="cb20-25"><a href="#cb20-25" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 &lt;NA&gt;                 impor-  &lt;NA&gt;  &lt;NA&gt;                 &lt;NA&gt;                  </span></span>
<span id="cb20-26"><a href="#cb20-26" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 Expenditure category tance   &lt;NA&gt;  Dec. Nov.            Sep. Oct. Nov.        </span></span>
<span id="cb20-27"><a href="#cb20-27" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 &lt;NA&gt;                 Nov.    Dec.… 2022- 2023-          2023- 2023- 2023-     </span></span>
<span id="cb20-28"><a href="#cb20-28" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 &lt;NA&gt;                 2023    2022… Dec. Dec.            Oct. Nov. Dec.        </span></span>
<span id="cb20-29"><a href="#cb20-29" aria-hidden="true" tabindex="-1"></a><span class="do">## 6 &lt;NA&gt;                 &lt;NA&gt;    &lt;NA&gt;  2023 2023            2023 2023 2023        </span></span>
<span id="cb20-30"><a href="#cb20-30" aria-hidden="true" tabindex="-1"></a><span class="do">## # ℹ abbreviated name: ¹​`Seasonally adjusted percent`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>It appears that <code>tabulapdf</code> isn’t separating the columns the way we’d prefer. Let’s see if we can fix that….</p>
<p>There’s a function, <code>locate_areas()</code>, that works interactively - it opens a viewer tab and you select the table using the mouse, as in <a href="#fig-tabulapdf-locate-area" class="quarto-xref">Figure&nbsp;<span>34.8</span></a>.</p>

<p><code>locate_areas</code> provides a sequence of coordinates that are relatively consistent across multiple full-page tables, so we might try to use those coordinates to improve our table parsing.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="fu">locate_areas</span>(files[<span class="dv">1</span>], <span class="at">pages =</span> <span class="fu">rep</span>(page_numbers[<span class="dv">1</span>], <span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Here’s what I got running this 5 times for the first PDF in the list – this gives me boundaries for each column (without including the header).</p>
<pre><code>Listening on http://127.0.0.1:6481
[[1]]
     top     left   bottom    right 
128.1042 209.2557 583.8484 244.2939 

[[2]]
     top     left   bottom    right 
128.1042 289.0649 584.8223 327.9962 

[[3]]
     top     left   bottom    right 
128.1042 369.8473 586.7699 410.7252 

[[4]]
     top     left   bottom    right 
128.1042 452.5763 586.7699 489.5611 

[[5]]
     top     left   bottom    right 
126.1566 535.3054 586.7699 575.2099 
</code></pre>
<p>We can actually run this for each column, keeping track of the left and right values, to get an even more precise way to read our data in. Here are my rough column alignments, using <code>cpi_01112024.pdf</code> as a test.</p>
<ul>
<li>Table Start - 35</li>
<li>Col2 - 209</li>
<li>Col3 - 244</li>
<li>Col4 - 289</li>
<li>Col5 - 328</li>
<li>Col6 - 370</li>
<li>Col7 - 411</li>
<li>Col8 - 453</li>
<li>Col9 - 490</li>
<li>Col10 - 535</li>
<li>Table End - 575</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>tables <span class="ot">&lt;-</span> <span class="fu">extract_tables</span>(</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>  files[<span class="dv">1</span>], <span class="at">page =</span> page_numbers[<span class="dv">1</span>], </span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">guess =</span> F,</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">col_names =</span> F, </span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">area =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">128</span>, <span class="dv">35</span>, <span class="dv">586</span>, <span class="dv">575</span>)), </span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">columns =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">209</span>, <span class="dv">244</span>, <span class="dv">289</span>, <span class="dv">328</span>, <span class="dv">370</span>, <span class="dv">411</span>, <span class="dv">453</span>, <span class="dv">490</span>, <span class="dv">535</span>))</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>)[[<span class="dv">1</span>]]</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(tables)</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 6 × 10</span></span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="do">##   X1                          X2    X3    X4    X5    X6    X7    X8    X9   X10</span></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;chr&gt;                    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 All items.. . . . . . … 100     297.  307.  307.   3.4  -0.1   0     0.1   0.3</span></span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 Food.. . . . . . . . .…  13.4   317.  325.  325.   2.7   0.1   0.3   0.2   0.2</span></span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 Food at home.. . . . .…   8.55  299.  303.  303.   1.3  -0.1   0.3   0.1   0.1</span></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 Cereals and bakery pro…   1.16  345.  356.  354.   2.6  -0.7   0.2   0.5  -0.3</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 Meats, poultry, fish, …   1.78  320.  320.  320.  -0.1   0.1   0.7  -0.2   0.5</span></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="do">## 6 Dairy and related prod…   0.78  271.  268.  268.  -1.3   0.1   0.3   0.1   0.3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ok, that looks good - let’s apply it to the rest of the reports now.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>tables <span class="ot">&lt;-</span> <span class="fu">map2</span>(files, page_numbers, <span class="sc">~</span><span class="fu">extract_tables</span>(</span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>    .x, <span class="at">page =</span> .y, </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">guess =</span> F,</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_names =</span> F, </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">area =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">128</span>, <span class="dv">35</span>, <span class="dv">586</span>, <span class="dv">575</span>)), </span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">209</span>, <span class="dv">244</span>, <span class="dv">289</span>, <span class="dv">328</span>, <span class="dv">370</span>, <span class="dv">411</span>, <span class="dv">453</span>, <span class="dv">490</span>, <span class="dv">535</span>))</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>    )[[<span class="dv">1</span>]]</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Then, we can read in the dates that are present in the header row, assuming that the major dividers stay the same between reports. I used <code>locate_areas()</code> to get the coordinates of each header that we care about.</p>
<div class="callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-18-contents" aria-controls="callout-18" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<code>locate_areas()</code> output
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-18" class="callout-18-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<pre><code>&gt; locate_areas(files[1], pages = page_numbers[1])

Listening on http://127.0.0.1:7339
[[1]]
      top      left    bottom     right 
 89.15168  36.98473 127.13037 572.29009 </code></pre>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-36"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><button class="code-annotation-anchor" data-target-cell="annotated-cell-36" data-target-annotation="1">1</button><span id="annotated-cell-36-1" class="code-annotation-target"><a href="#annotated-cell-36-1" aria-hidden="true" tabindex="-1"></a>headers <span class="ot">&lt;-</span> <span class="fu">map2</span>(</span>
<span id="annotated-cell-36-2"><a href="#annotated-cell-36-2" aria-hidden="true" tabindex="-1"></a>  files, page_numbers,</span>
<span id="annotated-cell-36-3"><a href="#annotated-cell-36-3" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span><span class="fu">extract_tables</span>(</span>
<span id="annotated-cell-36-4"><a href="#annotated-cell-36-4" aria-hidden="true" tabindex="-1"></a>    .x, <span class="at">page =</span> .y,</span>
<span id="annotated-cell-36-5"><a href="#annotated-cell-36-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">guess =</span> F,</span>
<span id="annotated-cell-36-6"><a href="#annotated-cell-36-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">col_names =</span> F,</span>
<span id="annotated-cell-36-7"><a href="#annotated-cell-36-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">area =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">89</span>, <span class="dv">35</span>, <span class="dv">128</span>, <span class="dv">575</span>)),</span>
<span id="annotated-cell-36-8"><a href="#annotated-cell-36-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">columns =</span> <span class="fu">list</span>(<span class="fu">c</span>(<span class="dv">209</span>, <span class="dv">244</span>, <span class="dv">289</span>, <span class="dv">328</span>, <span class="dv">370</span>, <span class="dv">411</span>, <span class="dv">453</span>, <span class="dv">490</span>, <span class="dv">535</span>))</span>
<span id="annotated-cell-36-9"><a href="#annotated-cell-36-9" aria-hidden="true" tabindex="-1"></a>  )[[<span class="dv">1</span>]]</span>
<span id="annotated-cell-36-10"><a href="#annotated-cell-36-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="annotated-cell-36-11"><a href="#annotated-cell-36-11" aria-hidden="true" tabindex="-1"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-36" data-target-annotation="2">2</button><span id="annotated-cell-36-12" class="code-annotation-target"><a href="#annotated-cell-36-12" aria-hidden="true" tabindex="-1"></a>fix_headers <span class="ot">&lt;-</span> <span class="cf">function</span>(tbl) {</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-36" data-target-annotation="3">3</button><span id="annotated-cell-36-13" class="code-annotation-target"><a href="#annotated-cell-36-13" aria-hidden="true" tabindex="-1"></a>modifiers <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"Rel_imp."</span>, <span class="fu">rep</span>(<span class="st">"Unadj_idx."</span>, <span class="dv">3</span>), <span class="fu">rep</span>(<span class="st">"Unadj_pct_chg."</span>, <span class="dv">2</span>), <span class="fu">rep</span>(<span class="st">"Seas_adj_pct_chg."</span>, <span class="dv">3</span>))</span>
<span id="annotated-cell-36-14"><a href="#annotated-cell-36-14" aria-hidden="true" tabindex="-1"></a>  </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-36" data-target-annotation="4">4</button><span id="annotated-cell-36-15" class="code-annotation-target"><a href="#annotated-cell-36-15" aria-hidden="true" tabindex="-1"></a>  vars <span class="ot">&lt;-</span> <span class="fu">c</span>(tbl[<span class="dv">1</span>,<span class="dv">1</span>],</span>
<span id="annotated-cell-36-16"><a href="#annotated-cell-36-16" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="fu">unlist</span>(tbl[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">2</span>]), <span class="at">collapse=</span><span class="st">""</span>),</span>
<span id="annotated-cell-36-17"><a href="#annotated-cell-36-17" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="fu">unlist</span>(tbl[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">3</span>]), <span class="at">collapse=</span><span class="st">""</span>),</span>
<span id="annotated-cell-36-18"><a href="#annotated-cell-36-18" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="fu">unlist</span>(tbl[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">4</span>]), <span class="at">collapse=</span><span class="st">""</span>),</span>
<span id="annotated-cell-36-19"><a href="#annotated-cell-36-19" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="fu">unlist</span>(tbl[<span class="dv">2</span><span class="sc">:</span><span class="dv">3</span>, <span class="dv">5</span>]), <span class="at">collapse=</span><span class="st">""</span>),</span>
<span id="annotated-cell-36-20"><a href="#annotated-cell-36-20" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="fu">unlist</span>(tbl[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">6</span>]), <span class="at">collapse=</span><span class="st">""</span>),</span>
<span id="annotated-cell-36-21"><a href="#annotated-cell-36-21" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="fu">unlist</span>(tbl[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">7</span>]), <span class="at">collapse=</span><span class="st">""</span>),</span>
<span id="annotated-cell-36-22"><a href="#annotated-cell-36-22" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="fu">unlist</span>(tbl[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">8</span>]), <span class="at">collapse=</span><span class="st">""</span>),</span>
<span id="annotated-cell-36-23"><a href="#annotated-cell-36-23" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="fu">unlist</span>(tbl[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">9</span>]), <span class="at">collapse=</span><span class="st">""</span>),</span>
<span id="annotated-cell-36-24"><a href="#annotated-cell-36-24" aria-hidden="true" tabindex="-1"></a>    <span class="fu">paste</span>(<span class="fu">unlist</span>(tbl[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>, <span class="dv">10</span>]), <span class="at">collapse=</span><span class="st">""</span>)</span>
<span id="annotated-cell-36-25"><a href="#annotated-cell-36-25" aria-hidden="true" tabindex="-1"></a>    ) <span class="sc">|&gt;</span> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-36" data-target-annotation="5">5</button><span id="annotated-cell-36-26" class="code-annotation-target"><a href="#annotated-cell-36-26" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_remove_all</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">."</span>) <span class="sc">|&gt;</span></span>
<span id="annotated-cell-36-27"><a href="#annotated-cell-36-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">str_replace_all</span>(<span class="st">"[ -]"</span>, <span class="st">"_"</span>)</span>
<span id="annotated-cell-36-28"><a href="#annotated-cell-36-28" aria-hidden="true" tabindex="-1"></a>  </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-36" data-target-annotation="6">6</button><span id="annotated-cell-36-29" class="code-annotation-target"><a href="#annotated-cell-36-29" aria-hidden="true" tabindex="-1"></a>  <span class="fu">paste0</span>(modifiers, vars)</span>
<span id="annotated-cell-36-30"><a href="#annotated-cell-36-30" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="annotated-cell-36-31"><a href="#annotated-cell-36-31" aria-hidden="true" tabindex="-1"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-36" data-target-annotation="7">7</button><span id="annotated-cell-36-32" class="code-annotation-target"><a href="#annotated-cell-36-32" aria-hidden="true" tabindex="-1"></a>headers_fixed <span class="ot">=</span> <span class="fu">map</span>(headers, fix_headers)</span>
<span id="annotated-cell-36-33"><a href="#annotated-cell-36-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-36-34"><a href="#annotated-cell-36-34" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-36" data-target-annotation="8">8</button><span id="annotated-cell-36-35" class="code-annotation-target"><a href="#annotated-cell-36-35" aria-hidden="true" tabindex="-1"></a>tables <span class="ot">&lt;-</span> <span class="fu">map2</span>(tables, headers_fixed, <span class="sc">~</span><span class="fu">set_names</span>(.x, .y))</span>
<span id="annotated-cell-36-36"><a href="#annotated-cell-36-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-36-37"><a href="#annotated-cell-36-37" aria-hidden="true" tabindex="-1"></a>tables[[<span class="dv">1</span>]]</span>
<span id="annotated-cell-36-38"><a href="#annotated-cell-36-38" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 41 × 10</span></span>
<span id="annotated-cell-36-39"><a href="#annotated-cell-36-39" aria-hidden="true" tabindex="-1"></a><span class="do">##    Expenditure_category      Rel_imp.Nov2023 Unadj_idx.Dec2022 Unadj_idx.Nov2023</span></span>
<span id="annotated-cell-36-40"><a href="#annotated-cell-36-40" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;                               &lt;dbl&gt;             &lt;dbl&gt;             &lt;dbl&gt;</span></span>
<span id="annotated-cell-36-41"><a href="#annotated-cell-36-41" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 All items.. . . . . . . …          100                 297.              307.</span></span>
<span id="annotated-cell-36-42"><a href="#annotated-cell-36-42" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 Food.. . . . . . . . . .…           13.4               317.              325.</span></span>
<span id="annotated-cell-36-43"><a href="#annotated-cell-36-43" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 Food at home.. . . . . .…            8.55              299.              303.</span></span>
<span id="annotated-cell-36-44"><a href="#annotated-cell-36-44" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 Cereals and bakery produ…            1.16              345.              356.</span></span>
<span id="annotated-cell-36-45"><a href="#annotated-cell-36-45" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 Meats, poultry, fish, an…            1.78              320.              320.</span></span>
<span id="annotated-cell-36-46"><a href="#annotated-cell-36-46" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 Dairy and related produc…            0.78              271.              268.</span></span>
<span id="annotated-cell-36-47"><a href="#annotated-cell-36-47" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 Fruits and vegetables. .…            1.47              349.              351.</span></span>
<span id="annotated-cell-36-48"><a href="#annotated-cell-36-48" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Nonalcoholic beverages a…           NA                  NA                NA </span></span>
<span id="annotated-cell-36-49"><a href="#annotated-cell-36-49" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 materials. . . . . . . .…            1.03              210.              216.</span></span>
<span id="annotated-cell-36-50"><a href="#annotated-cell-36-50" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Other food at home.. . .…            2.33              263.              270.</span></span>
<span id="annotated-cell-36-51"><a href="#annotated-cell-36-51" aria-hidden="true" tabindex="-1"></a><span class="do">## # ℹ 31 more rows</span></span>
<span id="annotated-cell-36-52"><a href="#annotated-cell-36-52" aria-hidden="true" tabindex="-1"></a><span class="do">## # ℹ 6 more variables: Unadj_idx.Dec2023 &lt;dbl&gt;,</span></span>
<span id="annotated-cell-36-53"><a href="#annotated-cell-36-53" aria-hidden="true" tabindex="-1"></a><span class="do">## #   Unadj_pct_chg.Dec2022_Dec2023 &lt;dbl&gt;, Unadj_pct_chg.Nov2023_Dec2023 &lt;dbl&gt;,</span></span>
<span id="annotated-cell-36-54"><a href="#annotated-cell-36-54" aria-hidden="true" tabindex="-1"></a><span class="do">## #   Seas_adj_pct_chg.Sep2023_Oct2023 &lt;dbl&gt;,</span></span>
<span id="annotated-cell-36-55"><a href="#annotated-cell-36-55" aria-hidden="true" tabindex="-1"></a><span class="do">## #   Seas_adj_pct_chg.Oct2023_Nov2023 &lt;dbl&gt;,</span></span>
<span id="annotated-cell-36-56"><a href="#annotated-cell-36-56" aria-hidden="true" tabindex="-1"></a><span class="do">## #   Seas_adj_pct_chg.Nov2023_Dec2023 &lt;dbl&gt;</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-36" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-36" data-code-lines="1,2,3,4,5,6,7,8,9,10" data-code-annotation="1">Pull headers out using roughly the same command as we used to get the tables, but with a different top and bottom area.</span>
</dd>
<dt data-target-cell="annotated-cell-36" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-36" data-code-lines="12" data-code-annotation="2">Write a function to clean the headers up a bit</span>
</dd>
<dt data-target-cell="annotated-cell-36" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-36" data-code-lines="13" data-code-annotation="3"><code>modifiers</code> are the top row of the variable names that aren’t captured by our headers object. They’re consistent from report to report. We’ll separate the modifier from the dates using <code>.</code>, for easier cleaning.</span>
</dd>
<dt data-target-cell="annotated-cell-36" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-36" data-code-lines="15,16,17,18,19,20,21,22,23,24" data-code-annotation="4">Extract only the components of the headers object that are needed – this depends on whether we’re talking about a single month-to-month comparison, or a time span. In the first column, we only need the “expenditure category” object.</span>
</dd>
<dt data-target-cell="annotated-cell-36" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-36" data-code-lines="26,27" data-code-annotation="5">Remove all <code>.</code> characters from the names so they don’t mess up our delimiter, and replace spaces and dashes with <code>_</code>.</span>
</dd>
<dt data-target-cell="annotated-cell-36" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-36" data-code-lines="29" data-code-annotation="6">Paste the two vectors together to get the names.</span>
</dd>
<dt data-target-cell="annotated-cell-36" data-target-annotation="7">7</dt>
<dd>
<span data-code-cell="annotated-cell-36" data-code-lines="32" data-code-annotation="7">Apply the function to each header</span>
</dd>
<dt data-target-cell="annotated-cell-36" data-target-annotation="8">8</dt>
<dd>
<span data-code-cell="annotated-cell-36" data-code-lines="35" data-code-annotation="8">Set the names of the variables in each table to the corresponding header.</span>
</dd>
</dl>
</div>
</div>
<p>Then, we just need to clean things up a bit more.</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-37"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-37-1"><a href="#annotated-cell-37-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="annotated-cell-37-2"><a href="#annotated-cell-37-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="annotated-cell-37-3"><a href="#annotated-cell-37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-37" data-target-annotation="1">1</button><span id="annotated-cell-37-4" class="code-annotation-target"><a href="#annotated-cell-37-4" aria-hidden="true" tabindex="-1"></a>report_date <span class="ot">&lt;-</span> <span class="fu">str_replace</span>(<span class="fu">basename</span>(files), <span class="st">"cpi_(.*)</span><span class="sc">\\</span><span class="st">.pdf"</span>, <span class="st">"</span><span class="sc">\\</span><span class="st">1"</span>) <span class="sc">|&gt;</span> <span class="fu">mdy</span>()</span>
<span id="annotated-cell-37-5"><a href="#annotated-cell-37-5" aria-hidden="true" tabindex="-1"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-37" data-target-annotation="2">2</button><span id="annotated-cell-37-6" class="code-annotation-target"><a href="#annotated-cell-37-6" aria-hidden="true" tabindex="-1"></a>cpi_data <span class="ot">&lt;-</span> <span class="fu">map2</span>(tables, report_date, <span class="sc">~</span><span class="fu">mutate</span>(.x, <span class="at">report_date =</span> .y))</span>
<span id="annotated-cell-37-7"><a href="#annotated-cell-37-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-37-8"><a href="#annotated-cell-37-8" aria-hidden="true" tabindex="-1"></a>cpi_data <span class="ot">&lt;-</span> <span class="fu">map</span>(</span>
<span id="annotated-cell-37-9"><a href="#annotated-cell-37-9" aria-hidden="true" tabindex="-1"></a>  cpi_data, </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-37" data-target-annotation="3">3</button><span id="annotated-cell-37-10" class="code-annotation-target"><a href="#annotated-cell-37-10" aria-hidden="true" tabindex="-1"></a>  <span class="sc">~</span><span class="fu">pivot_longer</span>(., <span class="sc">-</span><span class="fu">c</span>(Expenditure_category, report_date),</span>
<span id="annotated-cell-37-11"><a href="#annotated-cell-37-11" aria-hidden="true" tabindex="-1"></a>                <span class="at">names_to=</span><span class="st">"var"</span>,</span>
<span id="annotated-cell-37-12"><a href="#annotated-cell-37-12" aria-hidden="true" tabindex="-1"></a>                <span class="at">values_to =</span> <span class="st">"val"</span>) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-37" data-target-annotation="4">4</button><span id="annotated-cell-37-13" class="code-annotation-target"><a href="#annotated-cell-37-13" aria-hidden="true" tabindex="-1"></a>    <span class="fu">separate</span>(var, <span class="fu">c</span>(<span class="st">"varname"</span>, <span class="st">"vardate"</span>), <span class="at">sep =</span> <span class="st">"</span><span class="sc">\\</span><span class="st">."</span>) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-37" data-target-annotation="5">5</button><span id="annotated-cell-37-14" class="code-annotation-target"><a href="#annotated-cell-37-14" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="at">id_cols =</span> <span class="fu">c</span>(<span class="st">"Expenditure_category"</span>, <span class="st">"report_date"</span>, <span class="st">"vardate"</span>), <span class="at">names_from =</span> <span class="st">"varname"</span>, <span class="at">values_from =</span> <span class="st">"val"</span>)</span>
<span id="annotated-cell-37-15"><a href="#annotated-cell-37-15" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="annotated-cell-37-16"><a href="#annotated-cell-37-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-37-17"><a href="#annotated-cell-37-17" aria-hidden="true" tabindex="-1"></a>cpi_data <span class="ot">&lt;-</span> cpi_data <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-37" data-target-annotation="6">6</button><span id="annotated-cell-37-18" class="code-annotation-target"><a href="#annotated-cell-37-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>() <span class="sc">|&gt;</span></span>
<span id="annotated-cell-37-19"><a href="#annotated-cell-37-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Expenditure_category =</span> <span class="fu">str_remove_all</span>(Expenditure_category, <span class="st">"[</span><span class="sc">\\</span><span class="st">. ]{1,}$"</span>) <span class="sc">|&gt;</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-37" data-target-annotation="7">7</button><span id="annotated-cell-37-20" class="code-annotation-target"><a href="#annotated-cell-37-20" aria-hidden="true" tabindex="-1"></a>           <span class="fu">str_trim</span>())</span>
<span id="annotated-cell-37-21"><a href="#annotated-cell-37-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-37-22"><a href="#annotated-cell-37-22" aria-hidden="true" tabindex="-1"></a><span class="fu">dim</span>(cpi_data)</span>
<span id="annotated-cell-37-23"><a href="#annotated-cell-37-23" aria-hidden="true" tabindex="-1"></a>cpi_data</span>
<span id="annotated-cell-37-24"><a href="#annotated-cell-37-24" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 6601    7</span></span>
<span id="annotated-cell-37-25"><a href="#annotated-cell-37-25" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 6,601 × 7</span></span>
<span id="annotated-cell-37-26"><a href="#annotated-cell-37-26" aria-hidden="true" tabindex="-1"></a><span class="do">##    Expenditure_category report_date vardate      Rel_imp Unadj_idx Unadj_pct_chg</span></span>
<span id="annotated-cell-37-27"><a href="#annotated-cell-37-27" aria-hidden="true" tabindex="-1"></a><span class="do">##    &lt;chr&gt;                &lt;date&gt;      &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;         &lt;dbl&gt;</span></span>
<span id="annotated-cell-37-28"><a href="#annotated-cell-37-28" aria-hidden="true" tabindex="-1"></a><span class="do">##  1 All items            2024-01-11  Nov2023        100        307.          NA  </span></span>
<span id="annotated-cell-37-29"><a href="#annotated-cell-37-29" aria-hidden="true" tabindex="-1"></a><span class="do">##  2 All items            2024-01-11  Dec2022         NA        297.          NA  </span></span>
<span id="annotated-cell-37-30"><a href="#annotated-cell-37-30" aria-hidden="true" tabindex="-1"></a><span class="do">##  3 All items            2024-01-11  Dec2023         NA        307.          NA  </span></span>
<span id="annotated-cell-37-31"><a href="#annotated-cell-37-31" aria-hidden="true" tabindex="-1"></a><span class="do">##  4 All items            2024-01-11  Dec2022_Dec…    NA         NA            3.4</span></span>
<span id="annotated-cell-37-32"><a href="#annotated-cell-37-32" aria-hidden="true" tabindex="-1"></a><span class="do">##  5 All items            2024-01-11  Nov2023_Dec…    NA         NA           -0.1</span></span>
<span id="annotated-cell-37-33"><a href="#annotated-cell-37-33" aria-hidden="true" tabindex="-1"></a><span class="do">##  6 All items            2024-01-11  Sep2023_Oct…    NA         NA           NA  </span></span>
<span id="annotated-cell-37-34"><a href="#annotated-cell-37-34" aria-hidden="true" tabindex="-1"></a><span class="do">##  7 All items            2024-01-11  Oct2023_Nov…    NA         NA           NA  </span></span>
<span id="annotated-cell-37-35"><a href="#annotated-cell-37-35" aria-hidden="true" tabindex="-1"></a><span class="do">##  8 Food                 2024-01-11  Nov2023         13.4      325.          NA  </span></span>
<span id="annotated-cell-37-36"><a href="#annotated-cell-37-36" aria-hidden="true" tabindex="-1"></a><span class="do">##  9 Food                 2024-01-11  Dec2022         NA        317.          NA  </span></span>
<span id="annotated-cell-37-37"><a href="#annotated-cell-37-37" aria-hidden="true" tabindex="-1"></a><span class="do">## 10 Food                 2024-01-11  Dec2023         NA        325.          NA  </span></span>
<span id="annotated-cell-37-38"><a href="#annotated-cell-37-38" aria-hidden="true" tabindex="-1"></a><span class="do">## # ℹ 6,591 more rows</span></span>
<span id="annotated-cell-37-39"><a href="#annotated-cell-37-39" aria-hidden="true" tabindex="-1"></a><span class="do">## # ℹ 1 more variable: Seas_adj_pct_chg &lt;dbl&gt;</span></span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-37" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-37" data-code-lines="4" data-code-annotation="1">Determine the date of the report from the filename</span>
</dd>
<dt data-target-cell="annotated-cell-37" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-37" data-code-lines="6" data-code-annotation="2">Add a column with the corresponding report date to each table</span>
</dd>
<dt data-target-cell="annotated-cell-37" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-37" data-code-lines="10,11,12" data-code-annotation="3">Convert each table to long form with expenditure category and report date as ID columns.</span>
</dd>
<dt data-target-cell="annotated-cell-37" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-37" data-code-lines="13" data-code-annotation="4">Split the variable names from the period over which the variable is calculated. In theory, we should be able to determine the lag for each of these and not care about the date, but I don’t trust that the report has been that consistent over 2 years… paranoia.</span>
</dd>
<dt data-target-cell="annotated-cell-37" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-37" data-code-lines="14" data-code-annotation="5">Pivot wider, so that there’s a column for each variable name.</span>
</dd>
<dt data-target-cell="annotated-cell-37" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-37" data-code-lines="18" data-code-annotation="6">Bind all the tables together into a single table</span>
</dd>
<dt data-target-cell="annotated-cell-37" data-target-annotation="7">7</dt>
<dd>
<span data-code-cell="annotated-cell-37" data-code-lines="20" data-code-annotation="7">Clean up the expenditure category names so that the dots are gone.</span>
</dd>
</dl>
</div>
</div>
<p>We could probably get this data cleaner – the lagged columns should be specified better, but this will do for now. Let’s at least do something interesting with this data that wouldn’t have been possible without reading data in from the tables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>cpi_data <span class="sc">|&gt;</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Expenditure_category <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Energy"</span>, <span class="st">"Food"</span>, <span class="st">"Shelter"</span>, <span class="st">"Medical care services"</span>, <span class="st">"commodities"</span>, <span class="st">"Transportation services"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Category =</span> <span class="fu">str_replace_all</span>(Expenditure_category, <span class="fu">c</span>(<span class="st">"commodities"</span><span class="ot">=</span> <span class="st">"Non-food Goods"</span>, <span class="st">"Medical care services"</span> <span class="ot">=</span> <span class="st">"Medical"</span>, <span class="st">"Transportation services"</span> <span class="ot">=</span><span class="st">"Transportation"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>           <span class="fu">factor</span>(<span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Shelter"</span>, <span class="st">"Non-food Goods"</span>, <span class="st">"Energy"</span>, <span class="st">"Food"</span>, <span class="st">"Medical"</span>, <span class="st">"Transportation"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Category, report_date, Rel_imp) <span class="sc">|&gt;</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">na.omit</span>() <span class="sc">|&gt;</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> report_date, <span class="at">y =</span> Rel_imp, <span class="at">color =</span> Category)) <span class="sc">+</span> <span class="fu">geom_line</span>() <span class="sc">+</span> </span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Date"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Relative Importance in CPI-U Calculation"</span>) <span class="sc">+</span> </span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_bw</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="06-pdf-tools_files/figure-html/r-cpi-u-calc-pic-1.png" class="img-fluid figure-img" alt="A line chart with date on the x-axis spanning from June 2023 to June 2025 and relative importance in the CPI-U calculation on the y-axis, ranging from approximately 0 to 40%. Six lines are shown: Shelter is the highest and has a slight bump up between March 2024 and January 2025, at which point it returns to approximately 35%. Non-food goods has a corresponding decrease under 20% during the same time span, but also has a slight downward trend during the period. Energy is next at around 13-14%, with a slight increase over the 2 year period. Food, Medical, and transportation costs are all betwen 5 and 8%, with some slight variation during the period." width="2400"></p>
<figcaption>Chart of the relative importance of shelter, goods, energy, food, medical, and transportation costs in the CPI-U calculation.</figcaption>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<!-- ::: {.callout collapse=true} -->
<!-- ###### Debugging Info: Tabula-py {-} -->
<!-- Sometimes the book compilation process decides not to properly find Java from Python (even though R can find it fine, and I can locate it on my machine fine, and I told Python where to find Java...grr).  -->
<!-- This is just a bit of information for debugging purposes. -->
<!-- ```{python} -->
<!-- #| echo: true -->
<!-- #| include: true -->
<!-- import sys -->
<!-- sys.path.append("/usr/lib/jvm/default-java/bin/java") -->
<!-- import tabula -->
<!-- tabula.util.environment_info() -->
<!-- ``` -->
<!-- Regardless of whether the book has the proper output, I've verified that the code in this section runs interactively on my machine. Quarto is just being finicky about using R to call Python to call Java. Which is, from the computer's point of view, an incredibly weird thing to do. -->
<!-- ::: -->
<div class="callout callout-style-simple callout-none no-icon">
<div class="callout-body d-flex">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-body-container">
<p>Note: The chunks of code here are set to not evaluate, because it turns out calling Java from Python from R works fine, but doing it from inside a quarto document might be a step too far. I’ve tested the code on my own machine and it works great, but if you have problems, leave a comment below. If you’d like to have a simple script to run, you can find the one I assembled for debugging <a href="test-tabula.py">here</a>.</p>
</div>
</div>
</div>
<p>If we learned anything from doing this in R, it’s that it probably won’t work the first time. So this code saves a bit of evaluation time by using some of the info we got from R, like the page numbers (I’ve adjusted these to match python indexing).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pdfplumber</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> tabula</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> glob <span class="im">import</span> glob</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>files <span class="op">=</span> glob(<span class="st">"../data/bls-pdfs/*.pdf"</span>)</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> find_page_number(<span class="bu">file</span>):</span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  pdf <span class="op">=</span> pdfplumber.<span class="bu">open</span>(<span class="bu">file</span>)</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>  has_tb1 <span class="op">=</span> [<span class="st">"Table 1"</span> <span class="kw">in</span> i.extract_text() <span class="cf">for</span> i <span class="kw">in</span> pdf.pages]</span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>  pdf.close()</span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="bu">int</span>(np.where(has_tb1)[<span class="dv">0</span>][<span class="dv">0</span>])</span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a><span class="co"># page_numbers = [find_page_number(i) for i in files]</span></span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a><span class="co"># page_numbers = [i[0] for i in page_numbers]</span></span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>page_numbers <span class="op">=</span> [<span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">7</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">9</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">8</span>, <span class="dv">7</span>, <span class="dv">7</span>, <span class="dv">9</span>, <span class="dv">8</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>tables <span class="op">=</span> tabula.io.read_pdf(files[<span class="dv">0</span>], pages<span class="op">=</span>page_numbers[<span class="dv">0</span>]<span class="op">+</span><span class="dv">1</span>)</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co">## NameError: name 'tabula' is not defined</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>tables </span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a><span class="co">## NameError: name 'tables' is not defined</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Ok, so this time, we get 5 columns, which isn’t quite right - it seems as if the major headers are determining the column structure.</p>
<p>Let’s see if we can define the table area and help things out.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>tbl <span class="op">=</span> tabula.io.read_pdf(files[<span class="dv">0</span>], pages<span class="op">=</span>page_numbers[<span class="dv">0</span>]<span class="op">+</span><span class="dv">1</span>, area<span class="op">=</span>[<span class="dv">128</span>, <span class="dv">35</span>, <span class="dv">586</span>, <span class="dv">575</span>], pandas_options<span class="op">=</span>{<span class="st">'header'</span>: <span class="va">None</span>})[<span class="dv">0</span>] </span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>tbl</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-43"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><span id="annotated-cell-43-1"><a href="#annotated-cell-43-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> itertools <span class="im">import</span> chain</span>
<span id="annotated-cell-43-2"><a href="#annotated-cell-43-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd </span>
<span id="annotated-cell-43-3"><a href="#annotated-cell-43-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-43-4"><a href="#annotated-cell-43-4" aria-hidden="true" tabindex="-1"></a>header <span class="op">=</span> tabula.io.read_pdf(files[<span class="dv">0</span>], pages<span class="op">=</span>page_numbers[<span class="dv">0</span>]<span class="op">+</span><span class="dv">1</span>, area<span class="op">=</span>[<span class="dv">89</span>, <span class="dv">35</span>, <span class="dv">128</span>, <span class="dv">575</span>], pandas_options<span class="op">=</span>{<span class="st">'header'</span>: <span class="va">None</span>})[<span class="dv">0</span>]</span>
<span id="annotated-cell-43-5"><a href="#annotated-cell-43-5" aria-hidden="true" tabindex="-1"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-43" data-target-annotation="1">1</button><span id="annotated-cell-43-6" class="code-annotation-target"><a href="#annotated-cell-43-6" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> fix_headers(tbl):</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-43" data-target-annotation="2">2</button><span id="annotated-cell-43-7" class="code-annotation-target"><a href="#annotated-cell-43-7" aria-hidden="true" tabindex="-1"></a>  modifiers<span class="op">=</span>[[<span class="st">""</span>, <span class="st">"Rel_imp."</span>], [<span class="st">"Unadj_idx."</span>]<span class="op">*</span><span class="dv">3</span>, [<span class="st">"Unadj_pct_chg."</span>]<span class="op">*</span><span class="dv">2</span>, [<span class="st">"Seas_adj_pct_chg."</span>]<span class="op">*</span><span class="dv">3</span>]</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-43" data-target-annotation="3">3</button><span id="annotated-cell-43-8" class="code-annotation-target"><a href="#annotated-cell-43-8" aria-hidden="true" tabindex="-1"></a>  modifiers<span class="op">=</span><span class="bu">list</span>(chain.from_iterable(modifiers))</span>
<span id="annotated-cell-43-9"><a href="#annotated-cell-43-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># https://stackoverflow.com/questions/11860476/how-to-unnest-a-nested-list</span></span>
<span id="annotated-cell-43-10"><a href="#annotated-cell-43-10" aria-hidden="true" tabindex="-1"></a>  </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-43" data-target-annotation="4">4</button><span id="annotated-cell-43-11" class="code-annotation-target"><a href="#annotated-cell-43-11" aria-hidden="true" tabindex="-1"></a>  spans<span class="op">=</span>pd.Series([tbl.loc[<span class="dv">0</span>,<span class="dv">0</span>],</span>
<span id="annotated-cell-43-12"><a href="#annotated-cell-43-12" aria-hidden="true" tabindex="-1"></a>  <span class="st">''</span>.join(tbl.loc[<span class="dv">1</span>:<span class="dv">2</span>,<span class="dv">1</span>]),</span>
<span id="annotated-cell-43-13"><a href="#annotated-cell-43-13" aria-hidden="true" tabindex="-1"></a>  <span class="st">''</span>.join(tbl.loc[<span class="dv">1</span>:<span class="dv">2</span>,<span class="dv">2</span>]),</span>
<span id="annotated-cell-43-14"><a href="#annotated-cell-43-14" aria-hidden="true" tabindex="-1"></a>  <span class="st">''</span>.join(tbl.loc[<span class="dv">1</span>:<span class="dv">2</span>,<span class="dv">3</span>]),</span>
<span id="annotated-cell-43-15"><a href="#annotated-cell-43-15" aria-hidden="true" tabindex="-1"></a>  <span class="st">''</span>.join(tbl.loc[<span class="dv">1</span>:<span class="dv">2</span>,<span class="dv">4</span>]),</span>
<span id="annotated-cell-43-16"><a href="#annotated-cell-43-16" aria-hidden="true" tabindex="-1"></a>  <span class="st">''</span>.join(tbl.loc[<span class="dv">0</span>:<span class="dv">3</span>,<span class="dv">5</span>]),</span>
<span id="annotated-cell-43-17"><a href="#annotated-cell-43-17" aria-hidden="true" tabindex="-1"></a>  <span class="st">''</span>.join(tbl.loc[<span class="dv">0</span>:<span class="dv">3</span>,<span class="dv">6</span>]),</span>
<span id="annotated-cell-43-18"><a href="#annotated-cell-43-18" aria-hidden="true" tabindex="-1"></a>  <span class="st">''</span>.join(tbl.loc[<span class="dv">0</span>:<span class="dv">3</span>,<span class="dv">7</span>]),</span>
<span id="annotated-cell-43-19"><a href="#annotated-cell-43-19" aria-hidden="true" tabindex="-1"></a>  <span class="st">''</span>.join(tbl.loc[<span class="dv">0</span>:<span class="dv">3</span>,<span class="dv">8</span>]),</span>
<span id="annotated-cell-43-20"><a href="#annotated-cell-43-20" aria-hidden="true" tabindex="-1"></a>  <span class="st">''</span>.join(tbl.loc[<span class="dv">0</span>:<span class="dv">3</span>,<span class="dv">9</span>])])</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-43" data-target-annotation="5">5</button><span id="annotated-cell-43-21" class="code-annotation-target"><a href="#annotated-cell-43-21" aria-hidden="true" tabindex="-1"></a>  spans<span class="op">=</span>spans.<span class="bu">str</span>.replace(<span class="st">"\."</span>, <span class="st">""</span>, regex <span class="op">=</span> <span class="va">True</span>)</span>
<span id="annotated-cell-43-22"><a href="#annotated-cell-43-22" aria-hidden="true" tabindex="-1"></a>  spans<span class="op">=</span>spans.<span class="bu">str</span>.replace(<span class="st">"[ -]"</span>, <span class="st">"_"</span>, regex <span class="op">=</span> <span class="va">True</span>)</span>
<span id="annotated-cell-43-23"><a href="#annotated-cell-43-23" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="annotated-cell-43-24"><a href="#annotated-cell-43-24" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> modifiers <span class="op">+</span> spans</span>
<span id="annotated-cell-43-25"><a href="#annotated-cell-43-25" aria-hidden="true" tabindex="-1"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-43" data-target-annotation="6">6</button><span id="annotated-cell-43-26" class="code-annotation-target"><a href="#annotated-cell-43-26" aria-hidden="true" tabindex="-1"></a>header <span class="op">=</span> fix_headers(header)</span>
<span id="annotated-cell-43-27"><a href="#annotated-cell-43-27" aria-hidden="true" tabindex="-1"></a>header</span>
<span id="annotated-cell-43-28"><a href="#annotated-cell-43-28" aria-hidden="true" tabindex="-1"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-43" data-target-annotation="7">7</button><span id="annotated-cell-43-29" class="code-annotation-target"><a href="#annotated-cell-43-29" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> read_table_1(<span class="bu">file</span>, page_number):</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-43" data-target-annotation="8">8</button><span id="annotated-cell-43-30" class="code-annotation-target"><a href="#annotated-cell-43-30" aria-hidden="true" tabindex="-1"></a>  tbl    <span class="op">=</span> read_pdf(<span class="bu">file</span>, pages<span class="op">=</span>page_number<span class="op">+</span><span class="dv">1</span>, area<span class="op">=</span>[<span class="dv">128</span>, <span class="dv">35</span>, <span class="dv">586</span>, <span class="dv">575</span>], pandas_options<span class="op">=</span>{<span class="st">'header'</span>: <span class="va">None</span>})[<span class="dv">0</span>]</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-43" data-target-annotation="9">9</button><span id="annotated-cell-43-31" class="code-annotation-target"><a href="#annotated-cell-43-31" aria-hidden="true" tabindex="-1"></a>  header <span class="op">=</span> read_pdf(<span class="bu">file</span>, pages<span class="op">=</span>page_number<span class="op">+</span><span class="dv">1</span>, area<span class="op">=</span>[ <span class="dv">89</span>, <span class="dv">35</span>, <span class="dv">128</span>, <span class="dv">575</span>], pandas_options<span class="op">=</span>{<span class="st">'header'</span>: <span class="va">None</span>})[<span class="dv">0</span>]</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-43" data-target-annotation="10">10</button><span id="annotated-cell-43-32" class="code-annotation-target"><a href="#annotated-cell-43-32" aria-hidden="true" tabindex="-1"></a>  header<span class="op">=</span>fix_headers(header)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-43" data-target-annotation="11">11</button><span id="annotated-cell-43-33" class="code-annotation-target"><a href="#annotated-cell-43-33" aria-hidden="true" tabindex="-1"></a>  tbl <span class="op">=</span> tbl.rename(header, axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="annotated-cell-43-34"><a href="#annotated-cell-43-34" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> tbl</span>
<span id="annotated-cell-43-35"><a href="#annotated-cell-43-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-43-36"><a href="#annotated-cell-43-36" aria-hidden="true" tabindex="-1"></a>tables <span class="op">=</span> [read_table_1(<span class="bu">file</span>, page_numbers[i]) <span class="cf">for</span> i,<span class="bu">file</span> <span class="kw">in</span> <span class="bu">enumerate</span>(files)]</span>
<span id="annotated-cell-43-37"><a href="#annotated-cell-43-37" aria-hidden="true" tabindex="-1"></a>tables[<span class="dv">2</span>]</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-43" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-43" data-code-lines="6" data-code-annotation="1">Define a function to fix header text</span>
</dd>
<dt data-target-cell="annotated-cell-43" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-43" data-code-lines="7" data-code-annotation="2">First, create a nested list of modifiers that will repeat as many times as there are nested columns</span>
</dd>
<dt data-target-cell="annotated-cell-43" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-43" data-code-lines="8" data-code-annotation="3">Unnest the list of modifiers</span>
</dd>
<dt data-target-cell="annotated-cell-43" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-43" data-code-lines="11,12,13,14,15,16,17,18,19,20" data-code-annotation="4">Put the pieces of each header together properly</span>
</dd>
<dt data-target-cell="annotated-cell-43" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-43" data-code-lines="21,22" data-code-annotation="5">Clean up the header pieces a bit</span>
</dd>
<dt data-target-cell="annotated-cell-43" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-43" data-code-lines="26" data-code-annotation="6">Apply the function to one header to see if it works</span>
</dd>
<dt data-target-cell="annotated-cell-43" data-target-annotation="7">7</dt>
<dd>
<span data-code-cell="annotated-cell-43" data-code-lines="29" data-code-annotation="7">Write a function to read table 1 from each report</span>
</dd>
<dt data-target-cell="annotated-cell-43" data-target-annotation="8">8</dt>
<dd>
<span data-code-cell="annotated-cell-43" data-code-lines="30" data-code-annotation="8">First, read the contents of the table</span>
</dd>
<dt data-target-cell="annotated-cell-43" data-target-annotation="9">9</dt>
<dd>
<span data-code-cell="annotated-cell-43" data-code-lines="31" data-code-annotation="9">Then, read in the header from the table</span>
</dd>
<dt data-target-cell="annotated-cell-43" data-target-annotation="10">10</dt>
<dd>
<span data-code-cell="annotated-cell-43" data-code-lines="32" data-code-annotation="10">Fix the header using the <code>fix_header</code> function</span>
</dd>
<dt data-target-cell="annotated-cell-43" data-target-annotation="11">11</dt>
<dd>
<span data-code-cell="annotated-cell-43" data-code-lines="33" data-code-annotation="11">Rename the columns of the table contents with the header values.</span>
</dd>
</dl>
</div>
</div>
<p>Then we just need to clean things up a bit more.</p>
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-44"><pre class="sourceCode python code-annotation-code code-with-copy code-annotated"><code class="sourceCode python"><span id="annotated-cell-44-1"><a href="#annotated-cell-44-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="annotated-cell-44-2"><a href="#annotated-cell-44-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> os</span>
<span id="annotated-cell-44-3"><a href="#annotated-cell-44-3" aria-hidden="true" tabindex="-1"></a> </span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-44" data-target-annotation="1">1</button><span id="annotated-cell-44-4" class="code-annotation-target"><a href="#annotated-cell-44-4" aria-hidden="true" tabindex="-1"></a>report_date <span class="op">=</span> pd.Series([os.path.basename(i) <span class="cf">for</span> i <span class="kw">in</span> files])</span>
<span id="annotated-cell-44-5"><a href="#annotated-cell-44-5" aria-hidden="true" tabindex="-1"></a>report_date <span class="op">=</span> report_date.<span class="bu">str</span>.replace(<span class="st">"cpi_|\.pdf$"</span>, <span class="st">""</span>, regex<span class="op">=</span><span class="va">True</span>)</span>
<span id="annotated-cell-44-6"><a href="#annotated-cell-44-6" aria-hidden="true" tabindex="-1"></a>report_date <span class="op">=</span> pd.to_datetime(report_date, <span class="bu">format</span><span class="op">=</span><span class="st">"%m</span><span class="sc">%d</span><span class="st">%Y"</span>)</span>
<span id="annotated-cell-44-7"><a href="#annotated-cell-44-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-44-8"><a href="#annotated-cell-44-8" aria-hidden="true" tabindex="-1"></a>cpi_data <span class="op">=</span> pd.DataFrame()</span>
<span id="annotated-cell-44-9"><a href="#annotated-cell-44-9" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> i,tbl <span class="kw">in</span> <span class="bu">enumerate</span>(tables):</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-44" data-target-annotation="2">2</button><span id="annotated-cell-44-10" class="code-annotation-target"><a href="#annotated-cell-44-10" aria-hidden="true" tabindex="-1"></a>  tbl[<span class="st">'report_date'</span>] <span class="op">=</span> report_date[i]</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-44" data-target-annotation="3">3</button><span id="annotated-cell-44-11" class="code-annotation-target"><a href="#annotated-cell-44-11" aria-hidden="true" tabindex="-1"></a>  tbl <span class="op">=</span> tbl.melt(id_vars<span class="op">=</span>[<span class="st">'Expenditure_category'</span>, <span class="st">'report_date'</span>], value_name<span class="op">=</span><span class="st">'val'</span>, var_name<span class="op">=</span><span class="st">'var'</span>)</span>
<span id="annotated-cell-44-12"><a href="#annotated-cell-44-12" aria-hidden="true" tabindex="-1"></a>  cols <span class="op">=</span> pd.DataFrame(tbl[<span class="st">'var'</span>].<span class="bu">str</span>.split(<span class="st">"\."</span>).to_list(), columns<span class="op">=</span>[<span class="st">'varname'</span>, <span class="st">'vardate'</span>])</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-44" data-target-annotation="4">4</button><span id="annotated-cell-44-13" class="code-annotation-target"><a href="#annotated-cell-44-13" aria-hidden="true" tabindex="-1"></a>  tbl <span class="op">=</span> pd.concat([tbl, cols], axis <span class="op">=</span> <span class="dv">1</span>)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-44" data-target-annotation="5">5</button><span id="annotated-cell-44-14" class="code-annotation-target"><a href="#annotated-cell-44-14" aria-hidden="true" tabindex="-1"></a>  tbl <span class="op">=</span> tbl.set_index([<span class="st">'report_date'</span>, <span class="st">'Expenditure_category'</span>, <span class="st">'vardate'</span>])</span>
<span id="annotated-cell-44-15"><a href="#annotated-cell-44-15" aria-hidden="true" tabindex="-1"></a>  tbl <span class="op">=</span> tbl.drop([<span class="st">'var'</span>], axis<span class="op">=</span><span class="dv">1</span>)</span>
<span id="annotated-cell-44-16"><a href="#annotated-cell-44-16" aria-hidden="true" tabindex="-1"></a>  tbl_wide <span class="op">=</span> tbl.pivot(columns<span class="op">=</span><span class="st">'varname'</span>, values <span class="op">=</span> <span class="st">'val'</span>)</span>
<span id="annotated-cell-44-17"><a href="#annotated-cell-44-17" aria-hidden="true" tabindex="-1"></a>  tbl_wide <span class="op">=</span> tbl_wide.reset_index()</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-44" data-target-annotation="6">6</button><span id="annotated-cell-44-18" class="code-annotation-target"><a href="#annotated-cell-44-18" aria-hidden="true" tabindex="-1"></a>  cpi_data <span class="op">=</span> pd.concat([cpi_data, tbl_wide], axis<span class="op">=</span><span class="dv">0</span>)</span>
<span id="annotated-cell-44-19"><a href="#annotated-cell-44-19" aria-hidden="true" tabindex="-1"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-44" data-target-annotation="7">7</button><span id="annotated-cell-44-20" class="code-annotation-target"><a href="#annotated-cell-44-20" aria-hidden="true" tabindex="-1"></a>cpi_data[<span class="st">'Expenditure_category'</span>] <span class="op">=</span> cpi_data[<span class="st">'Expenditure_category'</span>].<span class="bu">str</span>.replace(<span class="st">"[ \.]{1,}$"</span>, <span class="st">""</span>, regex<span class="op">=</span><span class="va">True</span>)</span>
<span id="annotated-cell-44-21"><a href="#annotated-cell-44-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="annotated-cell-44-22"><a href="#annotated-cell-44-22" aria-hidden="true" tabindex="-1"></a>cpi_data.shape</span>
<span id="annotated-cell-44-23"><a href="#annotated-cell-44-23" aria-hidden="true" tabindex="-1"></a>cpi_data.head</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-44" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-44" data-code-lines="4,5,6" data-code-annotation="1">Determine the date of the report from the filename</span>
</dd>
<dt data-target-cell="annotated-cell-44" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-44" data-code-lines="10" data-code-annotation="2">Add a column with the corresponding report date to each table</span>
</dd>
<dt data-target-cell="annotated-cell-44" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-44" data-code-lines="11" data-code-annotation="3">Convert each table to long form with expenditure category and report date as ID columns.</span>
</dd>
<dt data-target-cell="annotated-cell-44" data-target-annotation="4">4</dt>
<dd>
<span data-code-cell="annotated-cell-44" data-code-lines="13" data-code-annotation="4">Split the variable names from the period over which the variable is calculated. In theory, we should be able to determine the lag for each of these and not care about the date, but I don’t trust that the report has been that consistent over 2 years… paranoia.</span>
</dd>
<dt data-target-cell="annotated-cell-44" data-target-annotation="5">5</dt>
<dd>
<span data-code-cell="annotated-cell-44" data-code-lines="14,15,16,17" data-code-annotation="5">Pivot wider, so that there’s a column for each variable name.</span>
</dd>
<dt data-target-cell="annotated-cell-44" data-target-annotation="6">6</dt>
<dd>
<span data-code-cell="annotated-cell-44" data-code-lines="18" data-code-annotation="6">Bind all the tables together into a single table</span>
</dd>
<dt data-target-cell="annotated-cell-44" data-target-annotation="7">7</dt>
<dd>
<span data-code-cell="annotated-cell-44" data-code-lines="20" data-code-annotation="7">Clean up the expenditure category names so that the dots are gone.</span>
</dd>
</dl>
</div>
</div>
<p>We could probably get this data cleaner – the lagged columns should be specified better, but this will do for now. Let’s at least do something interesting with this data that wouldn’t have been possible without reading data in from the tables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>tmp <span class="op">=</span> cpi_data.query(<span class="st">"~vardate.str.contains(r'_')"</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a>tmp <span class="op">=</span> tmp.assign(vardate <span class="op">=</span> pd.to_datetime(tmp[<span class="st">'vardate'</span>], <span class="bu">format</span><span class="op">=</span><span class="st">"%b%Y"</span>)) </span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>tmp2 <span class="op">=</span> tmp.query(<span class="st">'Expenditure_category.isin(["Energy", "Food", "Shelter", "Medical care services", "commodities", "Transportation services"])'</span>)</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>tmp2 <span class="op">=</span> tmp2.assign(year <span class="op">=</span> <span class="kw">lambda</span> x: x[<span class="st">'vardate'</span>].dt.year,</span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>                   days <span class="op">=</span> <span class="kw">lambda</span> x: (pd.to_datetime(x[<span class="st">'year'</span>]<span class="op">+</span><span class="dv">1</span>, <span class="bu">format</span><span class="op">=</span><span class="st">'%Y'</span>) <span class="op">-</span> </span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a>                          pd.to_datetime(x[<span class="st">'year'</span>], <span class="bu">format</span><span class="op">=</span><span class="st">'%Y'</span>)).dt.days,</span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>                   var_dec_date <span class="op">=</span> <span class="kw">lambda</span> x: x.year <span class="op">+</span> (x[<span class="st">'vardate'</span>]<span class="op">-</span>pd.to_datetime(x.year, <span class="bu">format</span><span class="op">=</span><span class="st">'%Y'</span>))<span class="op">/</span> (x.days <span class="op">*</span> pd.to_timedelta(<span class="dv">1</span>, unit<span class="op">=</span><span class="st">"D"</span>)))</span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>cat_repl <span class="op">=</span> {<span class="st">'Medical care services'</span>:<span class="st">'Medical'</span>, <span class="st">'commodities'</span>:<span class="st">'Goods'</span>, <span class="st">'Transportation services'</span>:<span class="st">'Transit'</span>}</span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>tmp2<span class="op">=</span>tmp2.rename(columns <span class="op">=</span> {<span class="st">'Expenditure_category'</span>:<span class="st">'Category'</span>, <span class="st">'var_dec_date'</span>: <span class="st">'date'</span>})</span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> old,new <span class="kw">in</span> cat_repl.items():</span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>  tmp2.loc[:,<span class="st">'Category'</span>] <span class="op">=</span> tmp2.Category.<span class="bu">str</span>.replace(old, new, regex<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-16"><a href="#cb30-16" aria-hidden="true" tabindex="-1"></a>tmp_plot <span class="op">=</span> tmp2[[<span class="st">'date'</span>, <span class="st">'Unadj_idx'</span>, <span class="st">'Category'</span>]]</span>
<span id="cb30-17"><a href="#cb30-17" aria-hidden="true" tabindex="-1"></a>tmp_plot <span class="op">=</span> tmp_plot.drop_duplicates()</span>
<span id="cb30-18"><a href="#cb30-18" aria-hidden="true" tabindex="-1"></a>tmp_plot <span class="op">=</span> tmp_plot.assign(Unadj_idx <span class="op">=</span> <span class="kw">lambda</span> x: pd.to_numeric(x.Unadj_idx))</span>
<span id="cb30-19"><a href="#cb30-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-20"><a href="#cb30-20" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn.objects <span class="im">as</span> so</span>
<span id="cb30-21"><a href="#cb30-21" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb30-22"><a href="#cb30-22" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb30-23"><a href="#cb30-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-24"><a href="#cb30-24" aria-hidden="true" tabindex="-1"></a>plot <span class="op">=</span> sns.lineplot(data <span class="op">=</span> tmp_plot, x <span class="op">=</span> <span class="st">'date'</span>, y <span class="op">=</span> <span class="st">'Unadj_idx'</span>, hue <span class="op">=</span> <span class="st">'Category'</span>)</span>
<span id="cb30-25"><a href="#cb30-25" aria-hidden="true" tabindex="-1"></a>plot.<span class="bu">set</span>(xlabel<span class="op">=</span><span class="st">"Date"</span>, ylabel<span class="op">=</span><span class="st">"Unadjusted Index"</span>)</span>
<span id="cb30-26"><a href="#cb30-26" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
</div><div class="no-row-height column-margin column-container"><div class="callout-17-contents callout-collapse collapse callout-margin-content">
<div id="fig-cpi-tab1-screenshot" class="lightbox quarto-float quarto-figure quarto-figure-center anchored" alt="A screenshot of Table 1 of the BLS CPI report showing components of the consumer price index for urban consumers, averaged over US cities.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-cpi-tab1-screenshot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="../images/advanced/bls-cpi-table1-screenshot.png" class="lightbox" data-gallery="quarto-lightbox-gallery-9" title="Figure&nbsp;34.7: A screenshot of Table 1 of the CPI monthly report from December 2023"><img src="../images/advanced/bls-cpi-table1-screenshot.png" class="img-fluid figure-img" alt="A screenshot of Table 1 of the BLS CPI report showing components of the consumer price index for urban consumers, averaged over US cities."></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-cpi-tab1-screenshot-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;34.7: A screenshot of Table 1 of the CPI monthly report from December 2023
</figcaption>
</figure>
</div>
</div><div class="callout-17-contents callout-collapse collapse callout-margin-content">
<div id="fig-tabulapdf-locate-area" class="lightbox quarto-float quarto-figure quarto-figure-center anchored" alt="A screenshot of the `tabulapdf` `locate_area()` function interactive window, showing a highlighted table region.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-tabulapdf-locate-area-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="../images/advanced/tabula-pdf-locate-area.png" class="lightbox" data-gallery="quarto-lightbox-gallery-10" title="Figure&nbsp;34.8: A screenshot of one page of one of the PDFs, showing how locate_areas works."><img src="../images/advanced/tabula-pdf-locate-area.png" class="img-fluid figure-img" alt="A screenshot of the `tabulapdf` `locate_area()` function interactive window, showing a highlighted table region."></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-tabulapdf-locate-area-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;34.8: A screenshot of one page of one of the PDFs, showing how <code>locate_areas</code> works.
</figcaption>
</figure>
</div>
</div></div>
<div class="callout callout-style-default callout-learnmore callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-20-contents" aria-controls="callout-20" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="header-section-number">34.4</span> Other PDF Options to Explore
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-20" class="callout-20-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li><code>parsemypdf</code> <span class="citation" data-cites="srivastavaGenieincodebottleParsemypdf2025"><a href="#ref-srivastavaGenieincodebottleParsemypdf2025" role="doc-biblioref">[17]</a></span>, a collection of AI-based parsing libraries</li>
<li><code>camelot</code>, a python library for table parsing</li>
</ul>
</div>
</div>
</div>
</section>
</section>
<section id="references" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="references">References</h2>


<div id="refs" class="references csl-bib-body" data-entry-spacing="0" role="list">
<div id="ref-klindtPDFConsideredHarmful2017" class="csl-entry" role="listitem">
<div class="csl-left-margin">[1] </div><div class="csl-right-inline">M. Klindt, <span>“<span>PDF</span>/a considered harmful for digital preservation,”</span> in <em><span class="nocase">iPRES</span> 2017 conference proceedings</em>, 2017 [Online]. Available: <a href="https://phaidra.univie.ac.at/o:931063">https://phaidra.univie.ac.at/o:931063</a>. [Accessed: Jul. 15, 2025]</div>
</div>
<div id="ref-edwardsWhyExtractingData2025" class="csl-entry" role="listitem">
<div class="csl-left-margin">[2] </div><div class="csl-right-inline">B. Edwards, <span>“Why extracting data from <span>PDFs</span> is still a nightmare for data experts. Ars technica,”</span> Mar. 11, 2025. [Online]. Available: <a href="https://arstechnica.com/ai/2025/03/why-extracting-data-from-pdfs-is-still-a-nightmare-for-data-experts/">https://arstechnica.com/ai/2025/03/why-extracting-data-from-pdfs-is-still-a-nightmare-for-data-experts/</a>. [Accessed: Jul. 15, 2025]</div>
</div>
<div id="ref-zhangDocumentParsingUnveiled2024" class="csl-entry" role="listitem">
<div class="csl-left-margin">[3] </div><div class="csl-right-inline">Q. Zhang <em>et al.</em>, <span>“Document parsing unveiled: Techniques, challenges, and prospects for structured information extraction.”</span> <span>arXiv</span>, Oct. 28, 2024 [Online]. Available: <a href="http://arxiv.org/abs/2410.21169">http://arxiv.org/abs/2410.21169</a>. [Accessed: Jul. 15, 2025]</div>
</div>
<div id="ref-merrillPurifyingSeaPDF2017" class="csl-entry" role="listitem">
<div class="csl-left-margin">[4] </div><div class="csl-right-inline">J. B. Merrill, <span>“Purifying the sea of <span>PDF</span> data, automatically. Medium,”</span> Jul. 24, 2017. [Online]. Available: <a href="https://open.nytimes.com/purifying-the-sea-of-pdf-data-automatically-99e6043a09b3">https://open.nytimes.com/purifying-the-sea-of-pdf-data-automatically-99e6043a09b3</a>. [Accessed: Jul. 25, 2025]</div>
</div>
<div id="ref-wikimediacontributorsHistoryPDF2024" class="csl-entry" role="listitem">
<div class="csl-left-margin">[5] </div><div class="csl-right-inline">Wikimedia contributors, <span>“History of <span>PDF</span>,”</span> <em>Wikipedia</em>. Oct. 30, 2024 [Online]. Available: <a href="https://en.wikipedia.org/w/index.php?title=History_of_PDF&amp;oldid=1254285186">https://en.wikipedia.org/w/index.php?title=History_of_PDF&amp;oldid=1254285186</a>. [Accessed: Jul. 15, 2025]</div>
</div>
<div id="ref-gnupdfprojectIntroductionPDF2014" class="csl-entry" role="listitem">
<div class="csl-left-margin">[6] </div><div class="csl-right-inline">GNUpdf project, <span>“Introduction to <span>PDF</span>,”</span> Oct. 10, 2014. [Online]. Available: <a href="https://web.archive.org/web/20141010035745/http://gnupdf.org/Introduction_to_PDF">https://web.archive.org/web/20141010035745/http://gnupdf.org/Introduction_to_PDF</a>. [Accessed: Jul. 15, 2025]</div>
</div>
<div id="ref-hodsonPDFSuccinctly2012" class="csl-entry" role="listitem">
<div class="csl-left-margin">[7] </div><div class="csl-right-inline">R. Hodson, <em><span>PDF</span> succinctly</em>. Morrisville, <span>NC</span>: Syncfusion, Inc, 2012 [Online]. Available: <a href="https://web.archive.org/web/20140706124739/http://www.syncfusion.com/Content/downloads/ebook/PDF_Succinctly.pdf">https://web.archive.org/web/20140706124739/http://www.syncfusion.com/Content/downloads/ebook/PDF_Succinctly.pdf</a>. [Accessed: Jul. 15, 2025]</div>
</div>
<div id="ref-kingAdobeIntroductionInsides2005" class="csl-entry" role="listitem">
<div class="csl-left-margin">[8] </div><div class="csl-right-inline">J. C. King, <span>“Adobe: Introduction to the insides of <span>PDF</span>,”</span> Apr. 26, 2005 [Online]. Available: <a href="https://web.archive.org/web/20141212020737/http://www.adobe.com/content/dam/Adobe/en/technology/pdfs/PDF_Day_A_Look_Inside.pdf">https://web.archive.org/web/20141212020737/http://www.adobe.com/content/dam/Adobe/en/technology/pdfs/PDF_Day_A_Look_Inside.pdf</a>. [Accessed: Jul. 15, 2025]</div>
</div>
<div id="ref-singer-vinePdfplumber2025" class="csl-entry" role="listitem">
<div class="csl-left-margin">[9] </div><div class="csl-right-inline">J. Singer-Vine and The pdfplumber contributors, <span>“Pdfplumber.”</span> Jun. 2025 [Online]. Available: <a href="https://github.com/jsvine/pdfplumber">https://github.com/jsvine/pdfplumber</a>. [Accessed: Jul. 15, 2025]</div>
</div>
<div id="ref-oomsPdftoolsTextExtraction2025" class="csl-entry" role="listitem">
<div class="csl-left-margin">[10] </div><div class="csl-right-inline">J. Ooms, <span>“Pdftools: Text extraction, rendering and converting of <span>PDF</span> documents.”</span> <span>rOpenSci</span>, Mar. 03, 2025 [Online]. Available: <a href="https://packages.ropensci.org/pdftools">https://packages.ropensci.org/pdftools</a>. [Accessed: Jul. 16, 2025]</div>
</div>
<div id="ref-weilTesseract2025" class="csl-entry" role="listitem">
<div class="csl-left-margin">[11] </div><div class="csl-right-inline">S. Weil, R. Smith, and Z. Podobny, <span>“Tesseract.”</span> Google, Jul. 18, 2025 [Online]. Available: <a href="https://github.com/tesseract-ocr/tesseract">https://github.com/tesseract-ocr/tesseract</a>. [Accessed: Jul. 18, 2025]</div>
</div>
<div id="ref-leePytesseractPythontesseractPython2024" class="csl-entry" role="listitem">
<div class="csl-left-margin">[12] </div><div class="csl-right-inline">M. A. Lee and S. Hoffstaetter, <span>“Pytesseract: Python-tesseract is a python wrapper for google’s tesseract-<span>OCR</span>.”</span> Aug. 15, 2024 [Online]. Available: <a href="https://github.com/madmaze/pytesseract">https://github.com/madmaze/pytesseract</a>. [Accessed: Jul. 18, 2025]</div>
</div>
<div id="ref-tesseract-r" class="csl-entry" role="listitem">
<div class="csl-left-margin">[13] </div><div class="csl-right-inline">J. Ooms, <span>“Tesseract: Open source OCR engine.”</span> 2025 [Online]. Available: <a href="https://CRAN.R-project.org/package=tesseract">https://CRAN.R-project.org/package=tesseract</a></div>
</div>
<div id="ref-aristaranTabulapdfTabula2025" class="csl-entry" role="listitem">
<div class="csl-left-margin">[14] </div><div class="csl-right-inline">M. Aristarán, M. Tigas, J. B. Merrill, J. Das, D. Frackman, and T. Swicegood, <span>“Tabulapdf/tabula.”</span> Tabula, Jul. 18, 2025 [Online]. Available: <a href="https://github.com/tabulapdf/tabula">https://github.com/tabulapdf/tabula</a>. [Accessed: Jul. 18, 2025]</div>
</div>
<div id="ref-vinayak-mehtaCamelotPDFTable2025" class="csl-entry" role="listitem">
<div class="csl-left-margin">[15] </div><div class="csl-right-inline">vinayak-mehta and bosn, <span>“Camelot: <span>PDF</span> table extraction for humans.”</span> camelot-dev, Jul. 18, 2025 [Online]. Available: <a href="https://github.com/camelot-dev/camelot">https://github.com/camelot-dev/camelot</a>. [Accessed: Jul. 18, 2025]</div>
</div>
<div id="ref-dennisTabulapyVsCamelot2024" class="csl-entry" role="listitem">
<div class="csl-left-margin">[16] </div><div class="csl-right-inline">Y. Dennis, <span>“Tabula-py vs. Camelot: A duel of <span>PDF</span> table extraction titans. Medium,”</span> Mar. 04, 2024. [Online]. Available: <a href="https://python.plainenglish.io/tabula-py-vs-camelot-a-duel-of-pdf-table-extraction-titans-61a534c5134d">https://python.plainenglish.io/tabula-py-vs-camelot-a-duel-of-pdf-table-extraction-titans-61a534c5134d</a>. [Accessed: Jul. 15, 2025]</div>
</div>
<div id="ref-srivastavaGenieincodebottleParsemypdf2025" class="csl-entry" role="listitem">
<div class="csl-left-margin">[17] </div><div class="csl-right-inline">R. Srivastava, <span>“Genieincodebottle/parsemypdf.”</span> Jul. 13, 2025 [Online]. Available: <a href="https://github.com/genieincodebottle/parsemypdf">https://github.com/genieincodebottle/parsemypdf</a>. [Accessed: Jul. 16, 2025]</div>
</div>
</div>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>In the US, the Department of Justice’s <a href="https://www.ada.gov/law-and-regs/regulations/title-ii-2010-regulations/">interpretation of Title II of the Americans with Disabilities Act</a> requires state and government services (including education) to meet digital accessibility standards. Many universities directed professors to shift materials to Word or HTML instead of PDF, as making PDFs accessible requires proprietary Adobe software.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>I actually acquired 3 days worth of transcripts from a single trial, but each day has 200+ pages, so working with only one day seems reasonable.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/srvanderplas\.github\.io\/stat-computing-r-python\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          trigger: 'click',
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          positionFixed: true,
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="srvanderplas/stat-computing-r-python" data-repo-id="R_kgDOIvwd2g" data-category="General" data-category-id="DIC_kwDOIvwd2s4CTksR" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="dark">
<nav class="page-navigation column-body">
  <div class="nav-page nav-page-previous">
      <a href="../part-advanced-topics/05-APIs.html" class="pagination-link" aria-label="Application Programming Interfaces">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Application Programming Interfaces</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../part-advanced-topics/07-intro-interactive-graphics.html" class="pagination-link" aria-label="Animated and Interactive Graphics">
        <span class="nav-page-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Animated and Interactive Graphics</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2025, Susan Vanderplas</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/srvanderplas/stat-computing-r-python/edit/main/part-advanced-topics/06-pdf-tools.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/srvanderplas">
      <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>