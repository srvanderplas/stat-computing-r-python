<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.515">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="dcterms.date" content="2024-09-07">
<title>Statistical Computing using R and Python - 19&nbsp; Exploratory Data Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../part-wrangling/02b-graphics.html" rel="next">
<link href="../part-wrangling/02-basic-data-vis.html" rel="prev">
<link href="../build_deps/favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><script async="" src="https://www.googletagmanager.com/gtag/js?id=G-4ZFBDKXJXP"></script><script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-4ZFBDKXJXP', { 'anonymize_ip': true});
</script><script src="https://kit.fontawesome.com/baac5f0610.js" crossorigin="anonymous"></script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script><link rel="stylesheet" href="../build_deps/style.css">
</head>
<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../part-wrangling/00-wrangling.html">Part III: Data Wrangling</a></li><li class="breadcrumb-item"><a href="../part-wrangling/02a-eda.html"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto"><div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Statistical Computing using R and Python</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/srvanderplas/stat-computing-r-python/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-color-scheme-toggle quarto-navigation-tool  px-1" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../part-tools/00-tools-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part I: Tools</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/01-computer-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Computer Basics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/02-setting-up-computer.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Setting Up Your Computer</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/03-Rstudio-interface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">RStudio’s Interface</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/04-scripts-notebooks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Scripts and Notebooks</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/05-git-and-github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Version Control with Git</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/06-documents.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Reproducibility and Professional Communication</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../part-gen-prog/00-gen-prog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part II: General Programming</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/00-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Introduction to Programming</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/01-basic-var-types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Variables and Basic Data Types</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/02-prog-functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Using Functions and Libraries</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/03-data-struct.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Data Structures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/035-matrix-calcs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Matrix Calculations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/04-control-struct.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Control Structures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/05-functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Writing Functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/06-debugging.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Debugging</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/07-prog-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Programming With Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/99-extra.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Other Helpful Programming Resources</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../part-wrangling/00-wrangling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part III: Data Wrangling</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/01-data-input.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Data Input</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/02-basic-data-vis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Data Visualization Basics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/02a-eda.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/02b-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Data Visualization</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/02c-good-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Creating Good Charts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/03-data-cleaning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Data Cleaning</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/04-strings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Working with Strings</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/05-data-reshape.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Reshaping Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/06-data-join.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Joining Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/07-datetime.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Dates and Times</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/08-functional-prog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Functional Programming</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/09-spatial-formats.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Spatial data</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../part-advanced-topics/00-advanced.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part IV: Advanced Topics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/01-simulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Simulation and Reproducibility</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/06-interactive-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Interactive Graphics</span></span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../graveyard.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Other Topics</span></span></a>
  </div>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Table of contents</h2>
   
  <ul>
<li><a href="#objectives" id="toc-objectives" class="nav-link active" data-scroll-target="#objectives"><span class="header-section-number">19.1</span> <i class="fa-solid fa-bullseye" aria-label="bullseye"></i> Objectives</a></li>
  <li><a href="#package-installation" id="toc-package-installation" class="nav-link" data-scroll-target="#package-installation"><span class="header-section-number">19.2</span> Package Installation</a></li>
  <li><a href="#extra-reading" id="toc-extra-reading" class="nav-link" data-scroll-target="#extra-reading">Extra Reading</a></li>
  <li><a href="#a-note-on-language-philosophies" id="toc-a-note-on-language-philosophies" class="nav-link" data-scroll-target="#a-note-on-language-philosophies"><span class="header-section-number">19.3</span> A Note on Language Philosophies</a></li>
  <li><a href="#generating-eda-questions" id="toc-generating-eda-questions" class="nav-link" data-scroll-target="#generating-eda-questions"><span class="header-section-number">19.4</span> Generating EDA Questions</a></li>
  <li>
<a href="#useful-eda-techniques" id="toc-useful-eda-techniques" class="nav-link" data-scroll-target="#useful-eda-techniques"><span class="header-section-number">19.5</span> Useful EDA Techniques</a>
  <ul class="collapse">
<li><a href="#numerical-summary-statistics" id="toc-numerical-summary-statistics" class="nav-link" data-scroll-target="#numerical-summary-statistics"><span class="header-section-number">19.5.1</span> Numerical Summary Statistics</a></li>
  <li><a href="#assessing-distributions" id="toc-assessing-distributions" class="nav-link" data-scroll-target="#assessing-distributions"><span class="header-section-number">19.5.2</span> Assessing Distributions</a></li>
  <li><a href="#relationships-between-variables" id="toc-relationships-between-variables" class="nav-link" data-scroll-target="#relationships-between-variables"><span class="header-section-number">19.5.3</span> Relationships Between Variables</a></li>
  </ul>
</li>
  <li><a href="#sec-eda-refs" id="toc-sec-eda-refs" class="nav-link" data-scroll-target="#sec-eda-refs"><span class="header-section-number">19.6</span> References</a></li>
  </ul><div class="toc-actions"><ul><li><a href="https://github.com/srvanderplas/stat-computing-r-python/edit/main/part-wrangling/02a-eda.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../part-wrangling/00-wrangling.html">Part III: Data Wrangling</a></li><li class="breadcrumb-item"><a href="../part-wrangling/02a-eda.html"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></a></li></ol></nav><div class="quarto-title">
<h1 class="title"><span id="sec-eda" class="quarto-section-identifier"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></span></h1>
</div>



<div class="quarto-title-meta">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">September 7, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header><section id="objectives" class="level2" data-number="19.1"><h2 data-number="19.1" class="anchored" data-anchor-id="objectives">
<span class="header-section-number">19.1</span> <i class="fa-solid fa-bullseye" aria-label="bullseye"></i> Objectives</h2>
<ul>
<li>Understand the main goals of exploratory data analysis</li>
<li>Generate and answer questions about a new dataset using charts, tables, and numerical summaries</li>
</ul></section><section id="package-installation" class="level2" data-number="19.2"><h2 data-number="19.2" class="anchored" data-anchor-id="package-installation">
<span class="header-section-number">19.2</span> Package Installation</h2>
<p>You will need the <code>plotnine</code>, <code>seaborn</code>, <code>matplotlib</code> (python) and <code>ggplot2</code> (R) packages for this section.</p>
<div class="cell">
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"ggplot2"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>To install plotnine, pick one of the following methods (you can read more about them and decide which is appropriate for you in <span class="quarto-unresolved-ref">?sec-py-pkg-install</span>)</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">System Terminal</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">R Terminal</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Python Terminal</a></li>
</ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode bash code-with-copy"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="ex">pip3</span> install plotnine matplotlib seaborn</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<p>This package installation method requires that you have a virtual environment set up (that is, if you are on Windows, don’t try to install packages this way).</p>
<div class="cell">
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">reticulate</span><span class="fu">::</span><span class="fu"><a href="https://rstudio.github.io/reticulate/reference/py_install.html">py_install</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"plotnine"</span>, <span class="st">"matplotlib"</span>, <span class="st">"seaborn"</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p>In a python chunk (or the python terminal), you can run the following command. This depends on something called “IPython magic” commands, so if it doesn’t work for you, try the System Terminal method instead.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="op">%</span>pip install plotnine matplotlib seaborn</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Once you have run this command, please comment it out so that you don’t reinstall the same packages every time.</p>
</div>
</div>
</div>
</section><section id="extra-reading" class="level2 unnumbered callout-learnmore"><h2 class="unnumbered anchored" data-anchor-id="extra-reading">Extra Reading</h2>
<p><a href="https://r4ds.had.co.nz/exploratory-data-analysis.html">The EDA chapter in R for Data Science</a> <span class="citation" data-cites="r4ds"><a href="#ref-r4ds" role="doc-biblioref">[1]</a></span> is very good at explaining what the goals of EDA are, and what types of questions you will typically need to answer in EDA. Much of the material in this chapter is based at least in part on the R4DS chapter.</p>
</section><p><img src="../images/wrangling/an-EDA-lifecycle.png" class="img-fluid quarto-figure quarto-figure-center" style="width:75.0%" alt="(Image from https://www.mrdbourke.com) The EDA lifecycle starts with data collection and is primarily a cycle between checking data types, assessing distributions, feature engineering, and model iteration. These tasks are supported by summary statistics, visualization, and modeling."><!-- https://www.mrdbourke.com/content/images/size/w1000/2019/09/an-EDA-lifecycle.png --></p>
<p>Major components of Exploratory Data Analysis (EDA):</p>
<ul>
<li>generating questions about your data</li>
<li>look for answers to the questions (visualization, transformation, modeling)</li>
<li>use answers to refine the questions and generate new questions</li>
</ul>
<p>EDA is an iterative process. It is like brainstorming - you start with an idea or question you might have about the data, investigate, and then generate new ideas. EDA is useful even when you are relatively familiar with the type of data you’re working with: in any dataset, it is good to make sure that you know the quality of the data as well as the relationships between the variables in the dataset.</p>
<p>EDA is important because it helps us to know what challenges a particular data set might bring, what we might do with it. Real data is often messy, with large amounts of cleaning that must be done before statistical analysis can commence.</p>
<p>While in many classes you’ll be given mostly clean data, you do need to know how to clean your own data up so that you can use more interesting data sets for projects (and for fun!). EDA is an important component to learning how to work with messy data.</p>
<div class=".callout-note">
<p>In this section, I will mostly be using the plot commands that come with base R/python and require no extra packages. The R for Data Science book <span class="citation" data-cites="r4ds"><a href="#ref-r4ds" role="doc-biblioref">[1]</a></span> shows plot commands which use the <code>ggplot2</code> library. I’ll show you some plots from ggplot here as well, but you don’t have to understand how to generate them yet. We will learn more about ggplot2 later, though if you want to start using it now, you may.</p>
</div>
<section id="a-note-on-language-philosophies" class="level2" data-number="19.3"><h2 data-number="19.3" class="anchored" data-anchor-id="a-note-on-language-philosophies">
<span class="header-section-number">19.3</span> A Note on Language Philosophies</h2>
<p>It is usually relatively easy to get summary statistics from a dataset, but the “flow” of EDA is somewhat different depending on the language patterns.</p>
<blockquote class="blockquote">
<p>You must realize that R is written by experts in statistics and statistical computing who, despite popular opinion, do not believe that everything in SAS and SPSS is worth copying. Some things done in such packages, which trace their roots back to the days of punched cards and magnetic tape when fitting a single linear model may take several days because your first 5 attempts failed due to syntax errors in the JCL or the SAS code, still reflect the approach of “give me every possible statistic that could be calculated from this model, whether or not it makes sense”. The approach taken in R is different. The underlying assumption is that the useR is thinking about the analysis while doing it. – Douglas Bates</p>
</blockquote>
<p>I provide this as a historical artifact, but it does explain the difference between the approach to EDA and model output in R and Python, and the approach in SAS, which you may see in your other statistics classes. This is not (at least, in my opinion) a criticism – the SAS philosophy dates back to the mainframe and punch card days, and the syntax and output still bear evidence of that – but it is worth noting.</p>
<p>In R and in Python, you will have to specify each piece of output you want, but in SAS you will get more than you ever wanted with a single command. Neither approach is wrong, but sometimes one is preferable over the other for a given problem.</p>
</section><section id="generating-eda-questions" class="level2" data-number="19.4"><h2 data-number="19.4" class="anchored" data-anchor-id="generating-eda-questions">
<span class="header-section-number">19.4</span> Generating EDA Questions</h2>
<p>I very much like the two quotes in the <span class="citation" data-cites="r4ds"><a href="#ref-r4ds" role="doc-biblioref">[1]</a></span> section on EDA Questions:</p>
<blockquote class="blockquote">
<p>There are no routine statistical questions, only questionable statistical routines. — Sir David Cox</p>
</blockquote>
<blockquote class="blockquote">
<p>Far better an approximate answer to the right question, which is often vague, than an exact answer to the wrong question, which can always be made precise. — John Tukey</p>
</blockquote>
<p>As statisticians, we are concerned with variability by default. This is also true during EDA: we are interested in variability (or sometimes, lack thereof) in the variables in our dataset, including the co-variability between multiple variables.</p>
<p>We may assess variability using pictures or numerical summaries:</p>
<ul>
<li>histograms or density plots (continuous variables)</li>
<li>column plots (categorical variables)</li>
<li>boxplots</li>
<li>5 number summaries (min, 25%, mean, 75%, max)</li>
<li>tabular data summaries (for categorical variables)</li>
</ul>
<p>In many cases, this gives us a picture of both variability and the “typical” value of our variable.</p>
<p>Sometimes we may also be interested in identifying unusual values: outliers, data entry errors, and other points which don’t conform to our expectations. These unusual values may show up when we generate pictures and the axis limits are much larger than expected.</p>
<p>We also are usually concerned with missing values - in many cases, not all observations are complete, and this missingness can interfere with statistical analyses. It can be helpful to keep track of how much missingness there is in any particular variable and any patterns of missingness that would impact the eventual data analysis<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>.</p>
<p>If you are having trouble getting started on EDA, <span class="citation" data-cites="danielbourkeGentleIntroductionExploratory2019"><a href="#ref-danielbourkeGentleIntroductionExploratory2019" role="doc-biblioref">[3]</a></span> provides a nice checklist to get you thinking:</p>
<blockquote class="blockquote">
<ol type="1">
<li>What question(s) are you trying to solve (or prove wrong)?</li>
<li>What kind of data do you have and how do you treat different types?</li>
<li>What’s missing from the data and how do you deal with it?</li>
<li>Where are the outliers and why should you care about them?</li>
<li>How can you add, change or remove features to get more out of your data?</li>
</ol>
</blockquote>
</section><section id="useful-eda-techniques" class="level2 page-columns page-full" data-number="19.5"><h2 data-number="19.5" class="anchored" data-anchor-id="useful-eda-techniques">
<span class="header-section-number">19.5</span> Useful EDA Techniques</h2>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><a href="https://commons.wikimedia.org/wiki/File:International_Pok%C3%A9mon_logo.svg%22"><img src="../images/wrangling/International_Pokemon_logo.png" class="img-fluid figure-img" alt="Pokemon logo"></a></p>
<figcaption>Nintendo, Creatures, Game Freak, The Pokémon Company, Public domain, via Wikimedia Commons</figcaption></figure>
</div>
</div></div><div class="callout callout-style-default callout-caution callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Example: Generations of Pokemon
</div>
</div>
<div class="callout-body-container callout-body">
<p>Suppose we want to explore Pokemon. There’s not just the original 150 (gotta catch ’em all!) - now there are over 1000! Let’s start out by looking at the proportion of Pokemon added in each of the 9 generations.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">R setup</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Python setup</a></li>
</ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readr.tidyverse.org">readr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://stringr.tidyverse.org">stringr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Setup the data</span></span>
<span><span class="va">poke</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readr.tidyverse.org/reference/read_delim.html">read_csv</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/srvanderplas/datasets/main/clean/pokemon_gen_1-9.csv"</span>, na <span class="op">=</span> <span class="st">'.'</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span><span class="op">(</span>generation <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">gen</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>poke <span class="op">=</span> pd.read_csv(<span class="st">"https://raw.githubusercontent.com/srvanderplas/datasets/main/clean/pokemon_gen_1-9.csv"</span>)</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>poke[<span class="st">'generation'</span>] <span class="op">=</span> pd.Categorical(poke.gen)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
<p>This data has several categorical and continuous variables that should allow for a reasonable demonstration of a number of techniques for exploring data.</p>
<section id="numerical-summary-statistics" class="level3" data-number="19.5.1"><h3 data-number="19.5.1" class="anchored" data-anchor-id="numerical-summary-statistics">
<span class="header-section-number">19.5.1</span> Numerical Summary Statistics</h3>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">R: summary</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Python: describe</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false">R: skimr</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-4" role="tab" aria-controls="tabset-3-4" aria-selected="false">python: skimpy</a></li>
</ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<p>The first, and most basic EDA command in R is <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code>.</p>
<p>For numeric variables, <code>summary</code> provides 5-number summaries plus the mean. For categorical variables, <code>summary</code> provides the length of the variable and the Class and Mode. For factors, <code>summary</code> provides a table of the most common values, as well as a catch-all “other” category.</p>
<div class="cell">
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Make types into factors to demonstrate the difference</span></span>
<span><span class="va">poke</span> <span class="op">&lt;-</span> <span class="fu">tidyr</span><span class="fu">::</span><span class="fu"><a href="https://tidyr.tidyverse.org/reference/separate.html">separate</a></span><span class="op">(</span><span class="va">poke</span>, <span class="va">type</span>, into <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"type_1"</span>, <span class="st">"type_2"</span><span class="op">)</span>, sep <span class="op">=</span> <span class="st">","</span><span class="op">)</span></span>
<span><span class="va">poke</span><span class="op">$</span><span class="va">type_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">poke</span><span class="op">$</span><span class="va">type_1</span><span class="op">)</span></span>
<span><span class="va">poke</span><span class="op">$</span><span class="va">type_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">poke</span><span class="op">$</span><span class="va">type_2</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">poke</span><span class="op">)</span></span>
<span><span class="co">##       gen          pokedex_no       img_link             name          </span></span>
<span><span class="co">##  Min.   :1.000   Min.   :   1.0   Length:1526        Length:1526       </span></span>
<span><span class="co">##  1st Qu.:2.000   1st Qu.: 226.2   Class :character   Class :character  </span></span>
<span><span class="co">##  Median :4.000   Median : 484.0   Mode  :character   Mode  :character  </span></span>
<span><span class="co">##  Mean   :4.478   Mean   : 487.9                                        </span></span>
<span><span class="co">##  3rd Qu.:7.000   3rd Qu.: 726.8                                        </span></span>
<span><span class="co">##  Max.   :9.000   Max.   :1008.0                                        </span></span>
<span><span class="co">##                                                                        </span></span>
<span><span class="co">##    variant               type_1        type_2        total       </span></span>
<span><span class="co">##  Length:1526        Water   :179   Flying :157   Min.   : 175.0  </span></span>
<span><span class="co">##  Class :character   Normal  :156   Psychic: 61   1st Qu.: 345.8  </span></span>
<span><span class="co">##  Mode  :character   Psychic :123   Ghost  : 57   Median : 475.0  </span></span>
<span><span class="co">##                     Electric:119   Ground : 57   Mean   : 450.3  </span></span>
<span><span class="co">##                     Grass   :113   Steel  : 55   3rd Qu.: 525.0  </span></span>
<span><span class="co">##                     Bug     :107   (Other):466   Max.   :1125.0  </span></span>
<span><span class="co">##                     (Other) :729   NA's   :673                   </span></span>
<span><span class="co">##        hp             attack          defense         sp_attack     </span></span>
<span><span class="co">##  Min.   :  1.00   Min.   :  5.00   Min.   :  5.00   Min.   : 10.00  </span></span>
<span><span class="co">##  1st Qu.: 50.25   1st Qu.: 60.00   1st Qu.: 55.00   1st Qu.: 50.00  </span></span>
<span><span class="co">##  Median : 70.00   Median : 80.00   Median : 70.00   Median : 70.00  </span></span>
<span><span class="co">##  Mean   : 71.18   Mean   : 82.05   Mean   : 75.66   Mean   : 75.05  </span></span>
<span><span class="co">##  3rd Qu.: 85.00   3rd Qu.:100.00   3rd Qu.: 95.00   3rd Qu.: 98.00  </span></span>
<span><span class="co">##  Max.   :255.00   Max.   :190.00   Max.   :250.00   Max.   :194.00  </span></span>
<span><span class="co">##                                                                     </span></span>
<span><span class="co">##    sp_defense         speed         species             height_m     </span></span>
<span><span class="co">##  Min.   : 20.00   Min.   :  5.0   Length:1526        Min.   : 0.100  </span></span>
<span><span class="co">##  1st Qu.: 55.00   1st Qu.: 50.0   Class :character   1st Qu.: 0.500  </span></span>
<span><span class="co">##  Median : 70.00   Median : 70.0   Mode  :character   Median : 1.000  </span></span>
<span><span class="co">##  Mean   : 73.84   Mean   : 72.5                      Mean   : 1.233  </span></span>
<span><span class="co">##  3rd Qu.: 90.00   3rd Qu.: 95.0                      3rd Qu.: 1.500  </span></span>
<span><span class="co">##  Max.   :250.00   Max.   :200.0                      Max.   :20.000  </span></span>
<span><span class="co">##                                                                      </span></span>
<span><span class="co">##    weight_kg        generation </span></span>
<span><span class="co">##  Min.   :  0.10   1      :285  </span></span>
<span><span class="co">##  1st Qu.:  8.00   5      :237  </span></span>
<span><span class="co">##  Median : 29.25   3      :193  </span></span>
<span><span class="co">##  Mean   : 68.25   4      :178  </span></span>
<span><span class="co">##  3rd Qu.: 78.50   8      :134  </span></span>
<span><span class="co">##  Max.   :999.90   7      :133  </span></span>
<span><span class="co">##                   (Other):366</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>One common question in EDA is whether there are missing values or other inconsistencies that need to be handled. <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> provides you with the NA count for each variable, making it easy to identify what variables are likely to cause problems in an analysis. We can see in this summary that 673 pokemon don’t have a second type.</p>
<p>We also look for extreme values. There is at least one pokemon who appears to have a weight of 999.90 kg. Let’s investigate further:</p>
<div class="cell">
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">poke</span><span class="op">[</span><span class="va">poke</span><span class="op">$</span><span class="va">weight_kg</span> <span class="op">&gt;</span> <span class="fl">999</span>,<span class="op">]</span> </span>
<span><span class="co">## # A tibble: 2 × 18</span></span>
<span><span class="co">##     gen pokedex_no img_link       name  variant type_1 type_2 total    hp attack</span></span>
<span><span class="co">##   &lt;dbl&gt;      &lt;dbl&gt; &lt;chr&gt;          &lt;chr&gt; &lt;chr&gt;   &lt;fct&gt;  &lt;fct&gt;  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span><span class="co">## 1     7        790 https://img.p… Cosm… NA      Psych… &lt;NA&gt;     400    43     29</span></span>
<span><span class="co">## 2     7        797 https://img.p… Cele… NA      Steel  Flying   570    97    101</span></span>
<span><span class="co">## # ℹ 8 more variables: defense &lt;dbl&gt;, sp_attack &lt;dbl&gt;, sp_defense &lt;dbl&gt;,</span></span>
<span><span class="co">## #   speed &lt;dbl&gt;, species &lt;chr&gt;, height_m &lt;dbl&gt;, weight_kg &lt;dbl&gt;,</span></span>
<span><span class="co">## #   generation &lt;fct&gt;</span></span>
<span><span class="co"># Show any rows where weight_kg is extreme</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>This is the last row of our data frame, and this pokemon appears to have many missing values.</p>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<p>The most basic EDA command in pandas is <code>df.describe()</code> (which operates on a DataFrame named <code>df</code>). Like <code><a href="https://rdrr.io/r/base/summary.html">summary()</a></code> in R, <code>describe()</code> provides a 5-number summary for numeric variables. For categorical variables, <code>describe()</code> provides the number of unique values, the most common value, and the frequency of that common value.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Split types into two columns</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>poke[[<span class="st">'type_1'</span>, <span class="st">'type_2'</span>]] <span class="op">=</span> poke.<span class="bu">type</span>.<span class="bu">str</span>.split(<span class="st">","</span>, expand <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Make each one categorical</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>poke[<span class="st">'type_1'</span>] <span class="op">=</span> pd.Categorical(poke.type_1)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>poke[<span class="st">'type_2'</span>] <span class="op">=</span> pd.Categorical(poke.type_2)</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>poke.iloc[:,:].describe() <span class="co"># describe only shows numeric variables by default</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a><span class="co">##                gen   pokedex_no  ...     height_m    weight_kg</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">## count  1526.000000  1526.000000  ...  1526.000000  1526.000000</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a><span class="co">## mean      4.477720   487.863041  ...     1.232962    68.249607</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a><span class="co">## std       2.565182   290.328644  ...     1.289446   121.828015</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a><span class="co">## min       1.000000     1.000000  ...     0.100000     0.100000</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a><span class="co">## 25%       2.000000   226.250000  ...     0.500000     8.000000</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a><span class="co">## 50%       4.000000   484.000000  ...     1.000000    29.250000</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a><span class="co">## 75%       7.000000   726.750000  ...     1.500000    78.500000</span></span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a><span class="co">## max       9.000000  1008.000000  ...    20.000000   999.900000</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a><span class="co">## [8 rows x 11 columns]</span></span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a><span class="co"># You can get categorical variables too if that's all you give it to show</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>poke[<span class="st">'type_1'</span>].describe()</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a><span class="co">## count      1526</span></span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a><span class="co">## unique       18</span></span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a><span class="co">## top       Water</span></span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a><span class="co">## freq        179</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a><span class="co">## Name: type_1, dtype: object</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>poke[<span class="st">'type_2'</span>].describe()</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a><span class="co">## count        853</span></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a><span class="co">## unique        18</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a><span class="co">## top       Flying</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a><span class="co">## freq         157</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a><span class="co">## Name: type_2, dtype: object</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<p>An R package that is incredibly useful for this type of dataset exploration is <code>skimr</code>.</p>
<div class="cell">
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/skimr/">skimr</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/skimr/reference/skim.html">skim</a></span><span class="op">(</span><span class="va">poke</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">poke</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">1526</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">18</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">4</td>
</tr>
<tr class="odd">
<td style="text-align: left;">factor</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">11</td>
</tr>
<tr class="odd">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 19%">
<col style="width: 13%">
<col style="width: 19%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 12%">
<col style="width: 15%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">img_link</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">59</td>
<td style="text-align: right;">84</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1192</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">name</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">12</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1008</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">variant</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">22</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">105</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">species</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">11</td>
<td style="text-align: right;">21</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">708</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: factor</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 14%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 8%">
<col style="width: 9%">
<col style="width: 41%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: left;">ordered</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: left;">top_counts</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">type_1</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">18</td>
<td style="text-align: left;">Wat: 179, Nor: 156, Psy: 123, Ele: 119</td>
</tr>
<tr class="even">
<td style="text-align: left;">type_2</td>
<td style="text-align: right;">673</td>
<td style="text-align: right;">0.56</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">18</td>
<td style="text-align: left;">Fly: 157, Psy: 61, Gho: 57, Gro: 57</td>
</tr>
<tr class="odd">
<td style="text-align: left;">generation</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: left;">FALSE</td>
<td style="text-align: right;">9</td>
<td style="text-align: left;">1: 285, 5: 237, 3: 193, 4: 178</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 15%">
<col style="width: 10%">
<col style="width: 15%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 7%">
<col style="width: 6%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">gen</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">4.48</td>
<td style="text-align: right;">2.57</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">2.00</td>
<td style="text-align: right;">4.00</td>
<td style="text-align: right;">7.00</td>
<td style="text-align: right;">9.0</td>
<td style="text-align: left;">▇▇▅▅▅</td>
</tr>
<tr class="even">
<td style="text-align: left;">pokedex_no</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">487.86</td>
<td style="text-align: right;">290.33</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">226.25</td>
<td style="text-align: right;">484.00</td>
<td style="text-align: right;">726.75</td>
<td style="text-align: right;">1008.0</td>
<td style="text-align: left;">▇▆▇▇▆</td>
</tr>
<tr class="odd">
<td style="text-align: left;">total</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">450.29</td>
<td style="text-align: right;">120.59</td>
<td style="text-align: right;">175.0</td>
<td style="text-align: right;">345.75</td>
<td style="text-align: right;">475.00</td>
<td style="text-align: right;">525.00</td>
<td style="text-align: right;">1125.0</td>
<td style="text-align: left;">▅▇▂▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">hp</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">71.18</td>
<td style="text-align: right;">26.53</td>
<td style="text-align: right;">1.0</td>
<td style="text-align: right;">50.25</td>
<td style="text-align: right;">70.00</td>
<td style="text-align: right;">85.00</td>
<td style="text-align: right;">255.0</td>
<td style="text-align: left;">▃▇▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">attack</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">82.05</td>
<td style="text-align: right;">32.41</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">60.00</td>
<td style="text-align: right;">80.00</td>
<td style="text-align: right;">100.00</td>
<td style="text-align: right;">190.0</td>
<td style="text-align: left;">▂▇▇▂▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">defense</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">75.66</td>
<td style="text-align: right;">30.21</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">55.00</td>
<td style="text-align: right;">70.00</td>
<td style="text-align: right;">95.00</td>
<td style="text-align: right;">250.0</td>
<td style="text-align: left;">▃▇▂▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">sp_attack</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">75.05</td>
<td style="text-align: right;">33.88</td>
<td style="text-align: right;">10.0</td>
<td style="text-align: right;">50.00</td>
<td style="text-align: right;">70.00</td>
<td style="text-align: right;">98.00</td>
<td style="text-align: right;">194.0</td>
<td style="text-align: left;">▅▇▅▂▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">sp_defense</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">73.84</td>
<td style="text-align: right;">27.72</td>
<td style="text-align: right;">20.0</td>
<td style="text-align: right;">55.00</td>
<td style="text-align: right;">70.00</td>
<td style="text-align: right;">90.00</td>
<td style="text-align: right;">250.0</td>
<td style="text-align: left;">▇▇▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">speed</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">72.50</td>
<td style="text-align: right;">30.74</td>
<td style="text-align: right;">5.0</td>
<td style="text-align: right;">50.00</td>
<td style="text-align: right;">70.00</td>
<td style="text-align: right;">95.00</td>
<td style="text-align: right;">200.0</td>
<td style="text-align: left;">▃▇▆▁▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">height_m</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1.23</td>
<td style="text-align: right;">1.29</td>
<td style="text-align: right;">0.1</td>
<td style="text-align: right;">0.50</td>
<td style="text-align: right;">1.00</td>
<td style="text-align: right;">1.50</td>
<td style="text-align: right;">20.0</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">weight_kg</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">68.25</td>
<td style="text-align: right;">121.83</td>
<td style="text-align: right;">0.1</td>
<td style="text-align: right;">8.00</td>
<td style="text-align: right;">29.25</td>
<td style="text-align: right;">78.50</td>
<td style="text-align: right;">999.9</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
</tbody>
</table>
</div>
</div>
<p><code>skim</code> provides a beautiful table of summary statistics along with a sparklines-style histogram of values, giving you a sneak peek at the distribution.</p>
</div>
<div id="tabset-3-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-4-tab">
<p>There is a similar package to <code>skimr</code> in R called <code>skimpy</code> in Python.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> skimpy <span class="im">import</span> skim</span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>skim(poke)</span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a><span class="co">## ╭─────────────────────────────── skimpy summary ───────────────────────────────╮</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">## │          Data Summary                Data Types                              │</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┏━━━━━━━━━━━━━━━━━━━┳━━━━━━━━┓ ┏━━━━━━━━━━━━━┳━━━━━━━┓                       │</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┃ dataframe         ┃ Values ┃ ┃ Column Type ┃ Count ┃                       │</span></span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┡━━━━━━━━━━━━━━━━━━━╇━━━━━━━━┩ ┡━━━━━━━━━━━━━╇━━━━━━━┩                       │</span></span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ Number of rows    │ 1526   │ │ int64       │ 9     │                       │</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ Number of columns │ 19     │ │ string      │ 5     │                       │</span></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a><span class="co">## │ └───────────────────┴────────┘ │ category    │ 3     │                       │</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a><span class="co">## │                                │ float64     │ 2     │                       │</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a><span class="co">## │                                └─────────────┴───────┘                       │</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a><span class="co">## │        Categories                                                            │</span></span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┏━━━━━━━━━━━━━━━━━━━━━━━┓                                                    │</span></span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┃ Categorical Variables ┃                                                    │</span></span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┡━━━━━━━━━━━━━━━━━━━━━━━┩                                                    │</span></span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ generation            │                                                    │</span></span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ type_1                │                                                    │</span></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ type_2                │                                                    │</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a><span class="co">## │ └───────────────────────┘                                                    │</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a><span class="co">## │                                   number                                     │</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┏━━━━━━━━┳━━━━┳━━━━━━┳━━━━━━┳━━━━━┳━━━━━┳━━━━━┳━━━━━┳━━━━━┳━━━━━━┳━━━━━━━━┓  │</span></span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┃ column ┃    ┃      ┃      ┃     ┃     ┃     ┃     ┃     ┃      ┃        ┃  │</span></span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┃ _name  ┃ NA ┃ NA % ┃ mean ┃ sd  ┃ p0  ┃ p25 ┃ p50 ┃ p75 ┃ p100 ┃ hist   ┃  │</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┡━━━━━━━━╇━━━━╇━━━━━━╇━━━━━━╇━━━━━╇━━━━━╇━━━━━╇━━━━━╇━━━━━╇━━━━━━╇━━━━━━━━┩  │</span></span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ gen    │  0 │    0 │  4.5 │ 2.6 │   1 │   2 │   4 │   7 │    9 │ ▇▃▃▇▃▅ │  │</span></span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ pokede │  0 │    0 │  490 │ 290 │   1 │ 230 │ 480 │ 730 │ 1000 │ ▇▅▇▇▆▆ │  │</span></span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ x_no   │    │      │      │     │     │     │     │     │      │        │  │</span></span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ total  │  0 │    0 │  450 │ 120 │ 180 │ 350 │ 480 │ 520 │ 1100 │  ▅▇▇▁  │  │</span></span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ hp     │  0 │    0 │   71 │  27 │   1 │  50 │  70 │  85 │  260 │  ▁▇▃   │  │</span></span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ attack │  0 │    0 │   82 │  32 │   5 │  60 │  80 │ 100 │  190 │ ▂▇▇▆▂▁ │  │</span></span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ defens │  0 │    0 │   76 │  30 │   5 │  55 │  70 │  95 │  250 │  ▂▇▅▁  │  │</span></span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ e      │    │      │      │     │     │     │     │     │      │        │  │</span></span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ sp_att │  0 │    0 │   75 │  34 │  10 │  50 │  70 │  98 │  190 │ ▅▇▆▃▁  │  │</span></span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ ack    │    │      │      │     │     │     │     │     │      │        │  │</span></span>
<span id="cb11-36"><a href="#cb11-36" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ sp_def │  0 │    0 │   74 │  28 │  20 │  55 │  70 │  90 │  250 │  ▅▇▃   │  │</span></span>
<span id="cb11-37"><a href="#cb11-37" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ ense   │    │      │      │     │     │     │     │     │      │        │  │</span></span>
<span id="cb11-38"><a href="#cb11-38" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ speed  │  0 │    0 │   73 │  31 │   5 │  50 │  70 │  95 │  200 │ ▃▆▇▂▁  │  │</span></span>
<span id="cb11-39"><a href="#cb11-39" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ height │  0 │    0 │  1.2 │ 1.3 │ 0.1 │ 0.5 │   1 │ 1.5 │   20 │   ▇    │  │</span></span>
<span id="cb11-40"><a href="#cb11-40" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ _m     │    │      │      │     │     │     │     │     │      │        │  │</span></span>
<span id="cb11-41"><a href="#cb11-41" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ weight │  0 │    0 │   68 │ 120 │ 0.1 │   8 │  29 │  78 │ 1000 │   ▇▁   │  │</span></span>
<span id="cb11-42"><a href="#cb11-42" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ _kg    │    │      │      │     │     │     │     │     │      │        │  │</span></span>
<span id="cb11-43"><a href="#cb11-43" aria-hidden="true" tabindex="-1"></a><span class="co">## │ └────────┴────┴──────┴──────┴─────┴─────┴─────┴─────┴─────┴──────┴────────┘  │</span></span>
<span id="cb11-44"><a href="#cb11-44" aria-hidden="true" tabindex="-1"></a><span class="co">## │                                  category                                    │</span></span>
<span id="cb11-45"><a href="#cb11-45" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┏━━━━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━┳━━━━━━━━━━┳━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━┓  │</span></span>
<span id="cb11-46"><a href="#cb11-46" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┃ column_name          ┃ NA      ┃ NA %     ┃ ordered       ┃ unique      ┃  │</span></span>
<span id="cb11-47"><a href="#cb11-47" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┡━━━━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━╇━━━━━━━━━━╇━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━┩  │</span></span>
<span id="cb11-48"><a href="#cb11-48" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ generation           │       0 │        0 │ False         │           9 │  │</span></span>
<span id="cb11-49"><a href="#cb11-49" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ type_1               │       0 │        0 │ False         │          18 │  │</span></span>
<span id="cb11-50"><a href="#cb11-50" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ type_2               │     673 │     44.1 │ False         │          19 │  │</span></span>
<span id="cb11-51"><a href="#cb11-51" aria-hidden="true" tabindex="-1"></a><span class="co">## │ └──────────────────────┴─────────┴──────────┴───────────────┴─────────────┘  │</span></span>
<span id="cb11-52"><a href="#cb11-52" aria-hidden="true" tabindex="-1"></a><span class="co">## │                                   string                                     │</span></span>
<span id="cb11-53"><a href="#cb11-53" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┏━━━━━━━━━━━━━━━━━┳━━━━━━━━┳━━━━━━━━━┳━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━┓  │</span></span>
<span id="cb11-54"><a href="#cb11-54" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┃ column_name     ┃ NA     ┃ NA %    ┃ words per row     ┃ total words    ┃  │</span></span>
<span id="cb11-55"><a href="#cb11-55" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┡━━━━━━━━━━━━━━━━━╇━━━━━━━━╇━━━━━━━━━╇━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━┩  │</span></span>
<span id="cb11-56"><a href="#cb11-56" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ img_link        │      0 │       0 │                 1 │           1526 │  │</span></span>
<span id="cb11-57"><a href="#cb11-57" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ name            │      0 │       0 │                 1 │           1551 │  │</span></span>
<span id="cb11-58"><a href="#cb11-58" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ variant         │   1071 │   70.18 │              0.39 │            598 │  │</span></span>
<span id="cb11-59"><a href="#cb11-59" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ type            │      0 │       0 │                 1 │           1526 │  │</span></span>
<span id="cb11-60"><a href="#cb11-60" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ species         │      0 │       0 │               2.3 │           3469 │  │</span></span>
<span id="cb11-61"><a href="#cb11-61" aria-hidden="true" tabindex="-1"></a><span class="co">## │ └─────────────────┴────────┴─────────┴───────────────────┴────────────────┘  │</span></span>
<span id="cb11-62"><a href="#cb11-62" aria-hidden="true" tabindex="-1"></a><span class="co">## ╰──────────────────────────────────── End ─────────────────────────────────────╯</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section><section id="assessing-distributions" class="level3" data-number="19.5.2"><h3 data-number="19.5.2" class="anchored" data-anchor-id="assessing-distributions">
<span class="header-section-number">19.5.2</span> Assessing Distributions</h3>
<p>We are often also interested in the distribution of values.</p>
<section id="categorical-variables" class="level4" data-number="19.5.2.1"><h4 data-number="19.5.2.1" class="anchored" data-anchor-id="categorical-variables">
<span class="header-section-number">19.5.2.1</span> Categorical Variables</h4>
<p>One useful way to assess the distribution of values is to generate a cross-tabular view of the data. This is mostly important for variables with a relatively low number of categories - otherwise, it is usually easier to use a graphical summary method.</p>
<section id="tabular-summaries" class="level5 unnumbered"><h5 class="unnumbered anchored" data-anchor-id="tabular-summaries">Tabular Summaries</h5>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">R</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Python</a></li>
</ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<p>We can generate cross-tabs for variables that we know are discrete (such as generation, which will always be a whole number). We can even generate cross-tabular views for a combination of two variables (or theoretically more, but this gets hard to read and track).</p>
<div class="cell">
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">poke</span><span class="op">$</span><span class="va">generation</span><span class="op">)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   1   2   3   4   5   6   7   8   9 </span></span>
<span><span class="co">## 285 124 193 178 237 119 133 134 123</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">poke</span><span class="op">$</span><span class="va">type_1</span>, <span class="va">poke</span><span class="op">$</span><span class="va">type_2</span><span class="op">)</span></span>
<span><span class="co">##           </span></span>
<span><span class="co">##            Bug Dark Dragon Electric Fairy Fighting Fire Flying Ghost Grass</span></span>
<span><span class="co">##   Bug        0    1      0        4     2        5    2     14     1     8</span></span>
<span><span class="co">##   Dark       0    0      4        0     3        2    4      8     2     2</span></span>
<span><span class="co">##   Dragon     0    1      0        1     1        2    1      6     3     0</span></span>
<span><span class="co">##   Electric   0    4      3        0     2        2    6     19     6    10</span></span>
<span><span class="co">##   Fairy      0    0      0        0     0        1    0      6     0     0</span></span>
<span><span class="co">##   Fighting   0    3      1        1     0        0    4      3     2     0</span></span>
<span><span class="co">##   Fire       2    1      2        0     0        7    0     11     7     0</span></span>
<span><span class="co">##   Flying     0    1      2        0     0        1    0      0     0     0</span></span>
<span><span class="co">##   Ghost      0    1      4        0     3        0    3      6     0    11</span></span>
<span><span class="co">##   Grass      0    5      6        0     5        7    1      8     4     0</span></span>
<span><span class="co">##   Ground     0    3      2        2     0        1    1      6     5     2</span></span>
<span><span class="co">##   Ice        2    0      0        0     2        0    4      3     1     0</span></span>
<span><span class="co">##   Normal     0    0      1        0     5        5    0     33     4     8</span></span>
<span><span class="co">##   Poison     1    7      4        0     2        3    2      3     0     0</span></span>
<span><span class="co">##   Psychic    0    2      3        0    11        3    1     14     9     4</span></span>
<span><span class="co">##   Rock       2    2      2        7     3        1    2      8     0     2</span></span>
<span><span class="co">##   Steel      0    0      9        0     4        1    0      2     7     0</span></span>
<span><span class="co">##   Water      2    9      6        2     4        6    0      7     6     3</span></span>
<span><span class="co">##           </span></span>
<span><span class="co">##            Ground Ice Normal Poison Psychic Rock Steel Water</span></span>
<span><span class="co">##   Bug           4   0      0     12       3    4    13     3</span></span>
<span><span class="co">##   Dark          1   4      9      3       2    0     3     0</span></span>
<span><span class="co">##   Dragon       13  12      1      0       4    0     0     9</span></span>
<span><span class="co">##   Electric      1   7      2      5       2    0     4     6</span></span>
<span><span class="co">##   Fairy         0   0      0      0       1    0     5     0</span></span>
<span><span class="co">##   Fighting      0   1      0      2       3    0     4     6</span></span>
<span><span class="co">##   Fire          3   0      2      1       6    5     1     1</span></span>
<span><span class="co">##   Flying        0   0      0      0       0    0     1     3</span></span>
<span><span class="co">##   Ghost         2   0      0      4       0    0     0     0</span></span>
<span><span class="co">##   Grass         1   3      3     15       3    0     3     0</span></span>
<span><span class="co">##   Ground        0   0      1      0       2    3     8     0</span></span>
<span><span class="co">##   Ice           3   0      0      0       5    2     4     4</span></span>
<span><span class="co">##   Normal        1   0      0      0       6    0     0     1</span></span>
<span><span class="co">##   Poison        5   0      2      0       4    0     0     3</span></span>
<span><span class="co">##   Psychic       0   3      4      0       0    0     4     0</span></span>
<span><span class="co">##   Rock          9   2      0      3       2    0     4     6</span></span>
<span><span class="co">##   Steel         2   0      0      2       7    3     0     0</span></span>
<span><span class="co">##   Water        12   4      0      4      11    6     1     0</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="co"># For only one factor, use .groupby('colname')['colname'].count()</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>poke.groupby([<span class="st">'generation'</span>])[<span class="st">'generation'</span>].count()</span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="co">## generation</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a><span class="co">## 1    285</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a><span class="co">## 2    124</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="co">## 3    193</span></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a><span class="co">## 4    178</span></span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 5    237</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a><span class="co">## 6    119</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a><span class="co">## 7    133</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a><span class="co">## 8    134</span></span>
<span id="cb13-13"><a href="#cb13-13" aria-hidden="true" tabindex="-1"></a><span class="co">## 9    123</span></span>
<span id="cb13-14"><a href="#cb13-14" aria-hidden="true" tabindex="-1"></a><span class="co">## Name: generation, dtype: int64</span></span>
<span id="cb13-15"><a href="#cb13-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-16"><a href="#cb13-16" aria-hidden="true" tabindex="-1"></a><span class="co"># for two or more factors, use pd.crosstab</span></span>
<span id="cb13-17"><a href="#cb13-17" aria-hidden="true" tabindex="-1"></a>pd.crosstab(index <span class="op">=</span> poke[<span class="st">'type_1'</span>], columns <span class="op">=</span> poke[<span class="st">'type_2'</span>])</span>
<span id="cb13-18"><a href="#cb13-18" aria-hidden="true" tabindex="-1"></a><span class="co">## type_2    Bug  Dark  Dragon  Electric  ...  Psychic  Rock  Steel  Water</span></span>
<span id="cb13-19"><a href="#cb13-19" aria-hidden="true" tabindex="-1"></a><span class="co">## type_1                                 ...                             </span></span>
<span id="cb13-20"><a href="#cb13-20" aria-hidden="true" tabindex="-1"></a><span class="co">## Bug         0     1       0         4  ...        3     4     13      3</span></span>
<span id="cb13-21"><a href="#cb13-21" aria-hidden="true" tabindex="-1"></a><span class="co">## Dark        0     0       4         0  ...        2     0      3      0</span></span>
<span id="cb13-22"><a href="#cb13-22" aria-hidden="true" tabindex="-1"></a><span class="co">## Dragon      0     1       0         1  ...        4     0      0      9</span></span>
<span id="cb13-23"><a href="#cb13-23" aria-hidden="true" tabindex="-1"></a><span class="co">## Electric    0     4       3         0  ...        2     0      4      6</span></span>
<span id="cb13-24"><a href="#cb13-24" aria-hidden="true" tabindex="-1"></a><span class="co">## Fairy       0     0       0         0  ...        1     0      5      0</span></span>
<span id="cb13-25"><a href="#cb13-25" aria-hidden="true" tabindex="-1"></a><span class="co">## Fighting    0     3       1         1  ...        3     0      4      6</span></span>
<span id="cb13-26"><a href="#cb13-26" aria-hidden="true" tabindex="-1"></a><span class="co">## Fire        2     1       2         0  ...        6     5      1      1</span></span>
<span id="cb13-27"><a href="#cb13-27" aria-hidden="true" tabindex="-1"></a><span class="co">## Flying      0     1       2         0  ...        0     0      1      3</span></span>
<span id="cb13-28"><a href="#cb13-28" aria-hidden="true" tabindex="-1"></a><span class="co">## Ghost       0     1       4         0  ...        0     0      0      0</span></span>
<span id="cb13-29"><a href="#cb13-29" aria-hidden="true" tabindex="-1"></a><span class="co">## Grass       0     5       6         0  ...        3     0      3      0</span></span>
<span id="cb13-30"><a href="#cb13-30" aria-hidden="true" tabindex="-1"></a><span class="co">## Ground      0     3       2         2  ...        2     3      8      0</span></span>
<span id="cb13-31"><a href="#cb13-31" aria-hidden="true" tabindex="-1"></a><span class="co">## Ice         2     0       0         0  ...        5     2      4      4</span></span>
<span id="cb13-32"><a href="#cb13-32" aria-hidden="true" tabindex="-1"></a><span class="co">## Normal      0     0       1         0  ...        6     0      0      1</span></span>
<span id="cb13-33"><a href="#cb13-33" aria-hidden="true" tabindex="-1"></a><span class="co">## Poison      1     7       4         0  ...        4     0      0      3</span></span>
<span id="cb13-34"><a href="#cb13-34" aria-hidden="true" tabindex="-1"></a><span class="co">## Psychic     0     2       3         0  ...        0     0      4      0</span></span>
<span id="cb13-35"><a href="#cb13-35" aria-hidden="true" tabindex="-1"></a><span class="co">## Rock        2     2       2         7  ...        2     0      4      6</span></span>
<span id="cb13-36"><a href="#cb13-36" aria-hidden="true" tabindex="-1"></a><span class="co">## Steel       0     0       9         0  ...        7     3      0      0</span></span>
<span id="cb13-37"><a href="#cb13-37" aria-hidden="true" tabindex="-1"></a><span class="co">## Water       2     9       6         2  ...       11     6      1      0</span></span>
<span id="cb13-38"><a href="#cb13-38" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb13-39"><a href="#cb13-39" aria-hidden="true" tabindex="-1"></a><span class="co">## [18 rows x 18 columns]</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section><section id="frequency-plots" class="level5 unnumbered"><h5 class="unnumbered anchored" data-anchor-id="frequency-plots">Frequency Plots</h5>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">Base R</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">R: ggplot2</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-3" role="tab" aria-controls="tabset-5-3" aria-selected="false">Python: matplotlib</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-4" role="tab" aria-controls="tabset-5-4" aria-selected="false">Python: plotnine</a></li>
</ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell">
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">poke</span><span class="op">$</span><span class="va">generation</span><span class="op">)</span><span class="op">)</span> <span class="co"># bar plot</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/poke-distribution-plots-1.png" class="img-fluid figure-img" width="2100"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<p>We generate a bar chart using <code>geom_bar</code>. It helps to tell R that generation (despite appearances) is categorical by declaring it a factor variable. This ensures that we get a break on the x-axis at each generation.</p>
<div class="cell">
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">poke</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">generation</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"Generation"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"# Pokemon"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/poke-dist-plots-ggplot2-1.png" class="img-fluid figure-img" width="2100"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-5-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-3-tab">
<p>We generate a bar chart using the contingency table we generated earlier combined with matplotlib’s <code>plt.bar()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>tab <span class="op">=</span> poke.groupby([<span class="st">'generation'</span>])[<span class="st">'generation'</span>].count()</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>plt.bar(tab.keys(), tab.values, color <span class="op">=</span> <span class="st">'grey'</span>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>plt.xlabel(<span class="st">"Generation"</span>)</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>plt.ylabel(<span class="st">"# Pokemon"</span>)</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/matplotlib-categorical-chart-1.png" class="img-fluid figure-img" width="614"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-5-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-4-tab">
<p>Plotnine is a ggplot2 clone for python, and for the most part, the code looks almost exactly the same, minus a few python-specific tweaks to account for different syntax conventions in each language.</p>
<p>We generate a bar chart using <code>geom_bar</code>. It helps to tell R that generation (despite appearances) is categorical by declaring it a factor variable. This ensures that we get a break on the x-axis at each generation.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> <span class="op">*</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>(ggplot(mapping <span class="op">=</span> aes(x <span class="op">=</span> <span class="st">"factor(generation)"</span>), data <span class="op">=</span> poke) <span class="op">+</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  geom_bar() <span class="op">+</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  xlab(<span class="st">"Generation"</span>) <span class="op">+</span> ylab(<span class="st">"# Pokemon"</span>))</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a><span class="co">## &lt;Figure Size: (640 x 480)&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/poke-dist-plots-plotnine-3.png" class="img-fluid figure-img" width="614"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section></section><section id="quantitative-variables" class="level4" data-number="19.5.2.2"><h4 data-number="19.5.2.2" class="anchored" data-anchor-id="quantitative-variables">
<span class="header-section-number">19.5.2.2</span> Quantitative Variables</h4>
<p>We covered some numerical summary statistics in the numerical summary statistic section above. In this section, we will primarily focus on visualization methods for assessing the distribution of quantitative variables.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note: R pipe
</div>
</div>
<div class="callout-body-container callout-body">
<p>The code in this section uses the R pipe, <code>%&gt;%</code>. The left side of the pipe is passed as an argument to the right side. This makes code easier to read because it becomes a step-wise “recipe” instead of a nested mess of functions and parentheses.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="../images/wrangling/Pipe_baking_magrittr_backAssign.gif" class="img-fluid figure-img" style="width:50.0%"></p>
<figcaption>In each step, the left hand side of the pipe is put into the first argument of the function. Source: <a href="https://github.com/arthurwelle/VIS/blob/master/Pipe_Cake/">Arthur Welle (Github)</a></figcaption></figure>
</div>
</div>
</div>
<p>We can generate histograms<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a> or kernel density plots (a continuous version of the histogram) to show us the distribution of a continuous variable.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">Base R</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">Python: matplotlib</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-3" role="tab" aria-controls="tabset-6-3" aria-selected="false">R: ggplot2</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-4" role="tab" aria-controls="tabset-6-4" aria-selected="false">Python: plotnine</a></li>
</ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<p>By default, R uses ranges of <span class="math inline">\((a, b]\)</span> in histograms, so we specify which breaks will give us a desirable result. If we do not specify breaks, R will pick them for us.</p>
<div class="cell">
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">poke</span><span class="op">$</span><span class="va">hp</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/poke-hp-out-5.png" class="img-fluid figure-img" style="width:48.0%"></p>
</figure>
</div>
</div>
</div>
<p>For continuous variables, we can use histograms, or we can examine kernel density plots.</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://magrittr.tidyverse.org">magrittr</a></span><span class="op">)</span> <span class="co"># This provides the pipe command, %&gt;%</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">poke</span><span class="op">$</span><span class="va">weight_kg</span><span class="op">)</span></span>
<span></span>
<span><span class="va">poke</span><span class="op">$</span><span class="va">weight_kg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log10</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># Take the log - will transformation be useful w/ modeling?</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span>main <span class="op">=</span> <span class="st">"Histogram of Log10 Weight (Kg)"</span><span class="op">)</span> <span class="co"># create a histogram</span></span>
<span></span>
<span><span class="va">poke</span><span class="op">$</span><span class="va">weight_kg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/density.html">density</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># First, we compute the kernel density</span></span>
<span>  <span class="co"># (na.rm = T says to ignore NA values)</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span>main <span class="op">=</span> <span class="st">"Density of Weight (Kg)"</span><span class="op">)</span> <span class="co"># Then, we plot the result</span></span>
<span></span>
<span></span>
<span><span class="va">poke</span><span class="op">$</span><span class="va">weight_kg</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/Log.html">log10</a></span><span class="op">(</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># Transform the variable</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/density.html">density</a></span><span class="op">(</span>na.rm <span class="op">=</span> <span class="cn">T</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span> <span class="co"># Compute the density ignoring missing values</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span>main <span class="op">=</span> <span class="st">"Density of Log10 pokemon weight in Kg"</span><span class="op">)</span> <span class="co"># Plot the result,</span></span>
<span>    <span class="co"># changing the title of the plot to a meaningful value</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure quarto-figure-center quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure"><p><img src="02a-eda_files/figure-html/poke-graphs-base-cts-1.png" class="img-fluid figure-img" width="900"></p>
<figcaption>Histogram of Pokemon Height (m)</figcaption></figure>
</div>
<div class="quarto-figure quarto-figure-center quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure"><p><img src="02a-eda_files/figure-html/poke-graphs-base-cts-2.png" class="img-fluid figure-img" width="900"></p>
<figcaption>Histogram of Pokemon Height (m, log 10)</figcaption></figure>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure quarto-figure-center quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure"><p><img src="02a-eda_files/figure-html/poke-graphs-base-cts-3.png" class="img-fluid figure-img" width="900"></p>
<figcaption>Density of Pokemon Height (m)</figcaption></figure>
</div>
<div class="quarto-figure quarto-figure-center quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure"><p><img src="02a-eda_files/figure-html/poke-graphs-base-cts-4.png" class="img-fluid figure-img" width="900"></p>
<figcaption>Density of Pokemon Height (m, log 10)</figcaption></figure>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p>Histogram and density plots of weight and log10 weight of different pokemon. The untransformed data are highly skewed, the transformed data are significantly less skewed.</p>
</div>
</div>
</div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a 2x2 grid of plots with separate axes</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"># This uses python multi-assignment to assign figures, axes</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co"># variables all in one go</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>fig, ((ax1, ax2), (ax3, ax4)) <span class="op">=</span> plt.subplots(<span class="dv">2</span>, <span class="dv">2</span>)</span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>poke.weight_kg.plot.hist(ax <span class="op">=</span> ax1) <span class="co"># first plot</span></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>ax1.set_title(<span class="st">"Histogram of Weight (kg)"</span>)</span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>np.log10(poke.weight_kg).plot.hist(ax <span class="op">=</span> ax2)</span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>ax2.set_title(<span class="st">"Histogram of Log10 Weight (kg)"</span>)</span>
<span id="cb20-14"><a href="#cb20-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-15"><a href="#cb20-15" aria-hidden="true" tabindex="-1"></a>poke.weight_kg.plot.density(ax <span class="op">=</span> ax3)</span>
<span id="cb20-16"><a href="#cb20-16" aria-hidden="true" tabindex="-1"></a>ax3.set_title(<span class="st">"Density of Weight (kg)"</span>)</span>
<span id="cb20-17"><a href="#cb20-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-18"><a href="#cb20-18" aria-hidden="true" tabindex="-1"></a>np.log10(poke.weight_kg).plot.density(ax <span class="op">=</span> ax4)</span>
<span id="cb20-19"><a href="#cb20-19" aria-hidden="true" tabindex="-1"></a>ax4.set_title(<span class="st">"Density of Log10 Weight (kg)"</span>)</span>
<span id="cb20-20"><a href="#cb20-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-21"><a href="#cb20-21" aria-hidden="true" tabindex="-1"></a>plt.tight_layout()</span>
<span id="cb20-22"><a href="#cb20-22" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="02a-eda_files/figure-html/poke-graphs-matplotlib-cts-3.png" class="img-fluid figure-img" width="576"></p>
<figcaption>Histogram and density plots of weight and log10 weight of different pokemon. The untransformed data are highly skewed, the transformed data are significantly less skewed.</figcaption></figure>
</div>
</div>
</div>
</div>
<div id="tabset-6-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-3-tab">
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">poke</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">height_m</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">30</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">poke</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">height_m</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html">geom_histogram</a></span><span class="op">(</span>bins <span class="op">=</span> <span class="fl">30</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_log10</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">poke</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">height_m</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">poke</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">height_m</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_density.html">geom_density</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_x_log10</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="2" data-layout-align="center">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure quarto-figure-center quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure"><p><img src="02a-eda_files/figure-html/poke-ggplot2-cts-r-5.png" class="img-fluid figure-img" width="900"></p>
<figcaption>Histogram of Pokemon Height (m)</figcaption></figure>
</div>
<div class="quarto-figure quarto-figure-center quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure"><p><img src="02a-eda_files/figure-html/poke-ggplot2-cts-r-6.png" class="img-fluid figure-img" width="900"></p>
<figcaption>Histogram of Pokemon Height (m, log 10)</figcaption></figure>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure quarto-figure-center quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure"><p><img src="02a-eda_files/figure-html/poke-ggplot2-cts-r-7.png" class="img-fluid figure-img" width="900"></p>
<figcaption>Density of Pokemon Height (m)</figcaption></figure>
</div>
<div class="quarto-figure quarto-figure-center quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure"><p><img src="02a-eda_files/figure-html/poke-ggplot2-cts-r-8.png" class="img-fluid figure-img" width="900"></p>
<figcaption>Density of Pokemon Height (m, log 10)</figcaption></figure>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p>Histogram and density plots of height and log10 height of different pokemon. The untransformed data are highly skewed, the transformed data are significantly less skewed.</p>
</div>
</div>
</div>
<p>Notice that in ggplot2/plotnine, we transform the axes instead of the data. This means that the units on the axis are true to the original, unlike in base R and matplotlib.</p>
</div>
<div id="tabset-6-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-4-tab">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>ggplot(poke, aes(x <span class="op">=</span> <span class="st">'height_m'</span>)) <span class="op">+</span> geom_histogram(bins <span class="op">=</span> <span class="dv">30</span>)</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="co">## &lt;Figure Size: (640 x 480)&gt;</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>(ggplot(poke, aes(x <span class="op">=</span> <span class="st">'height_m'</span>)) <span class="op">+</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  geom_histogram(bins <span class="op">=</span> <span class="dv">30</span>) <span class="op">+</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  scale_x_log10())</span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a><span class="co">## &lt;Figure Size: (640 x 480)&gt;</span></span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>(ggplot(poke, aes(x <span class="op">=</span> <span class="st">'height_m'</span>)) <span class="op">+</span></span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  geom_density())</span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a><span class="co">## &lt;Figure Size: (640 x 480)&gt;</span></span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>(ggplot(poke, aes(x <span class="op">=</span> <span class="st">'height_m'</span>)) <span class="op">+</span></span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  geom_density() <span class="op">+</span></span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>  scale_x_log10())</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a><span class="co">## &lt;Figure Size: (640 x 480)&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="2" data-layout-align="center">
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure quarto-figure-center quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure"><p><img src="02a-eda_files/figure-html/poke-ggplot2-cts-py-1.png" class="img-fluid figure-img" width="614"></p>
<figcaption>Histogram of Pokemon Height (m)</figcaption></figure>
</div>
<div class="quarto-figure quarto-figure-center quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure"><p><img src="02a-eda_files/figure-html/poke-ggplot2-cts-py-2.png" class="img-fluid figure-img" width="614"></p>
<figcaption>Histogram of Pokemon Height (m, log 10)</figcaption></figure>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-figure quarto-figure-center quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure"><p><img src="02a-eda_files/figure-html/poke-ggplot2-cts-py-3.png" class="img-fluid figure-img" width="614"></p>
<figcaption>Density of Pokemon Height (m)</figcaption></figure>
</div>
<div class="quarto-figure quarto-figure-center quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<figure class="figure"><p><img src="02a-eda_files/figure-html/poke-ggplot2-cts-py-4.png" class="img-fluid figure-img" width="614"></p>
<figcaption>Density of Pokemon Height (m, log 10)</figcaption></figure>
</div>
</div>
<div class="quarto-layout-row quarto-layout-valign-top">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: center;">
<p>Histogram and density plots of height and log10 height of different pokemon. The untransformed data are highly skewed, the transformed data are significantly less skewed.</p>
</div>
</div>
</div>
<p>Notice that in ggplot2/plotnine, we transform the axes instead of the data. This means that the units on the axis are true to the original, unlike in base R and matplotlib.</p>
</div>
</div>
</div>
</section></section><section id="relationships-between-variables" class="level3" data-number="19.5.3"><h3 data-number="19.5.3" class="anchored" data-anchor-id="relationships-between-variables">
<span class="header-section-number">19.5.3</span> Relationships Between Variables</h3>
<section id="categorical---categorical-relationships" class="level4" data-number="19.5.3.1"><h4 data-number="19.5.3.1" class="anchored" data-anchor-id="categorical---categorical-relationships">
<span class="header-section-number">19.5.3.1</span> Categorical - Categorical Relationships</h4>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true">R: ggplot2</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false">Base R</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-3" role="tab" aria-controls="tabset-7-3" aria-selected="false">Python: matplotlib</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-4" role="tab" aria-controls="tabset-7-4" aria-selected="false">Python: plotnine</a></li>
</ul>
<div class="tab-content">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<p>We can generate a (simple) mosaic plot (the equivalent of a 2-dimensional cross-tabular view) using <code>geom_bar</code> with <code>position = 'fill'</code>, which scales each bar so that it ends at 1. I’ve flipped the axes using <code>coord_flip</code> so that you can read the labels more easily.</p>
<div class="cell">
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">poke</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">type_1</span><span class="op">)</span>, fill <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">type_2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_bar</a></span><span class="op">(</span>color <span class="op">=</span> <span class="st">"black"</span>, position <span class="op">=</span> <span class="st">"fill"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">xlab</a></span><span class="op">(</span><span class="st">"Type 1"</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">ylab</a></span><span class="op">(</span><span class="st">"Proportion of Pokemon w/ Type 2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/coord_flip.html">coord_flip</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/poke-dist-plots-ggplot2-mosaic-9.png" class="img-fluid figure-img" width="2100"></p>
</figure>
</div>
</div>
</div>
<p>Another way to look at this data is to bin it in x and y and shade the resulting bins by the number of data points in each bin. We can even add in labels so that this is at least as clear as the tabular view!</p>
<div class="cell">
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">poke</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">type_1</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">type_2</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Shade tiles according to the number of things in the bin</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_tile.html">geom_tile</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html">after_stat</a></span><span class="op">(</span><span class="va">count</span><span class="op">)</span><span class="op">)</span>, stat <span class="op">=</span> <span class="st">"bin2d"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Add the number of things in the bin to the top of the tile as text</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_text.html">geom_text</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>label <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html">after_stat</a></span><span class="op">(</span><span class="va">count</span><span class="op">)</span><span class="op">)</span>, stat <span class="op">=</span> <span class="st">'bin2d'</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="co"># Scale the tile fill</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html">scale_fill_gradient2</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="fl">100</span><span class="op">)</span>, low <span class="op">=</span> <span class="st">"white"</span>, high <span class="op">=</span> <span class="st">"blue"</span>, na.value <span class="op">=</span> <span class="st">"white"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html">theme</a></span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">90</span>, hjust <span class="op">=</span> <span class="fl">1</span>, vjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/poke-dist-plots-ggplot2-tile-1.png" class="img-fluid figure-img" width="2100"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<p>Base R mosaic plots aren’t nearly as pretty as the ggplot version, but I will at least show you how to create them.</p>
<div class="cell">
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">poke</span><span class="op">$</span><span class="va">type_1</span>, <span class="va">poke</span><span class="op">$</span><span class="va">type_2</span><span class="op">)</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/mosaic-base-r-1.png" class="img-fluid figure-img" width="2100"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># mosaic plot - hard to read b/c too many categories</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-7-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-3-tab">
<p>To get a mosaicplot, we need an additional library, called <code>statsmodels</code>, which we install with <code>pip install statsmodels</code> in the terminal.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.graphics.mosaicplot <span class="im">import</span> mosaic</span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>mosaic(poke, [<span class="st">'type_1'</span>, <span class="st">'type_2'</span>], title <span class="op">=</span> <span class="st">"Pokemon Types"</span>)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/mosaic-plot-poke-statsmodels-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This obviously needs a bit of cleaning up to remove extra labels, but it’s easy to get to and relatively functional. Notice that it does not, by default, show NA values.</p>
</div>
<div id="tabset-7-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-4-tab">
<p>We can generate a mosaic plot (the equivalent of a 2-dimensional cross-tabular view) using <code>geom_bar</code> with <code>position = 'fill'</code>, which scales each bar so that it ends at 1. I’ve flipped the axes using <code>coord_flip</code> so that you can read the labels more easily.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert everything to categorical/factor variable ahead of time</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="co"># this stops an error: TypeError: '&lt;' not supported between instances of 'float' and 'str'</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>poke[<span class="st">'type_1'</span>] <span class="op">=</span> pd.Categorical(poke[<span class="st">'type_1'</span>].astype(<span class="bu">str</span>))</span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>poke[<span class="st">'type_2'</span>] <span class="op">=</span> pd.Categorical(poke[<span class="st">'type_2'</span>].astype(<span class="bu">str</span>))</span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>( ggplot(mapping <span class="op">=</span> aes(x <span class="op">=</span> <span class="st">'type_1'</span>, fill <span class="op">=</span> <span class="st">'type_2'</span>), data <span class="op">=</span> poke) <span class="op">+</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>  geom_bar(color <span class="op">=</span> <span class="st">"black"</span>, position <span class="op">=</span> <span class="st">"fill"</span>) <span class="op">+</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>  xlab(<span class="st">"Type 1"</span>) <span class="op">+</span> ylab(<span class="st">"Proportion of Pokemon w/ Type 2"</span>) <span class="op">+</span></span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>  coord_flip() <span class="op">+</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># This says 85% of the plot is for the main plot and 15% is for the legend.</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>  theme(subplots_adjust<span class="op">=</span>{<span class="st">'right'</span>:<span class="fl">0.85</span>})</span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a><span class="co">## &lt;Figure Size: (640 x 480)&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/poke-dist-plots-plotnine-mosaic-3.png" class="img-fluid figure-img" width="614"></p>
</figure>
</div>
</div>
</div>
<p>Another way to look at this data is to bin it in x and y and shade the resulting bins by the number of data points in each bin. We can even add in labels so that this is at least as clear as the tabular view!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>(ggplot(mapping <span class="op">=</span> aes(x <span class="op">=</span> <span class="st">'type_1'</span>, y <span class="op">=</span> <span class="st">'type_2'</span>), data <span class="op">=</span> poke) <span class="op">+</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Shade tiles according to the number of things in the bin</span></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>  stat_bin2d(aes(fill <span class="op">=</span> after_stat(<span class="st">'count'</span>)), geom <span class="op">=</span> <span class="st">'tile'</span>))</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="co">## &lt;Figure Size: (640 x 480)&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/poke-dist-plots-plotnine-tile-5.png" class="img-fluid figure-img" width="614"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</section><section id="categorical---continuous-relationships" class="level4" data-number="19.5.3.2"><h4 data-number="19.5.3.2" class="anchored" data-anchor-id="categorical---continuous-relationships">
<span class="header-section-number">19.5.3.2</span> Categorical - Continuous Relationships</h4>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true">Base R</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false">R: ggplot2</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-3" role="tab" aria-controls="tabset-8-3" aria-selected="false">Python: matplotlib</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-4" role="tab" aria-controls="tabset-8-4" aria-selected="false">Python: plotnine</a></li>
</ul>
<div class="tab-content">
<div id="tabset-8-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<p>In R, most models are specified as <code>y ~ x1 + x2 + x3</code>, where the information on the left side of the tilde is the dependent variable, and the information on the right side are any explanatory variables. Interactions are specified using <code>x1*x2</code> to get all combinations of x1 and x2 (x1, x2, x1*x2); single interaction terms are specified as e.g. <code>x1:x2</code> and do not include any component terms.</p>
<p>To examine the relationship between a categorical variable and a continuous variable, we might look at box plots:</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html">par</a></span><span class="op">(</span>mfrow <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">2</span><span class="op">)</span><span class="op">)</span> <span class="co"># put figures in same row</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">log10</a></span><span class="op">(</span><span class="va">height_m</span><span class="op">)</span> <span class="op">~</span> <span class="va">type_1</span>, data <span class="op">=</span> <span class="va">poke</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot</a></span><span class="op">(</span><span class="va">total</span> <span class="op">~</span> <span class="va">generation</span>, data <span class="op">=</span> <span class="va">poke</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="02a-eda_files/figure-html/boxplot-graphs-7.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
<p>In the second box plot, there are far too many categories to be able to resolve the relationship clearly, but the plot is still effective in that we can identify that there are one or two species which have a much higher point range than other species. EDA isn’t usually about creating pretty plots (or we’d be using <code>ggplot</code> right now) but rather about identifying things which may come up in the analysis later.</p>
</div>
<div id="tabset-8-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">poke</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">type_1</span>, y <span class="op">=</span> <span class="va">height_m</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html">scale_y_log10</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span>data <span class="op">=</span> <span class="va">poke</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">generation</span><span class="op">)</span>, y <span class="op">=</span> <span class="va">total</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_boxplot.html">geom_boxplot</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="02a-eda_files/figure-html/boxplot-ggplot2-1.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="02a-eda_files/figure-html/boxplot-ggplot2-2.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-8-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list of vectors of height_m by type_1</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>poke[<span class="st">'height_m_log'</span>] <span class="op">=</span> np.log(poke.height_m)</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>height_by_type <span class="op">=</span> poke.groupby(<span class="st">'type_1'</span>, group_keys <span class="op">=</span> <span class="va">True</span>).height_m_log.<span class="bu">apply</span>(<span class="bu">list</span>)</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot each object in the list</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>plt.boxplot(height_by_type, labels <span class="op">=</span> height_by_type.index)</span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a><span class="co">## {'whiskers': [&lt;matplotlib.lines.Line2D object at 0x7f4d5b368130&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af50730&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b595570&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b594bb0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b5399f0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b538d90&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b539bd0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b53bdf0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b539300&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b53aa10&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b539b70&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4dade01240&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3fb790&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3f9150&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3fb700&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3fb0a0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3fa590&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3fa2c0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3f8520&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3f8d60&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15c820&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15cca0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15d780&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15dae0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15ead0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15ee90&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af183a0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af18b20&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af199f0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af19c90&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af1ac50&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af1aef0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af1bfa0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af181f0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4daffedff0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4daffee5f0&gt;], 'caps': [&lt;matplotlib.lines.Line2D object at 0x7f4d5af50a00&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4dad5efe20&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b597eb0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b5966e0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b539090&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b53b3a0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b538280&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b5385b0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b53aa40&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b53ae90&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4dade02650&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4dade01f00&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3f81c0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3fbac0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3fa6e0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3fa620&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3f9cc0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3f82b0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3fb2e0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15fac0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15cc40&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15d000&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15dea0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15e140&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15f130&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15f2b0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af18d90&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af186d0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af19f30&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af1a1d0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af1b1f0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af1b4c0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af185e0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4daffeead0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b49f5b0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b49dcf0&gt;], 'boxes': [&lt;matplotlib.lines.Line2D object at 0x7f4d5b369690&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b594ee0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b539540&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b53b9a0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b53b100&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b53a080&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4dade013f0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3fa110&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3f8fa0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3f8ca0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15c460&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15d7e0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15e950&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15fa60&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af19750&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af1a9b0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af1bca0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4daffee410&gt;], 'medians': [&lt;matplotlib.lines.Line2D object at 0x7f4dad5ee0b0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b991900&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b53b490&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b53a3e0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b5384f0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4dade02f80&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3fbb20&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3f9fc0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3f89a0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15c0a0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15d480&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15e2c0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15f670&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af19210&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af1a470&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af1b760&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4daffefa00&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b49e050&gt;], 'fliers': [&lt;matplotlib.lines.Line2D object at 0x7f4d5b594700&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b539930&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b539750&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b53a470&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b538490&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4dade01210&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3fab60&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3f9870&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b3f80d0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15c4c0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15d420&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15e680&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b15f910&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af194b0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af1a710&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af1ba00&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4daffec520&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b49e560&gt;], 'means': []}</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/boxplot-matplotlib-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>plt.figure()</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a><span class="co"># Create a list of vectors of total by generation</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>total_by_gen <span class="op">=</span> poke.groupby(<span class="st">'generation'</span>, group_keys <span class="op">=</span> <span class="va">True</span>).total.<span class="bu">apply</span>(<span class="bu">list</span>)</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot each object in the list</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>plt.boxplot(total_by_gen, labels <span class="op">=</span> total_by_gen.index)</span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="co">## {'whiskers': [&lt;matplotlib.lines.Line2D object at 0x7f4d5af2f850&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5af2faf0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2ad6c0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2acbb0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2adfc0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2ae080&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2af040&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2af220&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2ac070&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b4712a0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b470520&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b473f10&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b4706d0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b470d60&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b473160&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b470be0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4daffb1330&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4daffb0e80&gt;], 'caps': [&lt;matplotlib.lines.Line2D object at 0x7f4d5af2ff40&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4dade25ae0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2ad000&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2acb80&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2ae260&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2ae7a0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2af760&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2af820&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b473220&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b471a80&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b472e60&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b471600&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b471120&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b470f40&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b470070&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b4735b0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4dade6f2b0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4dade6e6b0&gt;], 'boxes': [&lt;matplotlib.lines.Line2D object at 0x7f4d5af2f5b0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2ad600&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2ada80&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2aef80&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2ac460&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b4732b0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b472950&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b472c50&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4daffb2da0&gt;], 'medians': [&lt;matplotlib.lines.Line2D object at 0x7f4dade26fe0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2acdf0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2ae860&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2afa00&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b4705e0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b472ef0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b471000&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4daffb1cf0&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4dade6e500&gt;], 'fliers': [&lt;matplotlib.lines.Line2D object at 0x7f4d5b2acd60&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2ad180&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2aea40&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b2aff40&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b470460&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b473c70&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4d5b473700&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4daffb0190&gt;, &lt;matplotlib.lines.Line2D object at 0x7f4dade6e710&gt;], 'means': []}</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/boxplot-matplotlib2-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-8-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>ggplot(mapping <span class="op">=</span> aes(x <span class="op">=</span> <span class="st">"type_1"</span>, y <span class="op">=</span> <span class="st">"height_m"</span>), data <span class="op">=</span> poke) <span class="op">+\</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>geom_boxplot()</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a><span class="co">## &lt;Figure Size: (640 x 480)&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/boxplot-plotnine-py-5.png" class="img-fluid figure-img" width="614"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a>ggplot(mapping <span class="op">=</span> aes(x <span class="op">=</span> <span class="st">"generation"</span>, y <span class="op">=</span> <span class="st">"total"</span>), data <span class="op">=</span> poke) <span class="op">+\</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>geom_boxplot()</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="co">## &lt;Figure Size: (640 x 480)&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/boxplot-plotnine-py-6.png" class="img-fluid figure-img" width="614"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>You can find more on boxplots and ways to customize boxplots in the <a href="../part-wrangling/02b-graphics.html">Graphics</a> chapter.</p>
</section><section id="continuous---continuous-relationships" class="level4" data-number="19.5.3.3"><h4 data-number="19.5.3.3" class="anchored" data-anchor-id="continuous---continuous-relationships">
<span class="header-section-number">19.5.3.3</span> Continuous - Continuous Relationships</h4>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-9-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-1" role="tab" aria-controls="tabset-9-1" aria-selected="true">Base R</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-2" role="tab" aria-controls="tabset-9-2" aria-selected="false">R: ggplot2</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-3" role="tab" aria-controls="tabset-9-3" aria-selected="false">Python: pandas</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-4" role="tab" aria-controls="tabset-9-4" aria-selected="false">Python: plotnine</a></li>
</ul>
<div class="tab-content">
<div id="tabset-9-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-9-1-tab">
<p>To look at the relationship between numeric variables, we could compute a numeric correlation, but a plot may be more useful, because it allows us to see outliers as well.</p>
<div class="cell" data-layout-align="center">
<div class="sourceCode" id="cb36"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="va">defense</span> <span class="op">~</span> <span class="va">attack</span>, data <span class="op">=</span> <span class="va">poke</span>, type <span class="op">=</span> <span class="st">"p"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="02a-eda_files/figure-html/base-scatter-cor-9.png" class="img-fluid quarto-figure quarto-figure-center figure-img" style="width:48.0%"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html">cor</a></span><span class="op">(</span><span class="va">poke</span><span class="op">$</span><span class="va">defense</span>, <span class="va">poke</span><span class="op">$</span><span class="va">attack</span><span class="op">)</span></span>
<span><span class="co">## [1] 0.4259168</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Sometimes, we discover that a numeric variable which may seem to be continuous is actually relatively quantized. In other cases, like in the plot below, we may discover an interesting correlation that sticks out - the identity line <span class="math inline">\(y=x\)</span> seems to stand out from the cloud here.</p>
<div class="cell">
<div class="sourceCode" id="cb38"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">poke</span><span class="op">$</span><span class="va">sp_attack</span>, y <span class="op">=</span> <span class="va">poke</span><span class="op">$</span><span class="va">attack</span>, type <span class="op">=</span> <span class="st">"p"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/base-scatter-quantized-1.png" class="img-fluid figure-img" width="2100"></p>
</figure>
</div>
</div>
</div>
<p>A scatterplot matrix can also be a useful way to visualize relationships between several variables.</p>
<div class="cell">
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/pairs.html">pairs</a></span><span class="op">(</span><span class="va">poke</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hp"</span>, <span class="st">"attack"</span>, <span class="st">"defense"</span>, <span class="st">"sp_attack"</span>, <span class="st">"sp_defense"</span><span class="op">)</span><span class="op">]</span><span class="op">)</span> <span class="co"># hp - sp_defense columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="02a-eda_files/figure-html/base-scatter-matrix-1.png" class="img-fluid figure-img" style="width:100.0%"></p>
<figcaption>A scatterplot matrix of hit points, attack, defense, special attack, and special defense characteristics for all generation 1-8 Pokemon.</figcaption></figure>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p><a href="http://www.sthda.com/english/wiki/scatter-plot-matrices-r-base-graphs">There’s more information on how to customize base R scatterplot matrices here</a>.</p>
</div>
</div>
</div>
<div id="tabset-9-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-2-tab">
<p>To look at the relationship between numeric variables, we could compute a numeric correlation, but a plot may be more useful, because it allows us to see outliers as well.</p>
<div class="cell">
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">poke</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">attack</span>, y <span class="op">=</span> <span class="va">defense</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/ggplot-scatter-cor-1.png" class="img-fluid figure-img" width="2100"></p>
</figure>
</div>
</div>
</div>
<p>Sometimes, we discover that a numeric variable which may seem to be continuous is actually relatively quantized. When this happens, it can be a good idea to use <code>geom_jitter</code> to provide some “wiggle” in the data so that you can still see the point density. Changing the point transparency (alpha = .5) can also help with overplotting.</p>
<p>In other cases, we might find that there is a prominent feature of a scatterplot (in this case, the line <span class="math inline">\(y=x\)</span> seems to stand out a bit from the overall point cloud). We can highlight this feature by adding a line at <span class="math inline">\(y=x\)</span> in red behind the points.</p>
<div class="cell">
<div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">poke</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">attack</span>, y <span class="op">=</span> <span class="va">sp_attack</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_point.html">geom_point</a></span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/ggplot-scatter-quantized-1.png" class="img-fluid figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="va">poke</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">attack</span>, y <span class="op">=</span> <span class="va">sp_attack</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html">geom_abline</a></span><span class="op">(</span>slope <span class="op">=</span> <span class="fl">1</span>, color <span class="op">=</span> <span class="st">"red"</span><span class="op">)</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_jitter.html">geom_jitter</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/ggplot-scatter-quantized-2.png" class="img-fluid figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggobi.github.io/ggally/">GGally</a></span><span class="op">)</span> <span class="co"># an extension to ggplot2</span></span>
<span><span class="fu"><a href="https://ggobi.github.io/ggally/reference/ggpairs.html">ggpairs</a></span><span class="op">(</span><span class="va">poke</span><span class="op">[</span>,<span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"hp"</span>, <span class="st">"attack"</span>, <span class="st">"defense"</span>, <span class="st">"sp_attack"</span>, <span class="st">"sp_defense"</span><span class="op">)</span><span class="op">]</span>, </span>
<span>        <span class="co"># hp - sp_defense columns</span></span>
<span>        lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>continuous <span class="op">=</span> <span class="fu"><a href="https://ggobi.github.io/ggally/reference/wrap.html">wrap</a></span><span class="op">(</span><span class="st">"points"</span>, alpha <span class="op">=</span> <span class="fl">.15</span><span class="op">)</span><span class="op">)</span>,</span>
<span>        progress <span class="op">=</span> <span class="cn">F</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="02a-eda_files/figure-html/ggplot-scatter-matrix-1.png" class="img-fluid figure-img" width="2400"></p>
<figcaption>A scatterplot matrix of hit points, attack, defense, special attack, and special defense characteristics for all generation 1-8 Pokemon.</figcaption></figure>
</div>
</div>
</div>
<p><code>ggpairs</code> can also handle continuous variables, if you want to explore the options available.</p>
</div>
<div id="tabset-9-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-3-tab">
<p>Believe it or not, you don’t have to go to matplotlib to get plots in python - you can get some plots from pandas directly, even if you are still using matplotlib under the hood (this is why you have to run <code>plt.show()</code> to get the plot to appear if you’re working in markdown).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>poke.plot.scatter(x <span class="op">=</span> <span class="st">'attack'</span>, y <span class="op">=</span> <span class="st">'defense'</span>)</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/pandas-scatterplot-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Pandas also includes a nice scatterplot matrix method.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pandas.plotting <span class="im">import</span> scatter_matrix</span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a>scatter_matrix(poke.iloc[:,<span class="dv">15</span>:<span class="dv">19</span>], alpha <span class="op">=</span> <span class="fl">0.2</span>, figsize <span class="op">=</span> (<span class="dv">6</span>, <span class="dv">6</span>), diagonal <span class="op">=</span> <span class="st">'kde'</span>)</span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="co">## array([[&lt;Axes: xlabel='weight_kg', ylabel='weight_kg'&gt;]], dtype=object)</span></span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/pandas-scatterplot-matrix-3.png" class="img-fluid figure-img" width="576"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-9-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-4-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> <span class="op">*</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>ggplot(poke, aes(x <span class="op">=</span> <span class="st">"attack"</span>, y <span class="op">=</span> <span class="st">"sp_attack"</span>)) <span class="op">+</span> geom_point()</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co">## &lt;Figure Size: (640 x 480)&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/plotnine-scatter-quantized-5.png" class="img-fluid figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb47"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co"># jitter in plotnine seems to use width and height jointly instead of </span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="co"># marginally</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a>ggplot(poke, aes(x <span class="op">=</span> <span class="st">"attack"</span>, y <span class="op">=</span> <span class="st">"sp_attack"</span>)) <span class="op">+</span> geom_jitter(alpha <span class="op">=</span> <span class="fl">0.5</span>, height <span class="op">=</span> <span class="dv">5</span>)</span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="co">## &lt;Figure Size: (640 x 480)&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/plotnine-scatter-quantized-6.png" class="img-fluid figure-img" style="width:50.0%"></p>
</figure>
</div>
</div>
</div>
<p>While plotnine doesn’t have scatterplot matrices by default, you can create them using some <a href="https://github.com/has2k1/plotnine/issues/16#issuecomment-851938860">clever code</a>. This is obviously not as fancy as <code>ggpairs</code> but it works well enough.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> plotnine <span class="im">import</span> <span class="op">*</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> itertools</span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> plot_matrix(df, columns):</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>  pdf <span class="op">=</span> []</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> a1, b1 <span class="kw">in</span> itertools.combinations(columns, <span class="dv">2</span>):</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (a,b) <span class="kw">in</span> ((a1, b1), (b1, a1)):</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a>      sub <span class="op">=</span> df[[a, b]].rename(columns<span class="op">=</span>{a: <span class="st">"x"</span>, b: <span class="st">"y"</span>}).assign(a<span class="op">=</span>a, b<span class="op">=</span>b)</span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>      pdf.append(sub)</span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>  g <span class="op">=</span> ggplot(pd.concat(pdf))</span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>  g <span class="op">+=</span> geom_point(aes(<span class="st">'x'</span>,<span class="st">'y'</span>))</span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>  g <span class="op">+=</span> facet_grid(<span class="st">'b~a'</span>, scales<span class="op">=</span><span class="st">'free'</span>)</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> g</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>plot_matrix(poke, poke.columns[<span class="dv">7</span>:<span class="dv">11</span>])</span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a><span class="co">## &lt;Figure Size: (640 x 480)&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/plotnine-scatter-matrix-9.png" class="img-fluid figure-img" width="614"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>If you want summary statistics by group, you can get that using the <code>dplyr</code> package functions <code>select</code> and <code>group_by</code>, which we will learn more about in the next section. (I’m cheating a bit by mentioning it now, but it’s just so useful!)</p>
<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try it out: EDA
</div>
</div>
<div class="callout-body-container callout-body">
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-10-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-1" role="tab" aria-controls="tabset-10-1" aria-selected="true">Problem</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-2" role="tab" aria-controls="tabset-10-2" aria-selected="false">R solution</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-3" role="tab" aria-controls="tabset-10-3" aria-selected="false">Python solution</a></li>
</ul>
<div class="tab-content">
<div id="tabset-10-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-10-1-tab">
<p>Explore the variables present in <a href="https://github.com/srvanderplas/datasets/blob/main/raw/Lancaster%20County,%20NE%20-%20Assessor.xlsx?raw=true">the Lancaster County Assessor Housing Sales Data</a> <a href="https://github.com/srvanderplas/datasets/blob/main/code/lincoln-housing-sales.md">Documentation</a>.</p>
<p>Note that some variables may be too messy to handle with the things that you have seen thus far - that is ok. As you find irregularities, document them - these are things you may need to clean up in the dataset before you conduct a formal analysis.</p>
<div class="cell">
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="st">"readxl"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/utils/installed.packages.html">installed.packages</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html">install.packages</a></span><span class="op">(</span><span class="st">"readxl"</span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://readxl.tidyverse.org">readxl</a></span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/download.file.html">download.file</a></span><span class="op">(</span><span class="st">"https://github.com/srvanderplas/datasets/blob/main/raw/Lancaster%20County,%20NE%20-%20Assessor.xlsx?raw=true"</span>, destfile <span class="op">=</span> <span class="st">"../data/lancaster-housing.xlsx"</span><span class="op">)</span></span>
<span><span class="va">housing_lincoln</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://readxl.tidyverse.org/reference/read_excel.html">read_xlsx</a></span><span class="op">(</span><span class="st">"../data/lancaster-housing.xlsx"</span>, sheet <span class="op">=</span> <span class="fl">1</span>, guess_max <span class="op">=</span> <span class="fl">7000</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a>housing_lincoln <span class="op">=</span> pd.read_excel(<span class="st">"../data/lancaster-housing.xlsx"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div id="tabset-10-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-2-tab">
<div class="cell">
<div class="sourceCode" id="cb51"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">housing_lincoln</span><span class="op">$</span><span class="va">TLA</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">parse_number</a></span><span class="op">(</span><span class="va">housing_lincoln</span><span class="op">$</span><span class="va">`TLA (Sqft)`</span><span class="op">)</span></span>
<span><span class="va">housing_lincoln</span><span class="op">$</span><span class="va">Assd_Value</span> <span class="op">&lt;-</span> <span class="fu">readr</span><span class="fu">::</span><span class="fu"><a href="https://readr.tidyverse.org/reference/parse_number.html">parse_number</a></span><span class="op">(</span><span class="va">housing_lincoln</span><span class="op">$</span><span class="va">Assd_Value</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://docs.ropensci.org/skimr/reference/skim.html">skim</a></span><span class="op">(</span><span class="va">housing_lincoln</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<table class="table table-sm table-striped small">
<caption>Data summary</caption>
<tbody>
<tr class="odd">
<td style="text-align: left;">Name</td>
<td style="text-align: left;">housing_lincoln</td>
</tr>
<tr class="even">
<td style="text-align: left;">Number of rows</td>
<td style="text-align: left;">6918</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Number of columns</td>
<td style="text-align: left;">9</td>
</tr>
<tr class="even">
<td style="text-align: left;">_______________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Column type frequency:</td>
<td style="text-align: left;"></td>
</tr>
<tr class="even">
<td style="text-align: left;">character</td>
<td style="text-align: left;">6</td>
</tr>
<tr class="odd">
<td style="text-align: left;">numeric</td>
<td style="text-align: left;">3</td>
</tr>
<tr class="even">
<td style="text-align: left;">________________________</td>
<td style="text-align: left;"></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Group variables</td>
<td style="text-align: left;">None</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: character</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 19%">
<col style="width: 13%">
<col style="width: 19%">
<col style="width: 5%">
<col style="width: 5%">
<col style="width: 8%">
<col style="width: 12%">
<col style="width: 15%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">min</th>
<th style="text-align: right;">max</th>
<th style="text-align: right;">empty</th>
<th style="text-align: right;">n_unique</th>
<th style="text-align: right;">whitespace</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Parcel_ID</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">17</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6740</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Address</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">29</td>
<td style="text-align: right;">50</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6740</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Owner</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">6</td>
<td style="text-align: right;">67</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6435</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">Owner Address</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">25</td>
<td style="text-align: right;">93</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">6184</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="odd">
<td style="text-align: left;">Imp_Type</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">2</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">39</td>
<td style="text-align: right;">0</td>
</tr>
<tr class="even">
<td style="text-align: left;">TLA (Sqft)</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">3</td>
<td style="text-align: right;">5</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1767</td>
<td style="text-align: right;">0</td>
</tr>
</tbody>
</table>
<p><strong>Variable type: numeric</strong></p>
<table class="table table-sm table-striped small">
<colgroup>
<col style="width: 14%">
<col style="width: 10%">
<col style="width: 14%">
<col style="width: 10%">
<col style="width: 9%">
<col style="width: 6%">
<col style="width: 7%">
<col style="width: 9%">
<col style="width: 7%">
<col style="width: 8%">
<col style="width: 6%">
</colgroup>
<thead><tr class="header">
<th style="text-align: left;">skim_variable</th>
<th style="text-align: right;">n_missing</th>
<th style="text-align: right;">complete_rate</th>
<th style="text-align: right;">mean</th>
<th style="text-align: right;">sd</th>
<th style="text-align: right;">p0</th>
<th style="text-align: right;">p25</th>
<th style="text-align: right;">p50</th>
<th style="text-align: right;">p75</th>
<th style="text-align: right;">p100</th>
<th style="text-align: left;">hist</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Yr_Blt</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1950.85</td>
<td style="text-align: right;">22.55</td>
<td style="text-align: right;">1900</td>
<td style="text-align: right;">1933</td>
<td style="text-align: right;">1954.0</td>
<td style="text-align: right;">1963</td>
<td style="text-align: right;">2023</td>
<td style="text-align: left;">▂▃▇▂▁</td>
</tr>
<tr class="even">
<td style="text-align: left;">Assd_Value</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">229956.23</td>
<td style="text-align: right;">96272.53</td>
<td style="text-align: right;">36500</td>
<td style="text-align: right;">174925</td>
<td style="text-align: right;">214500.0</td>
<td style="text-align: right;">259175</td>
<td style="text-align: right;">1404800</td>
<td style="text-align: left;">▇▁▁▁▁</td>
</tr>
<tr class="odd">
<td style="text-align: left;">TLA</td>
<td style="text-align: right;">0</td>
<td style="text-align: right;">1</td>
<td style="text-align: right;">1379.08</td>
<td style="text-align: right;">599.09</td>
<td style="text-align: right;">400</td>
<td style="text-align: right;">966</td>
<td style="text-align: right;">1235.5</td>
<td style="text-align: right;">1612</td>
<td style="text-align: right;">6819</td>
<td style="text-align: left;">▇▂▁▁▁</td>
</tr>
</tbody>
</table>
</div>
</div>
<p>Let’s examine the numeric variables first:</p>
<div class="cell">
<div class="sourceCode" id="cb52"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">housing_lincoln</span><span class="op">$</span><span class="va">Assd_Value</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/housing-data-numeric-date-1.png" class="img-fluid figure-img" width="2100"></p>
</figure>
</div>
</div>
<div class="sourceCode" id="cb53"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/hist.html">hist</a></span><span class="op">(</span><span class="va">housing_lincoln</span><span class="op">$</span><span class="va">Yr_Blt</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/housing-data-numeric-date-2.png" class="img-fluid figure-img" width="2100"></p>
</figure>
</div>
</div>
</div>
<p>Let’s look at the years the houses were built and the Imp_Types. We can find more data on what the Improvement Types mean <a href="https://www.lincoln.ne.gov/files/sharedassets/intranet/county/clerk/protest-public/appraisal_card_code_sheet.pdf">here</a>, where the various abbreviations are defined.</p>
<div class="cell">
<div class="sourceCode" id="cb54"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">housing_lincoln</span><span class="op">$</span><span class="va">decade</span> <span class="op">&lt;-</span> <span class="fl">10</span><span class="op">*</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html">floor</a></span><span class="op">(</span><span class="va">housing_lincoln</span><span class="op">$</span><span class="va">Yr_Blt</span><span class="op">/</span><span class="fl">10</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">housing_lincoln</span><span class="op">$</span><span class="va">decade</span>, useNA <span class="op">=</span> <span class="st">'ifany'</span><span class="op">)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## 1900 1910 1920 1930 1940 1950 1960 1970 1980 1990 2000 2010 2020 </span></span>
<span><span class="co">##  245  295  885  414  647 1949 1429  282  550  116   72   24   10</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">housing_lincoln</span><span class="op">$</span><span class="va">Imp_Type</span><span class="op">)</span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   BL   BN   C1   C2   CA   CB  CXF  CXU  CYF  CYU   D1   D2   D3   D4   D5   D6 </span></span>
<span><span class="co">##  163  764   11   39   48   17    4    3    7   25    2   40    9  232   45   10 </span></span>
<span><span class="co">##   DA   HC   M1   R1   R2   RA   RB   RR   RS  RXF  RXU  RYF  RYU   T1   T2   T3 </span></span>
<span><span class="co">##    2  132    1 3165  492  628   23   15  218  257   79   31   73  160    9   14 </span></span>
<span><span class="co">##   T4   T5   T6   T7   TA   TS  TYF </span></span>
<span><span class="co">##   17   37    5   21  110    9    1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">housing_lincoln</span><span class="op">$</span><span class="va">Imp_Type</span>, <span class="va">housing_lincoln</span><span class="op">$</span><span class="va">decade</span><span class="op">)</span></span>
<span><span class="co">##      </span></span>
<span><span class="co">##       1900 1910 1920 1930 1940 1950 1960 1970 1980 1990 2000 2010 2020</span></span>
<span><span class="co">##   BL     0    0    0    0    0    0  119   42    0    1    1    0    0</span></span>
<span><span class="co">##   BN    77   84  413  176   14    0    0    0    0    0    0    0    0</span></span>
<span><span class="co">##   C1     1    0    8    0    1    0    0    0    1    0    0    0    0</span></span>
<span><span class="co">##   C2    14    9   12    1    1    2    0    0    0    0    0    0    0</span></span>
<span><span class="co">##   CA     7   14   17    5    4    1    0    0    0    0    0    0    0</span></span>
<span><span class="co">##   CB     5   11    0    0    0    1    0    0    0    0    0    0    0</span></span>
<span><span class="co">##   CXF    0    1    2    0    1    0    0    0    0    0    0    0    0</span></span>
<span><span class="co">##   CXU    0    0    1    2    0    0    0    0    0    0    0    0    0</span></span>
<span><span class="co">##   CYF    0    5    2    0    0    0    0    0    0    0    0    0    0</span></span>
<span><span class="co">##   CYU    7    9    7    2    0    0    0    0    0    0    0    0    0</span></span>
<span><span class="co">##   D1     0    0    0    0    0    0    1    1    0    0    0    0    0</span></span>
<span><span class="co">##   D2     0    0    0    0    0    5   26    8    1    0    0    0    0</span></span>
<span><span class="co">##   D3     0    0    0    0    0    0    1    1    2    3    2    0    0</span></span>
<span><span class="co">##   D4     0    0    1    3   29   91   87    8    5    5    1    2    0</span></span>
<span><span class="co">##   D5     0    2    1   10    9   12    0    5    1    2    3    0    0</span></span>
<span><span class="co">##   D6     0    0    0    0    0    2    0    2    0    6    0    0    0</span></span>
<span><span class="co">##   DA     0    0    1    0    0    1    0    0    0    0    0    0    0</span></span>
<span><span class="co">##   HC     0    0    0    0    0    0   83    8   41    0    0    0    0</span></span>
<span><span class="co">##   M1     0    0    0    1    0    0    0    0    0    0    0    0    0</span></span>
<span><span class="co">##   R1     3    1   10    8  382 1641  902  133   52   10    3   10   10</span></span>
<span><span class="co">##   R2    33   46   76   42   19   11   48   25  163   27    0    2    0</span></span>
<span><span class="co">##   RA    47   51  165   87  115  104   13    7   26    6    4    3    0</span></span>
<span><span class="co">##   RB     4    5    8    5    1    0    0    0    0    0    0    0    0</span></span>
<span><span class="co">##   RR     0    0    0    0    1    9    3    0    0    1    1    0    0</span></span>
<span><span class="co">##   RS     0    0    2    0    4   33  145   26    8    0    0    0    0</span></span>
<span><span class="co">##   RXF   16   13  101   53   45   28    1    0    0    0    0    0    0</span></span>
<span><span class="co">##   RXU    3    8   31   12   18    7    0    0    0    0    0    0    0</span></span>
<span><span class="co">##   RYF   12   11    6    0    1    1    0    0    0    0    0    0    0</span></span>
<span><span class="co">##   RYU   16   25   21    7    2    0    0    0    2    0    0    0    0</span></span>
<span><span class="co">##   T1     0    0    0    0    0    0    0    6  124    8   22    0    0</span></span>
<span><span class="co">##   T2     0    0    0    0    0    0    0    0    3    0    0    6    0</span></span>
<span><span class="co">##   T3     0    0    0    0    0    0    0    4   10    0    0    0    0</span></span>
<span><span class="co">##   T4     0    0    0    0    0    0    0    0   16    0    0    1    0</span></span>
<span><span class="co">##   T5     0    0    0    0    0    0    0    0    8   29    0    0    0</span></span>
<span><span class="co">##   T6     0    0    0    0    0    0    0    0    4    1    0    0    0</span></span>
<span><span class="co">##   T7     0    0    0    0    0    0    0    0    5   13    3    0    0</span></span>
<span><span class="co">##   TA     0    0    0    0    0    0    0    0   74    4   32    0    0</span></span>
<span><span class="co">##   TS     0    0    0    0    0    0    0    6    3    0    0    0    0</span></span>
<span><span class="co">##   TYF    0    0    0    0    0    0    0    0    1    0    0    0    0</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html">plot</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">housing_lincoln</span><span class="op">$</span><span class="va">decade</span>, <span class="va">housing_lincoln</span><span class="op">$</span><span class="va">Imp_Type</span><span class="op">)</span>,</span>
<span>     main <span class="op">=</span> <span class="st">"Year Built and Improvement Type"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/housing-data-year-1.png" class="img-fluid figure-img" width="2100"></p>
</figure>
</div>
</div>
</div>
<p>We can also look at the square footage for each improvement type:</p>
<div class="cell">
<div class="sourceCode" id="cb55"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">housing_lincoln</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/subset.html">subset</a></span><span class="op">(</span><span class="va">Imp_Type</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"BN"</span>, <span class="st">"R1"</span>, <span class="st">"R2"</span>, <span class="st">"RA"</span><span class="op">)</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/graphics/boxplot.html">boxplot</a></span><span class="op">(</span><span class="va">TLA</span> <span class="op">~</span> <span class="va">Imp_Type</span>, data <span class="op">=</span> <span class="va">.</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="2100"></p>
</figure>
</div>
</div>
</div>
<p>This makes sense - there are relatively few bungalows (BN), but R1 means 1 story house, R2 means 2 story house, and RA is a so-called 1.5 story house.</p>
</div>
<div id="tabset-10-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-3-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb56"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a>housing_lincoln[<span class="st">"TLA"</span>] <span class="op">=</span> housing_lincoln[<span class="st">"TLA (Sqft)"</span>].<span class="bu">str</span>.replace(<span class="st">"[,\$]"</span>, <span class="st">""</span>, regex <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="co"># For some reason, things without a comma just get NaN'd, so fix that</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a>housing_lincoln.loc[housing_lincoln[<span class="st">"TLA"</span>].isna(), <span class="st">"TLA"</span>] <span class="op">=</span> housing_lincoln.loc[housing_lincoln[<span class="st">"TLA"</span>].isna(), <span class="st">"TLA (Sqft)"</span>]</span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>housing_lincoln[<span class="st">"TLA"</span>] <span class="op">=</span> pd.to_numeric(housing_lincoln[<span class="st">"TLA"</span>], errors <span class="op">=</span> <span class="st">'coerce'</span>)</span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>housing_lincoln[<span class="st">"Assessed"</span>] <span class="op">=</span> housing_lincoln[<span class="st">"Assd_Value"</span>].<span class="bu">str</span>.replace(<span class="st">"[,\$]"</span>, <span class="st">""</span>, regex <span class="op">=</span> <span class="va">True</span>)</span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="co"># For some reason, things without a comma just get NaN'd, so fix that</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a>housing_lincoln.loc[housing_lincoln[<span class="st">"Assessed"</span>].isna(), <span class="st">"Assessed"</span>] <span class="op">=</span> housing_lincoln.loc[housing_lincoln[<span class="st">"Assessed"</span>].isna(), <span class="st">"Assd_Value"</span>]</span>
<span id="cb56-9"><a href="#cb56-9" aria-hidden="true" tabindex="-1"></a>housing_lincoln[<span class="st">"Assessed"</span>] <span class="op">=</span> pd.to_numeric(housing_lincoln[<span class="st">"Assessed"</span>], errors <span class="op">=</span> <span class="st">'coerce'</span>)</span>
<span id="cb56-10"><a href="#cb56-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-11"><a href="#cb56-11" aria-hidden="true" tabindex="-1"></a>housing_lincoln <span class="op">=</span> housing_lincoln.drop([<span class="st">"TLA (Sqft)"</span>, <span class="st">"Assd_Value"</span>], axis <span class="op">=</span> <span class="dv">1</span>)</span>
<span id="cb56-12"><a href="#cb56-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-13"><a href="#cb56-13" aria-hidden="true" tabindex="-1"></a><span class="co"># housing_lincoln.describe()</span></span>
<span id="cb56-14"><a href="#cb56-14" aria-hidden="true" tabindex="-1"></a>skim(housing_lincoln)</span>
<span id="cb56-15"><a href="#cb56-15" aria-hidden="true" tabindex="-1"></a><span class="co">## ╭─────────────────────────────── skimpy summary ───────────────────────────────╮</span></span>
<span id="cb56-16"><a href="#cb56-16" aria-hidden="true" tabindex="-1"></a><span class="co">## │          Data Summary                Data Types                              │</span></span>
<span id="cb56-17"><a href="#cb56-17" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┏━━━━━━━━━━━━━━━━━━━┳━━━━━━━━┓ ┏━━━━━━━━━━━━━┳━━━━━━━┓                       │</span></span>
<span id="cb56-18"><a href="#cb56-18" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┃ dataframe         ┃ Values ┃ ┃ Column Type ┃ Count ┃                       │</span></span>
<span id="cb56-19"><a href="#cb56-19" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┡━━━━━━━━━━━━━━━━━━━╇━━━━━━━━┩ ┡━━━━━━━━━━━━━╇━━━━━━━┩                       │</span></span>
<span id="cb56-20"><a href="#cb56-20" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ Number of rows    │ 6918   │ │ string      │ 5     │                       │</span></span>
<span id="cb56-21"><a href="#cb56-21" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ Number of columns │ 8      │ │ int64       │ 3     │                       │</span></span>
<span id="cb56-22"><a href="#cb56-22" aria-hidden="true" tabindex="-1"></a><span class="co">## │ └───────────────────┴────────┘ └─────────────┴───────┘                       │</span></span>
<span id="cb56-23"><a href="#cb56-23" aria-hidden="true" tabindex="-1"></a><span class="co">## │                                   number                                     │</span></span>
<span id="cb56-24"><a href="#cb56-24" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┏━━━━━━┳━━━━┳━━━━━━┳━━━━━━┳━━━━━━┳━━━━━━┳━━━━━━┳━━━━━━┳━━━━━━┳━━━━━━┳━━━━━┓  │</span></span>
<span id="cb56-25"><a href="#cb56-25" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┃ colu ┃    ┃      ┃      ┃      ┃      ┃      ┃      ┃      ┃      ┃     ┃  │</span></span>
<span id="cb56-26"><a href="#cb56-26" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┃ mn_n ┃    ┃      ┃      ┃      ┃      ┃      ┃      ┃      ┃      ┃ his ┃  │</span></span>
<span id="cb56-27"><a href="#cb56-27" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┃ ame  ┃ NA ┃ NA % ┃ mean ┃ sd   ┃ p0   ┃ p25  ┃ p50  ┃ p75  ┃ p100 ┃ t   ┃  │</span></span>
<span id="cb56-28"><a href="#cb56-28" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┡━━━━━━╇━━━━╇━━━━━━╇━━━━━━╇━━━━━━╇━━━━━━╇━━━━━━╇━━━━━━╇━━━━━━╇━━━━━━╇━━━━━┩  │</span></span>
<span id="cb56-29"><a href="#cb56-29" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ Yr_B │  0 │    0 │ 2000 │   23 │ 1900 │ 1900 │ 2000 │ 2000 │ 2000 │ ▃▃▇ │  │</span></span>
<span id="cb56-30"><a href="#cb56-30" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ lt   │    │      │      │      │      │      │      │      │      │ ▅▂  │  │</span></span>
<span id="cb56-31"><a href="#cb56-31" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ TLA  │  0 │    0 │ 1400 │  600 │  400 │  970 │ 1200 │ 1600 │ 6800 │ ▇▃▁ │  │</span></span>
<span id="cb56-32"><a href="#cb56-32" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ Asse │  0 │    0 │ 2300 │ 9600 │ 3600 │ 1700 │ 2100 │ 2600 │ 1400 │ ▇▂  │  │</span></span>
<span id="cb56-33"><a href="#cb56-33" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ ssed │    │      │   00 │    0 │    0 │   00 │   00 │   00 │  000 │     │  │</span></span>
<span id="cb56-34"><a href="#cb56-34" aria-hidden="true" tabindex="-1"></a><span class="co">## │ └──────┴────┴──────┴──────┴──────┴──────┴──────┴──────┴──────┴──────┴─────┘  │</span></span>
<span id="cb56-35"><a href="#cb56-35" aria-hidden="true" tabindex="-1"></a><span class="co">## │                                   string                                     │</span></span>
<span id="cb56-36"><a href="#cb56-36" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┏━━━━━━━━━━━━━━━━━━━━┳━━━━━━┳━━━━━━━━┳━━━━━━━━━━━━━━━━━━━┳━━━━━━━━━━━━━━━━┓  │</span></span>
<span id="cb56-37"><a href="#cb56-37" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┃ column_name        ┃ NA   ┃ NA %   ┃ words per row     ┃ total words    ┃  │</span></span>
<span id="cb56-38"><a href="#cb56-38" aria-hidden="true" tabindex="-1"></a><span class="co">## │ ┡━━━━━━━━━━━━━━━━━━━━╇━━━━━━╇━━━━━━━━╇━━━━━━━━━━━━━━━━━━━╇━━━━━━━━━━━━━━━━┩  │</span></span>
<span id="cb56-39"><a href="#cb56-39" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ Parcel_ID          │    0 │      0 │                 1 │           6918 │  │</span></span>
<span id="cb56-40"><a href="#cb56-40" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ Address            │    0 │      0 │               7.4 │          51410 │  │</span></span>
<span id="cb56-41"><a href="#cb56-41" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ Owner              │    0 │      0 │               4.2 │          29294 │  │</span></span>
<span id="cb56-42"><a href="#cb56-42" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ Owner Address      │    0 │      0 │               7.6 │          52292 │  │</span></span>
<span id="cb56-43"><a href="#cb56-43" aria-hidden="true" tabindex="-1"></a><span class="co">## │ │ Imp_Type           │    0 │      0 │                 1 │           6918 │  │</span></span>
<span id="cb56-44"><a href="#cb56-44" aria-hidden="true" tabindex="-1"></a><span class="co">## │ └────────────────────┴──────┴────────┴───────────────────┴────────────────┘  │</span></span>
<span id="cb56-45"><a href="#cb56-45" aria-hidden="true" tabindex="-1"></a><span class="co">## ╰──────────────────────────────────── End ─────────────────────────────────────╯</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Let’s examine the numeric and date variables first:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>housing_lincoln[<span class="st">"TLA"</span>].plot.hist()</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/housing-numeric-py-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb58"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a>housing_lincoln[<span class="st">"Yr_Blt"</span>].plot.hist()</span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/housing-numeric-py-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Let’s look at the years the houses were built and the Imp_Types. We can find more data on what the Improvement Types mean <a href="https://www.lincoln.ne.gov/files/sharedassets/intranet/county/clerk/protest-public/appraisal_card_code_sheet.pdf">here</a>, where the various abbreviations are defined.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>housing_lincoln[<span class="st">'decade'</span>] <span class="op">=</span> <span class="dv">10</span><span class="op">*</span>np.floor(housing_lincoln.Yr_Blt<span class="op">/</span><span class="dv">10</span>)</span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a>housing_lincoln[<span class="st">"decade"</span>].groupby(housing_lincoln[<span class="st">"decade"</span>]).count()</span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="co">## decade</span></span>
<span id="cb59-6"><a href="#cb59-6" aria-hidden="true" tabindex="-1"></a><span class="co">## 1900.0     245</span></span>
<span id="cb59-7"><a href="#cb59-7" aria-hidden="true" tabindex="-1"></a><span class="co">## 1910.0     295</span></span>
<span id="cb59-8"><a href="#cb59-8" aria-hidden="true" tabindex="-1"></a><span class="co">## 1920.0     885</span></span>
<span id="cb59-9"><a href="#cb59-9" aria-hidden="true" tabindex="-1"></a><span class="co">## 1930.0     414</span></span>
<span id="cb59-10"><a href="#cb59-10" aria-hidden="true" tabindex="-1"></a><span class="co">## 1940.0     647</span></span>
<span id="cb59-11"><a href="#cb59-11" aria-hidden="true" tabindex="-1"></a><span class="co">## 1950.0    1949</span></span>
<span id="cb59-12"><a href="#cb59-12" aria-hidden="true" tabindex="-1"></a><span class="co">## 1960.0    1429</span></span>
<span id="cb59-13"><a href="#cb59-13" aria-hidden="true" tabindex="-1"></a><span class="co">## 1970.0     282</span></span>
<span id="cb59-14"><a href="#cb59-14" aria-hidden="true" tabindex="-1"></a><span class="co">## 1980.0     550</span></span>
<span id="cb59-15"><a href="#cb59-15" aria-hidden="true" tabindex="-1"></a><span class="co">## 1990.0     116</span></span>
<span id="cb59-16"><a href="#cb59-16" aria-hidden="true" tabindex="-1"></a><span class="co">## 2000.0      72</span></span>
<span id="cb59-17"><a href="#cb59-17" aria-hidden="true" tabindex="-1"></a><span class="co">## 2010.0      24</span></span>
<span id="cb59-18"><a href="#cb59-18" aria-hidden="true" tabindex="-1"></a><span class="co">## 2020.0      10</span></span>
<span id="cb59-19"><a href="#cb59-19" aria-hidden="true" tabindex="-1"></a><span class="co">## Name: decade, dtype: int64</span></span>
<span id="cb59-20"><a href="#cb59-20" aria-hidden="true" tabindex="-1"></a>housing_lincoln[<span class="st">"Imp_Type"</span>].groupby(housing_lincoln[<span class="st">"Imp_Type"</span>]).count()</span>
<span id="cb59-21"><a href="#cb59-21" aria-hidden="true" tabindex="-1"></a><span class="co">## Imp_Type</span></span>
<span id="cb59-22"><a href="#cb59-22" aria-hidden="true" tabindex="-1"></a><span class="co">## BL      163</span></span>
<span id="cb59-23"><a href="#cb59-23" aria-hidden="true" tabindex="-1"></a><span class="co">## BN      764</span></span>
<span id="cb59-24"><a href="#cb59-24" aria-hidden="true" tabindex="-1"></a><span class="co">## C1       11</span></span>
<span id="cb59-25"><a href="#cb59-25" aria-hidden="true" tabindex="-1"></a><span class="co">## C2       39</span></span>
<span id="cb59-26"><a href="#cb59-26" aria-hidden="true" tabindex="-1"></a><span class="co">## CA       48</span></span>
<span id="cb59-27"><a href="#cb59-27" aria-hidden="true" tabindex="-1"></a><span class="co">## CB       17</span></span>
<span id="cb59-28"><a href="#cb59-28" aria-hidden="true" tabindex="-1"></a><span class="co">## CXF       4</span></span>
<span id="cb59-29"><a href="#cb59-29" aria-hidden="true" tabindex="-1"></a><span class="co">## CXU       3</span></span>
<span id="cb59-30"><a href="#cb59-30" aria-hidden="true" tabindex="-1"></a><span class="co">## CYF       7</span></span>
<span id="cb59-31"><a href="#cb59-31" aria-hidden="true" tabindex="-1"></a><span class="co">## CYU      25</span></span>
<span id="cb59-32"><a href="#cb59-32" aria-hidden="true" tabindex="-1"></a><span class="co">## D1        2</span></span>
<span id="cb59-33"><a href="#cb59-33" aria-hidden="true" tabindex="-1"></a><span class="co">## D2       40</span></span>
<span id="cb59-34"><a href="#cb59-34" aria-hidden="true" tabindex="-1"></a><span class="co">## D3        9</span></span>
<span id="cb59-35"><a href="#cb59-35" aria-hidden="true" tabindex="-1"></a><span class="co">## D4      232</span></span>
<span id="cb59-36"><a href="#cb59-36" aria-hidden="true" tabindex="-1"></a><span class="co">## D5       45</span></span>
<span id="cb59-37"><a href="#cb59-37" aria-hidden="true" tabindex="-1"></a><span class="co">## D6       10</span></span>
<span id="cb59-38"><a href="#cb59-38" aria-hidden="true" tabindex="-1"></a><span class="co">## DA        2</span></span>
<span id="cb59-39"><a href="#cb59-39" aria-hidden="true" tabindex="-1"></a><span class="co">## HC      132</span></span>
<span id="cb59-40"><a href="#cb59-40" aria-hidden="true" tabindex="-1"></a><span class="co">## M1        1</span></span>
<span id="cb59-41"><a href="#cb59-41" aria-hidden="true" tabindex="-1"></a><span class="co">## R1     3165</span></span>
<span id="cb59-42"><a href="#cb59-42" aria-hidden="true" tabindex="-1"></a><span class="co">## R2      492</span></span>
<span id="cb59-43"><a href="#cb59-43" aria-hidden="true" tabindex="-1"></a><span class="co">## RA      628</span></span>
<span id="cb59-44"><a href="#cb59-44" aria-hidden="true" tabindex="-1"></a><span class="co">## RB       23</span></span>
<span id="cb59-45"><a href="#cb59-45" aria-hidden="true" tabindex="-1"></a><span class="co">## RR       15</span></span>
<span id="cb59-46"><a href="#cb59-46" aria-hidden="true" tabindex="-1"></a><span class="co">## RS      218</span></span>
<span id="cb59-47"><a href="#cb59-47" aria-hidden="true" tabindex="-1"></a><span class="co">## RXF     257</span></span>
<span id="cb59-48"><a href="#cb59-48" aria-hidden="true" tabindex="-1"></a><span class="co">## RXU      79</span></span>
<span id="cb59-49"><a href="#cb59-49" aria-hidden="true" tabindex="-1"></a><span class="co">## RYF      31</span></span>
<span id="cb59-50"><a href="#cb59-50" aria-hidden="true" tabindex="-1"></a><span class="co">## RYU      73</span></span>
<span id="cb59-51"><a href="#cb59-51" aria-hidden="true" tabindex="-1"></a><span class="co">## T1      160</span></span>
<span id="cb59-52"><a href="#cb59-52" aria-hidden="true" tabindex="-1"></a><span class="co">## T2        9</span></span>
<span id="cb59-53"><a href="#cb59-53" aria-hidden="true" tabindex="-1"></a><span class="co">## T3       14</span></span>
<span id="cb59-54"><a href="#cb59-54" aria-hidden="true" tabindex="-1"></a><span class="co">## T4       17</span></span>
<span id="cb59-55"><a href="#cb59-55" aria-hidden="true" tabindex="-1"></a><span class="co">## T5       37</span></span>
<span id="cb59-56"><a href="#cb59-56" aria-hidden="true" tabindex="-1"></a><span class="co">## T6        5</span></span>
<span id="cb59-57"><a href="#cb59-57" aria-hidden="true" tabindex="-1"></a><span class="co">## T7       21</span></span>
<span id="cb59-58"><a href="#cb59-58" aria-hidden="true" tabindex="-1"></a><span class="co">## TA      110</span></span>
<span id="cb59-59"><a href="#cb59-59" aria-hidden="true" tabindex="-1"></a><span class="co">## TS        9</span></span>
<span id="cb59-60"><a href="#cb59-60" aria-hidden="true" tabindex="-1"></a><span class="co">## TYF       1</span></span>
<span id="cb59-61"><a href="#cb59-61" aria-hidden="true" tabindex="-1"></a><span class="co">## Name: Imp_Type, dtype: int64</span></span>
<span id="cb59-62"><a href="#cb59-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-63"><a href="#cb59-63" aria-hidden="true" tabindex="-1"></a>pd.crosstab(index <span class="op">=</span> housing_lincoln[<span class="st">"decade"</span>], columns <span class="op">=</span> housing_lincoln[<span class="st">"Imp_Type"</span>])</span>
<span id="cb59-64"><a href="#cb59-64" aria-hidden="true" tabindex="-1"></a><span class="co">## Imp_Type   BL   BN  C1  C2  CA  CB  CXF  CXU  ...  T3  T4  T5  T6  T7  TA  TS  TYF</span></span>
<span id="cb59-65"><a href="#cb59-65" aria-hidden="true" tabindex="-1"></a><span class="co">## decade                                        ...                                 </span></span>
<span id="cb59-66"><a href="#cb59-66" aria-hidden="true" tabindex="-1"></a><span class="co">## 1900.0      0   77   1  14   7   5    0    0  ...   0   0   0   0   0   0   0    0</span></span>
<span id="cb59-67"><a href="#cb59-67" aria-hidden="true" tabindex="-1"></a><span class="co">## 1910.0      0   84   0   9  14  11    1    0  ...   0   0   0   0   0   0   0    0</span></span>
<span id="cb59-68"><a href="#cb59-68" aria-hidden="true" tabindex="-1"></a><span class="co">## 1920.0      0  413   8  12  17   0    2    1  ...   0   0   0   0   0   0   0    0</span></span>
<span id="cb59-69"><a href="#cb59-69" aria-hidden="true" tabindex="-1"></a><span class="co">## 1930.0      0  176   0   1   5   0    0    2  ...   0   0   0   0   0   0   0    0</span></span>
<span id="cb59-70"><a href="#cb59-70" aria-hidden="true" tabindex="-1"></a><span class="co">## 1940.0      0   14   1   1   4   0    1    0  ...   0   0   0   0   0   0   0    0</span></span>
<span id="cb59-71"><a href="#cb59-71" aria-hidden="true" tabindex="-1"></a><span class="co">## 1950.0      0    0   0   2   1   1    0    0  ...   0   0   0   0   0   0   0    0</span></span>
<span id="cb59-72"><a href="#cb59-72" aria-hidden="true" tabindex="-1"></a><span class="co">## 1960.0    119    0   0   0   0   0    0    0  ...   0   0   0   0   0   0   0    0</span></span>
<span id="cb59-73"><a href="#cb59-73" aria-hidden="true" tabindex="-1"></a><span class="co">## 1970.0     42    0   0   0   0   0    0    0  ...   4   0   0   0   0   0   6    0</span></span>
<span id="cb59-74"><a href="#cb59-74" aria-hidden="true" tabindex="-1"></a><span class="co">## 1980.0      0    0   1   0   0   0    0    0  ...  10  16   8   4   5  74   3    1</span></span>
<span id="cb59-75"><a href="#cb59-75" aria-hidden="true" tabindex="-1"></a><span class="co">## 1990.0      1    0   0   0   0   0    0    0  ...   0   0  29   1  13   4   0    0</span></span>
<span id="cb59-76"><a href="#cb59-76" aria-hidden="true" tabindex="-1"></a><span class="co">## 2000.0      1    0   0   0   0   0    0    0  ...   0   0   0   0   3  32   0    0</span></span>
<span id="cb59-77"><a href="#cb59-77" aria-hidden="true" tabindex="-1"></a><span class="co">## 2010.0      0    0   0   0   0   0    0    0  ...   0   1   0   0   0   0   0    0</span></span>
<span id="cb59-78"><a href="#cb59-78" aria-hidden="true" tabindex="-1"></a><span class="co">## 2020.0      0    0   0   0   0   0    0    0  ...   0   0   0   0   0   0   0    0</span></span>
<span id="cb59-79"><a href="#cb59-79" aria-hidden="true" tabindex="-1"></a><span class="co">## </span></span>
<span id="cb59-80"><a href="#cb59-80" aria-hidden="true" tabindex="-1"></a><span class="co">## [13 rows x 39 columns]</span></span>
<span id="cb59-81"><a href="#cb59-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-82"><a href="#cb59-82" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb59-83"><a href="#cb59-83" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> statsmodels.graphics.mosaicplot <span class="im">import</span> mosaic</span>
<span id="cb59-84"><a href="#cb59-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-85"><a href="#cb59-85" aria-hidden="true" tabindex="-1"></a>mosaic(housing_lincoln, [<span class="st">"decade"</span>, <span class="st">"Imp_Type"</span>], title <span class="op">=</span> <span class="st">"Housing Built by Type, Decade"</span>)</span>
<span id="cb59-86"><a href="#cb59-86" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/housing-categorical-py-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>We can also look at the square footage for each improvement type:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb60"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a>housing_subcat <span class="op">=</span> [<span class="st">"BN"</span>, <span class="st">"R1"</span>, <span class="st">"RA"</span>, <span class="st">"R2"</span>]</span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a>housing_sub <span class="op">=</span> housing_lincoln.loc[housing_lincoln[<span class="st">"Imp_Type"</span>].isin(housing_subcat)]</span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a>housing_sub <span class="op">=</span> housing_sub.assign(Imp_cat <span class="op">=</span> pd.Categorical(housing_sub[<span class="st">"Imp_Type"</span>], categories <span class="op">=</span> housing_subcat))</span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-6"><a href="#cb60-6" aria-hidden="true" tabindex="-1"></a>housing_sub.boxplot(<span class="st">"TLA"</span>, by <span class="op">=</span> <span class="st">"Imp_cat"</span>)</span>
<span id="cb60-7"><a href="#cb60-7" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure"><p><img src="02a-eda_files/figure-html/housing-cat-cts-py-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>This makes sense - there are relatively few bungalows (BN), but R1 means 1 story house, R2 means 2 story house, and RA is a so-called 1.5 story house; we would expect an increase in square footage with each additional floor of the house (broadly speaking).</p>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Learn More: Janitor R package
</div>
</div>
<div class="callout-body-container callout-body">
<p>The janitor package <span class="citation" data-cites="janitorpkg"><a href="#ref-janitorpkg" role="doc-biblioref">[4]</a></span> has some very convenient functions for cleaning up messy data. One of its best features is the <code>clean_names()</code> function, which creates names based on a capitalization/separation scheme of your choosing.</p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure"><p><img src="../images/wrangling/janitor_clean_names.png" class="img-fluid figure-img"></p>
<figcaption>janitor and clean_names() by Allison Horst</figcaption></figure>
</div>
</div>
</div>
</section></section></section><section id="sec-eda-refs" class="level2" data-number="19.6"><h2 data-number="19.6" class="anchored" data-anchor-id="sec-eda-refs">
<span class="header-section-number">19.6</span> References</h2>


<div id="refs" class="references csl-bib-body" data-entry-spacing="0" role="list">
<div id="ref-r4ds" class="csl-entry" role="listitem">
<div class="csl-left-margin">[1] </div>
<div class="csl-right-inline">G. Grolemund and H. Wickham, <em>R for <span>Data</span> <span>Science</span></em>, 1st ed. O’Reilly Media, 2017 [Online]. Available: <a href="https://r4ds.had.co.nz/">https://r4ds.had.co.nz/</a>. [Accessed: May 09, 2022]</div>
</div>
<div id="ref-tierneyNaniarDataStructures2021" class="csl-entry" role="listitem">
<div class="csl-left-margin">[2] </div>
<div class="csl-right-inline">N. Tierney, D. Cook, M. McBain, and C. Fay, <em>Naniar: <span>Data</span> structures, summaries, and visualisations for missing data</em>. 2021 [Online]. Available: <a href="https://CRAN.R-project.org/package=naniar">https://CRAN.R-project.org/package=naniar</a>
</div>
</div>
<div id="ref-danielbourkeGentleIntroductionExploratory2019" class="csl-entry" role="listitem">
<div class="csl-left-margin">[3] </div>
<div class="csl-right-inline">Daniel Bourke, <span>“A <span>Gentle</span> <span>Introduction</span> to <span>Exploratory</span> <span>Data</span> <span>Analysis</span>,”</span> <em>Daniel Bourke</em>. Jan. 2019 [Online]. Available: <a href="https://www.mrdbourke.com/a-gentle-introduction-to-exploratory-data-analysis/">https://www.mrdbourke.com/a-gentle-introduction-to-exploratory-data-analysis/</a>. [Accessed: Jun. 13, 2022]</div>
</div>
<div id="ref-janitorpkg" class="csl-entry" role="listitem">
<div class="csl-left-margin">[4] </div>
<div class="csl-right-inline">S. Firke, <em>Janitor: Simple tools for examining and cleaning dirty data</em>. 2021 [Online]. Available: <a href="https://CRAN.R-project.org/package=janitor">https://CRAN.R-project.org/package=janitor</a>
</div>
</div>
</div>
</section><aside id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes"><hr>
<ol>
<li id="fn1"><p>One package for this process in R is <code>naniar</code> <span class="citation" data-cites="tierneyNaniarDataStructures2021"><a href="#ref-tierneyNaniarDataStructures2021" role="doc-biblioref">[2]</a></span>.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>A histogram is a chart which breaks up a continuous variable into ranges, where the height of the bar is proportional to the number of items in the range. A bar chart is similar, but shows the number of occurrences of a discrete variable.<a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol></aside></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleGiscusIfUsed = (isAlternate, darkModeDefault) => {
    const baseTheme = document.querySelector('#giscus-base-theme')?.value ?? 'light';
    const alternateTheme = document.querySelector('#giscus-alt-theme')?.value ?? 'dark';
    let newTheme = '';
    if(darkModeDefault) {
      newTheme = isAlternate ? baseTheme : alternateTheme;
    } else {
      newTheme = isAlternate ? alternateTheme : baseTheme;
    }
    const changeGiscusTheme = () => {
      // From: https://github.com/giscus/giscus/issues/336
      const sendMessage = (message) => {
        const iframe = document.querySelector('iframe.giscus-frame');
        if (!iframe) return;
        iframe.contentWindow.postMessage({ giscus: message }, 'https://giscus.app');
      }
      sendMessage({
        setConfig: {
          theme: newTheme
        }
      });
    }
    const isGiscussLoaded = window.document.querySelector('iframe.giscus-frame') !== null;
    if (isGiscussLoaded) {
      changeGiscusTheme();
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  const darkModeDefault = false;
  let localAlternateSentinel = darkModeDefault ? 'alternate' : 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
    toggleGiscusIfUsed(toAlternate, darkModeDefault);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    const typesetMath = (el) => {
      if (window.MathJax) {
        // MathJax Typeset
        window.MathJax.typeset([el]);
      } else if (window.katex) {
        // KaTeX Render
        var mathElements = el.getElementsByClassName("math");
        var macros = [];
        for (var i = 0; i < mathElements.length; i++) {
          var texText = mathElements[i].firstChild;
          if (mathElements[i].tagName == "SPAN") {
            window.katex.render(texText.data, mathElements[i], {
              displayMode: mathElements[i].classList.contains('display'),
              throwOnError: false,
              macros: macros,
              fleqn: false
            });
          }
        }
      }
    }
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        typesetMath(container);
        return container.innerHTML
      } else {
        typesetMath(note);
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      typesetMath(note);
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><script src="https://giscus.app/client.js" data-repo="srvanderplas/stat-computing-r-python" data-repo-id="R_kgDOIvwd2g" data-category="General" data-category-id="DIC_kwDOIvwd2s4CTksR" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script><input type="hidden" id="giscus-base-theme" value="light"><input type="hidden" id="giscus-alt-theme" value="dark"><nav class="page-navigation"><div class="nav-page nav-page-previous">
      <a href="../part-wrangling/02-basic-data-vis.html" class="pagination-link  aria-label=" visualization="" basics="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Data Visualization Basics</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../part-wrangling/02b-graphics.html" class="pagination-link" aria-label="<span class='chapter-number'>20</span>&nbsp; <span class='chapter-title'>Data Visualization</span>">
        <span class="nav-page-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">Data Visualization</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2024, Susan Vanderplas</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/srvanderplas">
      <i class="bi bi-github" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://twitter.com/srvanderplas">
      <i class="bi bi-twitter" role="img">
</i> 
    </a>
  </li>  
    <li class="nav-item compact">
    <a class="nav-link" href="https://datavis.social/@srvanderplas">
      <i class="bi bi-mastodon" role="img">
</i> 
    </a>
  </li>  
</ul>
</div>
  </div>
</footer>


</body></html>