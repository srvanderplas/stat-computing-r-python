<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.39">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="dcterms.date" content="2025-10-24">

<title>21&nbsp; Creating Good Charts – Statistical Computing using R and Python</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../part-wrangling/03-data-cleaning.html" rel="next">
<link href="../part-wrangling/02b-graphics.html" rel="prev">
<link href="../build_deps/favicon.ico" rel="icon">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-3e476e15ae565c222d94875412ae43a1.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-e5743f53fa41095997804694e2f5b46d.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-4ZFBDKXJXP"></script>

<script type="text/javascript">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-4ZFBDKXJXP', { 'anonymize_ip': true});
</script>
<script src="https://kit.fontawesome.com/baac5f0610.js" crossorigin="anonymous"></script>
<style>
div.callout-example.callout {
  border-left-color: #f39c12;
}
div.callout-example.callout-style-default > .callout-header {
  background-color: rgba(243, 156, 18, 0.13);
}
div.callout-example .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-example.callout-style-default .callout-icon::before, div.callout-example.callout-titled .callout-icon::before {
  font-family: 'Font Awesome 6 Free', FontAwesome;
  font-style: normal;
  content: '\f206' !important;
  background-image: none;
}
div.callout-setup.callout {
  border-left-color: #f3e969;
}
div.callout-setup.callout-style-default > .callout-header {
  background-color: rgba(243, 233, 105, 0.13);
}
div.callout-setup .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-setup.callout-style-default .callout-icon::before, div.callout-setup.callout-titled .callout-icon::before {
  font-family: 'Font Awesome 6 Free', FontAwesome;
  font-style: normal;
  content: '\f6e3' !important;
  background-image: none;
}
div.callout-diy.callout {
  border-left-color: #b3e094;
}
div.callout-diy.callout-style-default > .callout-header {
  background-color: rgba(179, 224, 148, 0.13);
}
div.callout-diy .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-diy.callout-style-default .callout-icon::before, div.callout-diy.callout-titled .callout-icon::before {
  font-family: 'Font Awesome 6 Free', FontAwesome;
  font-style: normal;
  content: '\f0ad' !important;
  background-image: none;
}
div.callout-demo.callout {
  border-left-color: #91d5d4;
}
div.callout-demo.callout-style-default > .callout-header {
  background-color: rgba(145, 213, 212, 0.13);
}
div.callout-demo .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-demo.callout-style-default .callout-icon::before, div.callout-demo.callout-titled .callout-icon::before {
  font-family: 'Font Awesome 6 Free', FontAwesome;
  font-style: normal;
  content: '\f12e' !important;
  background-image: none;
}
div.callout-advanced.callout {
  border-left-color: #cbbaf9;
}
div.callout-advanced.callout-style-default > .callout-header {
  background-color: rgba(203, 186, 249, 0.13);
}
div.callout-advanced .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-advanced.callout-style-default .callout-icon::before, div.callout-advanced.callout-titled .callout-icon::before {
  font-family: 'Font Awesome 6 Free', FontAwesome;
  font-style: normal;
  content: '\f5dc' !important;
  background-image: none;
}
div.callout-learnmore.callout {
  border-left-color: #f09bb6;
}
div.callout-learnmore.callout-style-default > .callout-header {
  background-color: rgba(240, 155, 182, 0.13);
}
div.callout-learnmore .callout-toggle::before {  background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="rgb(33, 37, 41)" class="bi bi-chevron-down" viewBox="0 0 16 16"><path fill-rule="evenodd" d="M1.646 4.646a.5.5 0 0 1 .708 0L8 10.293l5.646-5.647a.5.5 0 0 1 .708.708l-6 6a.5.5 0 0 1-.708 0l-6-6a.5.5 0 0 1 0-.708z"/></svg>');}
div.callout-learnmore.callout-style-default .callout-icon::before, div.callout-learnmore.callout-titled .callout-icon::before {
  font-family: 'Font Awesome 6 Free', FontAwesome;
  font-style: normal;
  content: '\f02d' !important;
  background-image: none;
}
</style>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../build_deps/style.css">
</head>

<body class="nav-sidebar floating slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../part-wrangling/00-wrangling.html">Part III: Data Wrangling</a></li><li class="breadcrumb-item"><a href="../part-wrangling/02c-good-graphics.html"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Creating Good Charts</span></a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="Search" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">Statistical Computing using R and Python</a> 
        <div class="sidebar-tools-main">
    <a href="https://github.com/srvanderplas/stat-computing-r-python/" title="Source Code" class="quarto-navigation-tool px-1" aria-label="Source Code"><i class="bi bi-github"></i></a>
  <a href="" class="quarto-reader-toggle quarto-navigation-tool px-1" onclick="window.quartoToggleReader(); return false;" title="Toggle reader mode">
  <div class="quarto-reader-toggle-btn">
  <i class="bi"></i>
  </div>
</a>
</div>
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Preface</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../part-tools/00-tools-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part I: Tools</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/01-computer-basics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">1</span>&nbsp; <span class="chapter-title">Computer Basics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/02-setting-up-computer.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">2</span>&nbsp; <span class="chapter-title">Setting Up Your Computer</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/03-Rstudio-interface.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">3</span>&nbsp; <span class="chapter-title">RStudio’s Interface</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/04-scripts-notebooks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">4</span>&nbsp; <span class="chapter-title">Scripts and Notebooks and Terminals</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/05-git-and-github.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">5</span>&nbsp; <span class="chapter-title">Version Control with Git</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-tools/06-documents.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">6</span>&nbsp; <span class="chapter-title">Reproducibility and Professional Communication</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../part-gen-prog/00-gen-prog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part II: General Programming</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/00-intro.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">7</span>&nbsp; <span class="chapter-title">Introduction to Programming</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/01-basic-var-types.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">8</span>&nbsp; <span class="chapter-title">Variables and Basic Data Types</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/01a-math-logical-operators.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">9</span>&nbsp; <span class="chapter-title">Mathematical and Logical Operators</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/02-prog-functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">10</span>&nbsp; <span class="chapter-title">Functions, Packages, and Environments</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/03-data-struct.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">11</span>&nbsp; <span class="chapter-title">Data Structures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/035-matrix-calcs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">12</span>&nbsp; <span class="chapter-title">Matrix Calculations</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/04-control-struct.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">13</span>&nbsp; <span class="chapter-title">Control Structures</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/05-functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">14</span>&nbsp; <span class="chapter-title">Writing Functions</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/06-debugging.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">15</span>&nbsp; <span class="chapter-title">Debugging</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-gen-prog/07-prog-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">16</span>&nbsp; <span class="chapter-title">Programming With Data</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../part-wrangling/00-wrangling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part III: Data Wrangling</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/01-data-input.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">17</span>&nbsp; <span class="chapter-title">Data Input</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/02-basic-data-vis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">18</span>&nbsp; <span class="chapter-title">Data Visualization Basics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/02a-eda.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">19</span>&nbsp; <span class="chapter-title">Exploratory Data Analysis</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/02b-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">A Grammar of Graphics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/02c-good-graphics.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Creating Good Charts</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/03-data-cleaning.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Data Cleaning</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/04-strings.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">23</span>&nbsp; <span class="chapter-title">Working with Strings</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/05-data-reshape.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">24</span>&nbsp; <span class="chapter-title">Reshaping Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/05b-normal-forms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">25</span>&nbsp; <span class="chapter-title">Normal Forms of Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/06-data-join.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">26</span>&nbsp; <span class="chapter-title">Joining Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/07-datetime.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">27</span>&nbsp; <span class="chapter-title">Dates and Times</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-wrangling/08-functional-prog.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">28</span>&nbsp; <span class="chapter-title">Functional Programming</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a href="../part-advanced-topics/00-advanced.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Part IV: Advanced Topics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/01-simulation.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">29</span>&nbsp; <span class="chapter-title">Simulation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/02-data-doc.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">30</span>&nbsp; <span class="chapter-title">Data Documentation</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/03-web-scraping.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">31</span>&nbsp; <span class="chapter-title">Web Scraping</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/04-xml-json-list-processing.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">32</span>&nbsp; <span class="chapter-title">Record-based Data and List Processing Strategies</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/05-APIs.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">33</span>&nbsp; <span class="chapter-title">Application Programming Interfaces</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/06-pdf-tools.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">34</span>&nbsp; <span class="chapter-title">Working with PDFs</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/07-intro-interactive-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">35</span>&nbsp; <span class="chapter-title">Animated and Interactive Graphics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/08-javascript-graphics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">36</span>&nbsp; <span class="chapter-title">JavaScript Graphics</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/09-big-data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">37</span>&nbsp; <span class="chapter-title">“Big” Data</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/10-databases.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">38</span>&nbsp; <span class="chapter-title">Databases</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/11-arrow-parquet.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">39</span>&nbsp; <span class="chapter-title">Efficient Data Access: Arrow and Parquet Files</span></span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../part-advanced-topics/12-memory-handling.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">40</span>&nbsp; <span class="chapter-title">Memory and Computational Efficiency</span></span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../graveyard.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text"><span class="chapter-number">41</span>&nbsp; <span class="chapter-title">Other Topics</span></span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#objectives" id="toc-objectives" class="nav-link active" data-scroll-target="#objectives">Objectives</a></li>
  <li><a href="#introduction" id="toc-introduction" class="nav-link" data-scroll-target="#introduction"><span class="header-section-number">21.1</span> Introduction</a></li>
  <li><a href="#sec-cognition-perception" id="toc-sec-cognition-perception" class="nav-link" data-scroll-target="#sec-cognition-perception"><span class="header-section-number">21.2</span> Cognitive and Perceptual Foundations</a>
  <ul class="collapse">
  <li><a href="#color" id="toc-color" class="nav-link" data-scroll-target="#color"><span class="header-section-number">21.2.1</span> Color</a></li>
  <li><a href="#preattentive-features" id="toc-preattentive-features" class="nav-link" data-scroll-target="#preattentive-features"><span class="header-section-number">21.2.2</span> Preattentive Features</a></li>
  <li><a href="#short-term-memory" id="toc-short-term-memory" class="nav-link" data-scroll-target="#short-term-memory"><span class="header-section-number">21.2.3</span> Short Term Memory</a></li>
  <li><a href="#grouping-and-sense-making" id="toc-grouping-and-sense-making" class="nav-link" data-scroll-target="#grouping-and-sense-making"><span class="header-section-number">21.2.4</span> Grouping and Sense-making</a></li>
  </ul></li>
  <li><a href="#sec-design-process" id="toc-sec-design-process" class="nav-link" data-scroll-target="#sec-design-process"><span class="header-section-number">21.3</span> Designing Good Graphics Using the Grammar</a>
  <ul class="collapse">
  <li><a href="#representing-data-accurately" id="toc-representing-data-accurately" class="nav-link" data-scroll-target="#representing-data-accurately"><span class="header-section-number">21.3.1</span> Representing Data Accurately</a></li>
  <li><a href="#show-the-data" id="toc-show-the-data" class="nav-link" data-scroll-target="#show-the-data"><span class="header-section-number">21.3.2</span> Show the Data</a></li>
  <li><a href="#sec-annotation" id="toc-sec-annotation" class="nav-link" data-scroll-target="#sec-annotation"><span class="header-section-number">21.3.3</span> Annotations</a></li>
  </ul></li>
  <li><a href="#sec-checklist" id="toc-sec-checklist" class="nav-link" data-scroll-target="#sec-checklist"><span class="header-section-number">21.4</span> Evaluating Graphics: Effectiveness, Clarity, and Comprehension</a></li>
  <li><a href="#sec-good-graphics-refs" id="toc-sec-good-graphics-refs" class="nav-link" data-scroll-target="#sec-good-graphics-refs"><span class="header-section-number">21.5</span> References</a></li>
  </ul>
<div class="toc-actions"><ul><li><a href="https://github.com/srvanderplas/stat-computing-r-python/edit/main/part-wrangling/02c-good-graphics.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></nav>
    </div>
<!-- main -->
<main class="content page-columns page-full column-body" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../part-wrangling/00-wrangling.html">Part III: Data Wrangling</a></li><li class="breadcrumb-item"><a href="../part-wrangling/02c-good-graphics.html"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Creating Good Charts</span></a></li></ol></nav>
<div class="quarto-title">
<h1 class="title"><span id="sec-good-graphics" class="quarto-section-identifier"><span class="chapter-number">21</span>&nbsp; <span class="chapter-title">Creating Good Charts</span></span></h1>
</div>



<div class="quarto-title-meta column-body">

    
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">October 24, 2025</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<section id="objectives" class="level2 unnumbered">
<h2 class="unnumbered anchored" data-anchor-id="objectives">Objectives</h2>
<ul>
<li>Understand what features make graphics effective</li>
<li>Evaluate existing charts for accessibility and readability</li>
<li>Make improvements to charts to increase comprehension and accessibility</li>
</ul>
</section>
<section id="introduction" class="level2" data-number="21.1">
<h2 data-number="21.1" class="anchored" data-anchor-id="introduction"><span class="header-section-number">21.1</span> Introduction</h2>
<p>A chart is <strong>good</strong> if it allows the user to draw <em>useful conclusions that are supported by data</em>. Obviously, this definition depends on the purpose of the chart. A simple and disposable chart created during an exploratory data analysis process may be useful even if it is not nicely formatted and publication ready, because its purpose is to guide an interactive process. This is very different than a chart created for communicating with the public – for instance, a forecast map showing possible paths and intensities of a hurricane that would inform resident decisions about storm preparation and/or evacuation.</p>
<p>Comprehensive advice on creating good charts is difficult, too, because what works for one dataset may not work for another, even if the variable types are similar. We have some established conventions that should usually be followed (for instance, time usually is placed on the x-axis, with a dependent variable on the y-axis), but there are usually situations where it is reasonable to break those conventions.</p>
<p>Finally, what makes a chart “good” requires some additional knowledge beyond statistics and programming. To make good charts, we have to understand how those charts will be interpreted, which means we need at least some basic information about human perception and cognition. The human visual system is incredibly powerful - it has a bandwidth that would make even modern computers jealous, and many computations are performed instantaneously and without requiring any process management (e.g.&nbsp;the calculations happen so fast and so automatically that you aren’t really aware that they’re happening). This comes with some tradeoffs, though - evolutionary optimizations that ensure that you can spot predators quickly weren’t as concerned with your ability to accurately determine the height of a two-dimensional drawing of a three-dimensional object. So, while the visual system has some amazing strengths and is a very useful medium to communicate about data, it is important to understand the limitations of the visual system’s sensors, software, short-term and long term memory, and attention.</p>
<p>We’ll start with a short exploration of some foundational concepts related to perception in <a href="#sec-cognition-perception" class="quarto-xref"><span>Section 21.2</span></a>. <a href="#sec-design-process" class="quarto-xref"><span>Section 21.3</span></a> will discuss the design process and how to leverage the grammar of graphics to provide both the full data and visual summaries that highlight key features. Where available, this section incorporates conclusions from empirical studies of charts and graphs to guide design decisions.<br>
<a href="#sec-annotation" class="quarto-xref"><span>Section 21.3.3</span></a> expands on this discussion, demonstrating effective use of annotations to provide contextual information that can assist viewers with the interpretation of the data. Finally, <a href="#sec-checklist" class="quarto-xref"><span>Section 21.4</span></a> provides a guide to evaluating graphics for clarity, effectiveness, accessibility, and common design pitfalls.</p>
</section>
<section id="sec-cognition-perception" class="level2" data-number="21.2">
<h2 data-number="21.2" class="anchored" data-anchor-id="sec-cognition-perception"><span class="header-section-number">21.2</span> Cognitive and Perceptual Foundations</h2>
<p>Before we discuss how to create good charts, there is a certain amount of background information that must be considered. Charts make use of the visual system within the human brain, which means we need to understand some basic attributes of human perception and cognition in order to make the best use of this “wetware” <span class="citation" data-cites="wikipediacontributorsWetwareBrain2025"><a href="#ref-wikipediacontributorsWetwareBrain2025" role="doc-biblioref">[1]</a></span> processing power.</p>
<!-- Basic overview of components of the visual system - eye, optic nerve, processing centers of the brain, visual cortex (hardware) and software -->
<p>First, let’s set the stage. Information in the form of light bounces off objects in the world and lands on our retina (there are lenses and focusing mechanisms that we’ll skip). There are four types of light detectors in the retina: three types of cones that respond to red, green, and blue light wavelengths, and rods, which respond to light intensity across wavelengths. Cones are concentrated in one area, while rods are spread across the surface of the retina. The rods and cones turn light into neural impulses, which are transmitted along the optic nerve to the <strong>visual cortex</strong> located in the back of the brain (roughly where your head would hit the floor when you are lying down). The visual cortex contains special neurons called feature detectors which organize the information from the retina and reconstruct this information into a mental representation of the world. Some feature detectors respond to specific angles, signals from specific parts of the retina corresponding to specific parts of the outside world, and many other low-level features. Signals from these feature detectors are then aggregated into higher-level concepts that form our visual experience of the world.</p>
<p>The initial light signals and lower-level information are sometimes called “sensation”, and the ability to detect higher-level concepts is called “perception”. We can also think of “top-down” perception, where our experience shapes what we perceive and how we experience the world, compared to “bottom-up” perception, where we construct higher-level concepts solely from lower-level signals.</p>
<p>Perception tends to require a few other mental resources beyond the visual detection and processing equipment (eyes, visual cortex, etc.): attention and memory (short and long-term) are vital for processing the visual input and making sense out of it. The next few subsections provide specific examples of why it’s important to understand the basics of the visual system when thinking about how to construct charts and graphs.</p>
<section id="color" class="level3" data-number="21.2.1">
<h3 data-number="21.2.1" class="anchored" data-anchor-id="color"><span class="header-section-number">21.2.1</span> Color</h3>
<p>Our eyes are optimized for perceiving the yellow/green region of the color spectrum, as shown in <a href="#fig-sensitivity" class="quarto-xref">Figure&nbsp;<span>21.1</span></a>. Why? Well, our sun produces yellow light, and plants tend to be green. It’s pretty important to be able to distinguish different shades of green (evolutionarily speaking) because it impacts your ability to feed yourself. There aren’t that many purple or blue predators, so there is less selection pressure to improve perception of that part of the visual spectrum.</p>
<div id="fig-sensitivity" class="quarto-float quarto-figure quarto-figure-center anchored" alt="The image is a graph illustrating eye color sensitivity in relation to the visible light spectrum, from around 400 to 700 nanometers. It features a large, smooth bell curve with a peak in the green wavelength range, indicating maximum sensitivity. The spectrum is displayed as a gradient, transitioning smoothly from violet on the left to red on the right. The vertical axis shows percentage sensitivity from 0 to 100, marked at intervals of 10.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-sensitivity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/wrangling/Eyesensitivity.png" class="img-fluid figure-img" style="width:50.0%" alt="The image is a graph illustrating eye color sensitivity in relation to the visible light spectrum, from around 400 to 700 nanometers. It features a large, smooth bell curve with a peak in the green wavelength range, indicating maximum sensitivity. The spectrum is displayed as a gradient, transitioning smoothly from violet on the left to red on the right. The vertical axis shows percentage sensitivity from 0 to 100, marked at intervals of 10.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-sensitivity-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.1: Sensitivity of the human eye to different wavelengths of visual light (Image from <a href="https://upload.wikimedia.org/wikipedia/commons/c/c0/Eyesensitivity.svg">Wikimedia commons</a>)
</figcaption>
</figure>
</div>
<p>Not everyone perceives color in the same way. Some individuals are <a href="https://en.wikipedia.org/wiki/Color_blindness">colorblind or color deficient</a> <span class="citation" data-cites="wikipediacontributors23c"><a href="#ref-wikipediacontributors23c" role="doc-biblioref">[2]</a></span>. We have 3 cones used for color detection, as well as cells called rods, which detect light intensity (brightness/darkness). In about 5% of the population (10% of XY individuals, 0.2% of XX individuals), one or more of the cones may be missing or malformed, leading to color blindness - a reduced ability to perceive different shades. The rods, however, function normally in almost all of the population, which means that light/dark contrasts are extremely safe, while contrasts based on the hue of the color are problematic in some instances.</p>
<div class="callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Demo: Types of Colorblindness
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>Simulations of the same rainbow color scheme map under different types of colorblindness, generated using <a href="https://www.color-blindness.com/coblis-color-blindness-simulator/">CoBliS</a>. While colorblindness simulations can be useful, as colorblindness is a result of one of many different mutations, simulators do not cover all of the different color vision mutations which exist.</p>
<div>

</div>
<div class="quarto-layout-panel" data-layout="[[-.25, 1, -0.25],[1,1,1],[1,1,1]]">
<div class="quarto-layout-row">
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 16.7%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
<div class="quarto-layout-cell" style="flex-basis: 66.7%;justify-content: flex-start;">
<div id="fig-colorblind-map-normal" class="quarto-float quarto-figure quarto-figure-center anchored" alt="The image is a detailed map of the contiguous United States highlighting the estimated fraction of precipitation lost to evapotranspiration from 1971 to 2000. The map is divided into multicolored geographic blocks representing different evapotranspiration ratios. Colors range from purple, signifying a ratio of 0.0 to 0.09, to red, representing a ratio of 1.2 to 1.29. The western part of the country predominantly features warmer colors like yellow and orange, indicating higher evapotranspiration ratios, whereas the eastern part is depicted mostly in cooler colors such as blue and green, showing lower ratios. The map includes a legend on the bottom left, providing a key for understanding the color-coded ratios.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-colorblind-map-normal-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/wrangling/evapotranspiration-map.jpg" class="img-fluid figure-img" alt="The image is a detailed map of the contiguous United States highlighting the estimated fraction of precipitation lost to evapotranspiration from 1971 to 2000. The map is divided into multicolored geographic blocks representing different evapotranspiration ratios. Colors range from purple, signifying a ratio of 0.0 to 0.09, to red, representing a ratio of 1.2 to 1.29. The western part of the country predominantly features warmer colors like yellow and orange, indicating higher evapotranspiration ratios, whereas the eastern part is depicted mostly in cooler colors such as blue and green, showing lower ratios. The map includes a legend on the bottom left, providing a key for understanding the color-coded ratios.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-colorblind-map-normal-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.2: Original (Normal Color Vision)
</figcaption>
</figure>
</div>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 16.7%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div id="fig-colorblind-map-protanomaly" class="quarto-float quarto-figure quarto-figure-center anchored" alt="The image is a detailed map of the contiguous United States highlighting the estimated fraction of precipitation lost to evapotranspiration from 1971 to 2000. The map is divided into multicolored geographic blocks representing different evapotranspiration ratios. Colors range from purple, signifying a ratio of 0.0 to 0.09, to red, representing a ratio of 1.2 to 1.29. The western part of the country predominantly features warmer colors like yellow and orange, indicating higher evapotranspiration ratios, whereas the eastern part is depicted mostly in cooler colors such as blue and green, showing lower ratios. The map includes a legend on the bottom left, providing a key for understanding the color-coded ratios.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-colorblind-map-protanomaly-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/wrangling/evapotranspiration-map-protanomaly.png" class="img-fluid figure-img" alt="The image is a detailed map of the contiguous United States highlighting the estimated fraction of precipitation lost to evapotranspiration from 1971 to 2000. The map is divided into multicolored geographic blocks representing different evapotranspiration ratios. Colors range from purple, signifying a ratio of 0.0 to 0.09, to red, representing a ratio of 1.2 to 1.29. The western part of the country predominantly features warmer colors like yellow and orange, indicating higher evapotranspiration ratios, whereas the eastern part is depicted mostly in cooler colors such as blue and green, showing lower ratios. The map includes a legend on the bottom left, providing a key for understanding the color-coded ratios.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-colorblind-map-protanomaly-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.3: Protanomaly (Weak red vision)
</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div id="fig-colorblind-map-deuteranomaly" class="quarto-float quarto-figure quarto-figure-center anchored" alt="The image is a detailed map of the contiguous United States highlighting the estimated fraction of precipitation lost to evapotranspiration from 1971 to 2000. The map is divided into multicolored geographic blocks representing different evapotranspiration ratios. Colors range from purple, signifying a ratio of 0.0 to 0.09, to red, representing a ratio of 1.2 to 1.29. The western part of the country predominantly features warmer colors like yellow and orange, indicating higher evapotranspiration ratios, whereas the eastern part is depicted mostly in cooler colors such as blue and green, showing lower ratios. The map includes a legend on the bottom left, providing a key for understanding the color-coded ratios.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-colorblind-map-deuteranomaly-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/wrangling/evapotranspiration-map-deuteranomaly.png" class="img-fluid figure-img" alt="The image is a detailed map of the contiguous United States highlighting the estimated fraction of precipitation lost to evapotranspiration from 1971 to 2000. The map is divided into multicolored geographic blocks representing different evapotranspiration ratios. Colors range from purple, signifying a ratio of 0.0 to 0.09, to red, representing a ratio of 1.2 to 1.29. The western part of the country predominantly features warmer colors like yellow and orange, indicating higher evapotranspiration ratios, whereas the eastern part is depicted mostly in cooler colors such as blue and green, showing lower ratios. The map includes a legend on the bottom left, providing a key for understanding the color-coded ratios.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-colorblind-map-deuteranomaly-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.4: Deuteranomaly (Weak green vision)
</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div id="fig-colorblind-map-tritanomaly" class="quarto-float quarto-figure quarto-figure-center anchored" alt="The image is a detailed map of the contiguous United States highlighting the estimated fraction of precipitation lost to evapotranspiration from 1971 to 2000. The map is divided into multicolored geographic blocks representing different evapotranspiration ratios. Colors range from purple, signifying a ratio of 0.0 to 0.09, to red, representing a ratio of 1.2 to 1.29. The western part of the country predominantly features warmer colors like yellow and orange, indicating higher evapotranspiration ratios, whereas the eastern part is depicted mostly in cooler colors such as blue and green, showing lower ratios. The map includes a legend on the bottom left, providing a key for understanding the color-coded ratios.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-colorblind-map-tritanomaly-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/wrangling/evapotranspiration-map-tritanomaly.png" class="img-fluid figure-img" alt="The image is a detailed map of the contiguous United States highlighting the estimated fraction of precipitation lost to evapotranspiration from 1971 to 2000. The map is divided into multicolored geographic blocks representing different evapotranspiration ratios. Colors range from purple, signifying a ratio of 0.0 to 0.09, to red, representing a ratio of 1.2 to 1.29. The western part of the country predominantly features warmer colors like yellow and orange, indicating higher evapotranspiration ratios, whereas the eastern part is depicted mostly in cooler colors such as blue and green, showing lower ratios. The map includes a legend on the bottom left, providing a key for understanding the color-coded ratios.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-colorblind-map-tritanomaly-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.5: Tritanomaly (Weak blue vision)
</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div id="fig-colorblind-map-protanopia" class="quarto-float quarto-figure quarto-figure-center anchored" alt="The image is a detailed map of the contiguous United States highlighting the estimated fraction of precipitation lost to evapotranspiration from 1971 to 2000. The map is divided into multicolored geographic blocks representing different evapotranspiration ratios. Colors range from purple, signifying a ratio of 0.0 to 0.09, to red, representing a ratio of 1.2 to 1.29. The western part of the country predominantly features warmer colors like yellow and orange, indicating higher evapotranspiration ratios, whereas the eastern part is depicted mostly in cooler colors such as blue and green, showing lower ratios. The map includes a legend on the bottom left, providing a key for understanding the color-coded ratios.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-colorblind-map-protanopia-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/wrangling/evapotranspiration-map-protanopia.png" class="img-fluid figure-img" alt="The image is a detailed map of the contiguous United States highlighting the estimated fraction of precipitation lost to evapotranspiration from 1971 to 2000. The map is divided into multicolored geographic blocks representing different evapotranspiration ratios. Colors range from purple, signifying a ratio of 0.0 to 0.09, to red, representing a ratio of 1.2 to 1.29. The western part of the country predominantly features warmer colors like yellow and orange, indicating higher evapotranspiration ratios, whereas the eastern part is depicted mostly in cooler colors such as blue and green, showing lower ratios. The map includes a legend on the bottom left, providing a key for understanding the color-coded ratios.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-colorblind-map-protanopia-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.6: Protanopia (No red cone)
</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div id="fig-colorblind-map-deuteranopia" class="quarto-float quarto-figure quarto-figure-center anchored" alt="The image is a detailed map of the contiguous United States highlighting the estimated fraction of precipitation lost to evapotranspiration from 1971 to 2000. The map is divided into multicolored geographic blocks representing different evapotranspiration ratios. Colors range from purple, signifying a ratio of 0.0 to 0.09, to red, representing a ratio of 1.2 to 1.29. The western part of the country predominantly features warmer colors like yellow and orange, indicating higher evapotranspiration ratios, whereas the eastern part is depicted mostly in cooler colors such as blue and green, showing lower ratios. The map includes a legend on the bottom left, providing a key for understanding the color-coded ratios.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-colorblind-map-deuteranopia-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/wrangling/evapotranspiration-map-deuteranopia.png" class="img-fluid figure-img" alt="The image is a detailed map of the contiguous United States highlighting the estimated fraction of precipitation lost to evapotranspiration from 1971 to 2000. The map is divided into multicolored geographic blocks representing different evapotranspiration ratios. Colors range from purple, signifying a ratio of 0.0 to 0.09, to red, representing a ratio of 1.2 to 1.29. The western part of the country predominantly features warmer colors like yellow and orange, indicating higher evapotranspiration ratios, whereas the eastern part is depicted mostly in cooler colors such as blue and green, showing lower ratios. The map includes a legend on the bottom left, providing a key for understanding the color-coded ratios.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-colorblind-map-deuteranopia-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.7: Deuteranopia (No green cone)
</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div id="fig-colorblind-map-tritanopia" class="quarto-float quarto-figure quarto-figure-center anchored" alt="The image is a detailed map of the contiguous United States highlighting the estimated fraction of precipitation lost to evapotranspiration from 1971 to 2000. The map is divided into multicolored geographic blocks representing different evapotranspiration ratios. Colors range from purple, signifying a ratio of 0.0 to 0.09, to red, representing a ratio of 1.2 to 1.29. The western part of the country predominantly features warmer colors like yellow and orange, indicating higher evapotranspiration ratios, whereas the eastern part is depicted mostly in cooler colors such as blue and green, showing lower ratios. The map includes a legend on the bottom left, providing a key for understanding the color-coded ratios.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-colorblind-map-tritanopia-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/wrangling/evapotranspiration-map-tritanopia.png" class="img-fluid figure-img" alt="The image is a detailed map of the contiguous United States highlighting the estimated fraction of precipitation lost to evapotranspiration from 1971 to 2000. The map is divided into multicolored geographic blocks representing different evapotranspiration ratios. Colors range from purple, signifying a ratio of 0.0 to 0.09, to red, representing a ratio of 1.2 to 1.29. The western part of the country predominantly features warmer colors like yellow and orange, indicating higher evapotranspiration ratios, whereas the eastern part is depicted mostly in cooler colors such as blue and green, showing lower ratios. The map includes a legend on the bottom left, providing a key for understanding the color-coded ratios.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-colorblind-map-tritanopia-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.8: Tritanopia (No blue cone)
</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-2-contents" aria-controls="callout-2" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Colorblindness Testing
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-2" class="callout-2-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>You can take a test designed to screen for colorblindness <a href="https://eyeque.com/color-blind-test/">here</a>. Your monitor may affect how you score on these tests - I am colorblind, but on some monitors, I can pass the test, and on some, I perform worse than normal. A different test is available <a href="https://www.color-blindness.com/farnsworth-munsell-100-hue-color-vision-test/">here</a>.</p>
<div>

</div>
<div class="quarto-layout-panel" data-layout-ncol="3">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/wrangling/colorblindness_monitorLG.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1" title="My results on one monitor"><img src="../images/wrangling/colorblindness_monitorLG.png" class="img-fluid figure-img" alt="Colorblindness test results: Various color deficiencies. Reports low deuteranopia/anomaly, no protanopia/anomaly and low tritanopia/anomaly."></a></p>
<figcaption>My results on one monitor</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/wrangling/colorblindness_monitorDell.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2" title="My results on a monitor that has a different tech and supposedly higher color fidelity"><img src="../images/wrangling/colorblindness_monitorDell.png" class="img-fluid figure-img" alt="Colorblindness test results: Various color deficiencies. Reports no deuteranopia/anomaly, and low protanopia/anomaly and tritanopia/anomaly."></a></p>
<figcaption>My results on a monitor that has a different tech and supposedly higher color fidelity</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 33.3%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><a href="../images/wrangling/colorblind_munsell.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3" title="The Munsell colorblindness test"><img src="../images/wrangling/colorblind_munsell.png" class="img-fluid figure-img" alt="The image shows an interface of the Farnsworth-Munsell 100 Hue Color Vision Test. At the top are navigation tabs labeled: Introduction, Instructions, Test Score, Interpretation, and Comparison Group. Below the tabs, on the left, is a circular graph called the Personal Error Score Diagram. It features a central circle with grid lines radiating outward. The circle is surrounded by a ring of smaller colored circles, forming a gradient that transitions through various hues. A thick black line traces the perimeter of the central circle, indicating score errors in different segments. The colors range from red, yellow, green, and blue. Significant error points are highlighted on the chart, and a large section in purple is shaded to indicate potential color confusion. To the right, explanatory text describes the test results, with sections titled: Personal Error Score Diagram, Your Total Error Score (TES): 72, and Typical Confusion Areas. Below this, there is a multiple-choice section with options to indicate different types of color blindness, including Red-Blind (protan), Green-Blind (deutan), and Blue-Blind (tritan), with the Blue-Blind option selected."></a></p>
<figcaption>The Munsell colorblindness test</figcaption>
</figure>
</div>
</div>
</div>
</div>
<p>In reality, I know that I have issues with perceiving some shades of red, green, and brown. I have particular trouble with very dark or very light colors, especially when they are close to grey or brown.</p>
</div>
</div>
</div>
<p>In addition to colorblindness, there are other factors than the actual color value which are important in how we experience color, such as context.</p>
<div class="cell" data-layout="[[-10, 30, -20, 20, -10]]">
<div id="fig-checker-shadow" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-checker-shadow-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 11.1%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-checker-shadow" style="flex-basis: 33.3%;justify-content: flex-start;">
<div id="fig-checker-shadow-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-checker-shadow-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/wrangling/CheckerShadow.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-checker-shadow">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-checker-shadow-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) The original illusion
</figcaption>
</figure>
</div>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 22.2%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-checker-shadow" style="flex-basis: 22.2%;justify-content: flex-start;">
<div id="fig-checker-shadow-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-checker-shadow-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/wrangling/CheckerShadow2.png" class="img-fluid figure-img" style="width:100.0%" data-ref-parent="fig-checker-shadow">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-checker-shadow-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) The illusion with the checkerboard and shadow removed
</figcaption>
</figure>
</div>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 11.1%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-checker-shadow-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.9: The color constancy illusion. The squares marked A and B are actually the same color.
</figcaption>
</figure>
</div>
</div>
<p>Our brains are extremely dependent on context and make excellent use of the large amounts of experience we have with the real world. As a result, we implicitly “remove” the effect of things like shadows as we make sense of the input to the visual system. This can result in odd things, like the checkerboard and shadow shown in <a href="#fig-checker-shadow" class="quarto-xref">Figure&nbsp;<span>21.9</span></a> - because the brain automatically corrects for the shadow, B looks lighter than A, even though when the context is removed they are clearly the same shade.</p>
<section id="takeaways" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="takeaways">Takeaways</h4>
<ul>
<li>Do not use rainbow color gradient schemes
<ul>
<li>because of the unequal perception of different wavelengths, these schemes are <em>misleading</em> - the color distance does not match the perceptual distance.</li>
</ul></li>
<li>Avoid any scheme that uses green-yellow-red signaling if you have a target audience that may include colorblind people.</li>
<li>To “colorblind-proof” a graphic:
<ul>
<li>double encoding - where you use color, use another aesthetic (line type, shape) as well to help your colorblind readers out</li>
<li>If you can print your chart out in black and white and still read it, it will be safe for colorblind users. This is the only foolproof way to do it!</li>
<li>If you are using a color gradient, use a <strong>monochromatic color scheme</strong> where possible. This is perceived as light -&gt; dark by colorblind people, so it will be correctly perceived no matter what color you use.</li>
<li>If you have a <strong>bidirectional scale</strong> (e.g.&nbsp;showing positive and negative values), the safest scheme to use is purple - white - orange. In any color scale that is multi-hue, it is important to transition through white, instead of from one color to another directly.</li>
</ul></li>
<li>Be conscious of what certain colors “mean”
<ul>
<li>Leveraging common associations can make it easier to read a color scale and remember what it stands for
<ul>
<li>blue for cold, orange/red for hot is a natural scale</li>
<li>red = Republican and blue = Democrat in the US (since ~1980)</li>
<li>white -&gt; blue gradients for showing rainfall totals</li>
</ul></li>
<li>Some colors can can provoke emotional responses that may not be desirable.<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a></li>
<li>Consider the social baggage that certain color schemes may have
<ul>
<li>pink/blue color scheme often used for gender may be polarizing</li>
<li>Consider using a cooler color (blue or purple) for men and a warmer color (yellow, orange, lighter green) for women<a href="#fn2" class="footnote-ref" id="fnref2" role="doc-noteref"><sup>2</sup></a>.</li>
</ul></li>
</ul></li>
<li>There are packages such as <code>RColorBrewer</code> and <code>dichromat</code> that have color palettes which are aesthetically pleasing, and, in many cases, colorblind friendly (<code>dichromat</code> is better for that than <code>RColorBrewer</code>). You can also take a look at other <a href="https://lisacharlotterost.de/2016/04/22/Colors-for-DataVis/">ways to find nice color palettes</a>.</li>
</ul>
</section>
</section>
<section id="preattentive-features" class="level3" data-number="21.2.2">
<h3 data-number="21.2.2" class="anchored" data-anchor-id="preattentive-features"><span class="header-section-number">21.2.2</span> Preattentive Features</h3>
<p>You’ve almost certainly noticed that some graphical tasks are easier than others. Part of the reason for this is that certain tasks require active engagement and attention to search through the visual stimulus; others, however, just “pop” out of the background. We call these features that just “pop” without active work <strong>preattentive</strong> features; technically, they are detected within the first 250ms of viewing a stimulus <span class="citation" data-cites="treisman_preattentive_1985"><a href="#ref-treisman_preattentive_1985" role="doc-biblioref">[3]</a></span>.</p>
<p>Take a look at <a href="#fig-preattentive1" class="quarto-xref">Figure&nbsp;<span>21.10</span></a>; can you spot the point that is different?</p>
<div id="fig-preattentive1" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-preattentive1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-preattentive1" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-preattentive1-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-preattentive1-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02c-good-graphics_files/figure-html/fig-preattentive1-1.png" class="img-fluid figure-img" data-ref-parent="fig-preattentive1" width="1200">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-preattentive1-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Shape
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-preattentive1" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-preattentive1-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-preattentive1-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02c-good-graphics_files/figure-html/fig-preattentive1-2.png" class="img-fluid figure-img" data-ref-parent="fig-preattentive1" width="1200">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-preattentive1-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Color
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-preattentive1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.10: Two scatterplots with one point that is different. Can you easily spot the different point?
</figcaption>
</figure>
</div>
<p>Color and shape are commonly used graphical features that are processed pre-attentively. Some people suggest utilizing this to pack more dimensions into multivariate visualizations <span class="citation" data-cites="healey_high-speed_1996"><a href="#ref-healey_high-speed_1996" role="doc-biblioref">[4]</a></span>, but in general, knowing which features are processed more quickly (color/shape) and which are processed more slowly (combinations of preattentively processed features) allows you to design a chart that requires less cognitive effort to read.</p>
<p>As awesome as it is to be able to use preattentive features to process information, we cannot use combinations of preattentive features to show different variables - these combinations are no longer processed preattentively. Take a look at <a href="#fig-preattentive2" class="quarto-xref">Figure&nbsp;<span>21.11</span></a> - part (a) shows the same grouping in color and shape, part (b) shows color and shape used to encode different variables.</p>
<div id="fig-preattentive2" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-preattentive2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-preattentive2" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-preattentive2-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-preattentive2-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02c-good-graphics_files/figure-html/fig-preattentive2-1.png" class="img-fluid figure-img" data-ref-parent="fig-preattentive2" width="1200">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-preattentive2-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) Shape and Color (dual encoded)
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-preattentive2" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-preattentive2-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-preattentive2-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02c-good-graphics_files/figure-html/fig-preattentive2-2.png" class="img-fluid figure-img" data-ref-parent="fig-preattentive2" width="1200">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-preattentive2-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) Shape and Color (different variables)
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-preattentive2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.11: Two scatterplots. Can you easily spot the different point(s)?
</figcaption>
</figure>
</div>
<p>Here, it is easy to differentiate the points in <a href="#fig-preattentive2" class="quarto-xref">Figure&nbsp;<span>21.11</span></a>(a), because they are dual-encoded. However, it is very difficult to pick out the different groups of points in <a href="#fig-preattentive2" class="quarto-xref">Figure&nbsp;<span>21.11</span></a>(b) because the combination of preattentive features requires active attention to sort out.</p>
<section id="takeaways-1" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="takeaways-1">Takeaways</h4>
<p>Careful use of preattentive features can reduce the cognitive effort required for viewers to perceive a chart.</p>
<p>Encode only one variable using preattentive features, as combinations of preattentive features are not processed preattentively.</p>
</section>
</section>
<section id="short-term-memory" class="level3" data-number="21.2.3">
<h3 data-number="21.2.3" class="anchored" data-anchor-id="short-term-memory"><span class="header-section-number">21.2.3</span> Short Term Memory</h3>
<p>We have a limited amount of memory that we can instantaneously utilize. This mental space, called <strong>short-term memory</strong>, holds information for active use, but only for a limited amount of time.</p>
<div class="callout callout-style-default callout-example callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Try it out!
</div>
</div>
<div class="callout-body-container callout-body">
<div class="callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-3-contents" aria-controls="callout-3" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Click here, read the information, and then click to hide it.
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-3" class="callout-3-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>1 4 2 2 3 9 8 0 7 8</p>
</div>
</div>
</div>
<div class="callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-4-contents" aria-controls="callout-4" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Wait a few seconds, then expand this section
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-4" class="callout-4-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>What was the third number?</p>
</div>
</div>
</div>
</div>
</div>
<p>Without rehearsing the information (repeating it over and over to yourself), the try it out task may have been challenging. Short term memory has a capacity of between 3 and 9 “bits” of information.</p>
<p>In charts and graphs, short term memory is important because we need to be able to associate information from e.g.&nbsp;a key, legend, or caption with information plotted on the graph. If you try to plot more than ~6 categories of information, your reader will have to shift between the legend and the graph repeatedly, increasing the amount of cognitive labor required to digest the information in the chart.</p>
<p>Where possible, try to keep your legends to 6 or 7 characteristics.</p>
<section id="takeaways-2" class="level4 unnumbered">
<h4 class="unnumbered anchored" data-anchor-id="takeaways-2">Takeaways</h4>
<ul>
<li><p>Limit the number of categories in your legends to minimize the short term memory demands on your reader.</p>
<ul>
<li>When using continuous color schemes, you may want to use a log scale to better show differences in value across orders of magnitude.</li>
</ul></li>
<li><p>Use colors and symbols which have implicit meaning to minimize the need to refer to the legend.</p></li>
<li><p>Add annotations on the plot, where possible, to reduce the need to re-read captions.</p></li>
</ul>
</section>
</section>
<section id="grouping-and-sense-making" class="level3" data-number="21.2.4">
<h3 data-number="21.2.4" class="anchored" data-anchor-id="grouping-and-sense-making"><span class="header-section-number">21.2.4</span> Grouping and Sense-making</h3>
<p>The catchphrase of Gestalt psychology is</p>
<blockquote class="blockquote">
<p>The whole is greater than the sum of the parts</p>
</blockquote>
<p>That is, what we perceive and the meaning we derive from the visual scene is more than the individual components of that visual scene.</p>
<p>Our brains have to be very good at imposing order on visual chaos – there is a <em>huge</em> amount of information being processed by the visual system all the time, and some basic heuristics (guesses/shortcuts) are important in this process.</p>
<p>When we create charts, it becomes important to understand these heuristics so that we can make it easier for people to understand the data. Working with the natural sense making algorithms in the brain requires less cognitive effort, which leaves more space for thinking about the data.</p>
<p>Let’s start with a few examples that show how the brain constructs meaning from ambiguous or conflicting stimuli.</p>
<div class="callout callout-style-default callout-demo callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="header-section-number">21.2.4.1</span> Demo: Constructing Visual Meaning
</div>
</div>
<div class="callout-body-container callout-body">
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Ambiguous Image</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Illusory Contours</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-3" role="tab" aria-controls="tabset-1-3" aria-selected="false">Figure/Ground</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<p>What does <a href="#fig-rabbit-duck" class="quarto-xref">Figure&nbsp;<span>21.12</span></a> look like to you?</p>
<div id="fig-rabbit-duck" class="quarto-float quarto-figure quarto-figure-center anchored" alt="An ambiguous image: when viewed from the right side, it looks like a duck, and when viewed from the bottom side, it looks like a rabbit. The x and y axes are labeled as 'rabbit' and 'duck', respectively.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-rabbit-duck-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/wrangling/duckrabbit.png" class="img-fluid figure-img" style="width:50.0%" alt="An ambiguous image: when viewed from the right side, it looks like a duck, and when viewed from the bottom side, it looks like a rabbit. The x and y axes are labeled as 'rabbit' and 'duck', respectively.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-rabbit-duck-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.12: Is it a rabbit, or a duck?
</figcaption>
</figure>
</div>
<p>When faced with ambiguity, our brains use available context and past experience to try to tip the balance between alternate interpretations of an image. When there is still some ambiguity, many times the brain will just decide to interpret an image as one of the possible options. Sometimes, the brain will even flip between the possible options, as in the <a href="https://en.wikipedia.org/wiki/Necker_cube">Necker cube</a> illusion.</p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="../images/wrangling/IllusoryContour.png" class="img-fluid figure-img" style="width:30.0%" alt="An Illusory contour. It appears to be 3 black circles arranged in a downward-pointing triangle, with a black outline of a triangle pointing upward, and a background-colored (white) downward pointing triangle overlaid on top of the two previously described triangles. In reality, what is shown is a sequence of three pac-man shapes, with the missing pieces oriented inwards, at approximately 30, 150, and 270 degrees from the positive x-axis, with three 60 degree acute angle shapes oriented at 90, 210, and 330 degrees from the positive x-axis. The appearance of two triangles superimposed is an illusory contour that results from Gestalt heuristics."></p>
<figcaption>Consider this image - what do you see?</figcaption>
</figure>
</div>
<p>Did you see something like “3 circles, a triangle with a black outline, and a white triangle on top of that”? In reality, there are 3 angles and 3 pac-man shapes. But, it’s much more likely that we’re seeing layers of information, where some of the information is obscured (like the “mouth” of the pac-man circles, or the middle segment of each side of the triangle). This explanation is simpler, and more consistent with our experience.</p>
<p>This illusory contour image is closely related to the Gestalt concepts of closure and “good figure”.</p>
</div>
<div id="tabset-1-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-3-tab">
<p>Consider the logo for the Pittsburgh Zoo.</p>
<p><img src="../images/wrangling/Pittsburgh_Zoo_logo.png" class="img-fluid" style="width:50.0%" alt="The logo of the Pittsburgh Zoo, which manipulates figure-ground perception. If the black portion of the image is considered the figure, the viewer sees a tree and some birds flying; if the white portion of the image is considered the figure, then the viewer sees a gorilla facing a lion, with some fish jumping above the waves at the bottom of the image. When viewed for several minutes, the figure and ground tend to 'flip' back and forth."></p>
<p>Do you see the gorilla and lionness? Or do you see a tree? Here, we’re not entirely sure which part of the image is the figure and which is the background.</p>
<p>One of the first tasks we have when confronted with a visual scene is to separate the important part of the image (the figure) from the background. In most cases this is straightforward, but occasionally, artificial images (as opposed to real world scenes) can be hard to interpret. The zoo logo shown above leverages this ambiguity to capture your visual attention.</p>
</div>
</div>
</div>
<p>The ambiguous figures shown above demonstrate that our brains are actively imposing order upon the visual stimuli we encounter.</p>
</div>
</div>
<p>The Gestalt heuristics attempt to explain how our brains group and order visual stimuli to make sense of the world. You can read about the gestalt rules <a href="https://en.wikipedia.org/wiki/Principles_of_grouping">here</a>, but they are also demonstrated in <a href="#fig-gestalt-summary" class="quarto-xref">Figure&nbsp;<span>21.13</span></a>.</p>
<div id="fig-gestalt-summary" class="quarto-float quarto-figure quarto-figure-center anchored" alt="The word GESTALT, written such that there is a white bar over the G, illustrating the principle of closure, the E is made up of black squares, indicating proximity, the S has a bar going through it such that the middle part of the S is behind the bar, illustrating continuation, the Ts are both striped, illustrating similarity, and the A and L are smushed together, with a tree appearing within the A (the bar is missing across the A) to illustrate figure/ground.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-gestalt-summary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/wrangling/gestalt.jpg" class="img-fluid figure-img" alt="The word GESTALT, written such that there is a white bar over the G, illustrating the principle of closure, the E is made up of black squares, indicating proximity, the S has a bar going through it such that the middle part of the S is behind the bar, illustrating continuation, the Ts are both striped, illustrating similarity, and the A and L are smushed together, with a tree appearing within the A (the bar is missing across the A) to illustrate figure/ground.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-gestalt-summary-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.13: The Gestalt Heuristics help us to impose order on ambiguous visual stimuli.
</figcaption>
</figure>
</div>
<p>In graphics, we make use of the Gestalt principles of grouping to create order and meaning. If we color points by another variable, we are creating groups of similar points which assist with the perception of groups instead of individual observations. If we add a trend line, we create the perception that the points are moving “with” the line (in most cases), or occasionally, that the line is dividing up two groups of points. Depending on what features of the data you wish to emphasize, you might choose different aesthetics mappings, facet variables, and factor orders.</p>
<div class="callout callout-style-default callout-demo callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Demo: Grouping and Geometries
</div>
</div>
<div class="callout-body-container callout-body">
<p>Suppose I want to emphasize the change in life expectancy between 1982 and 2007. For this, we’ll use the Gapminder <span class="citation" data-cites="gapminder"><a href="#ref-gapminder" role="doc-biblioref">[5]</a></span> data which is found in the <code>gapminder</code> packages in R and python.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gapminder)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1982</span>, <span class="dv">2007</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Korea, Rep."</span>, <span class="st">"China"</span>, <span class="st">"Afghanistan"</span>, <span class="st">"India"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> country, <span class="at">y =</span> lifeExp, <span class="at">fill =</span> <span class="fu">factor</span>(year))) <span class="sc">+</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"dodge"</span>) <span class="sc">+</span></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Life Expectancy"</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">%&gt;%</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1982</span>, <span class="dv">2007</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Korea, Rep."</span>, <span class="st">"China"</span>, <span class="st">"Afghanistan"</span>, <span class="st">"India"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> lifeExp, <span class="at">color =</span> country)) <span class="sc">+</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Life Expectancy"</span>)</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>gapminder <span class="sc">|&gt;</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">1982</span>, <span class="dv">2007</span>)) <span class="sc">|&gt;</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">factor</span>(year), <span class="at">y =</span> lifeExp)) <span class="sc">+</span> </span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span> </span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"Life Expectancy"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-emphasis-gapminder-r" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-emphasis-gapminder-r-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-emphasis-gapminder-r" style="flex-basis: 33.3%;justify-content: flex-start;">
<div id="fig-emphasis-gapminder-r-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-emphasis-gapminder-r-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02c-good-graphics_files/figure-html/fig-emphasis-gapminder-r-1.png" class="img-fluid figure-img" data-ref-parent="fig-emphasis-gapminder-r" width="1200">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-emphasis-gapminder-r-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) A bar chart allows comparisons of change over time for each country as well as cross-country comparisons.
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-emphasis-gapminder-r" style="flex-basis: 33.3%;justify-content: flex-start;">
<div id="fig-emphasis-gapminder-r-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-emphasis-gapminder-r-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02c-good-graphics_files/figure-html/fig-emphasis-gapminder-r-2.png" class="img-fluid figure-img" data-ref-parent="fig-emphasis-gapminder-r" width="1200">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-emphasis-gapminder-r-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) A line chart centers changes over time for each country.
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-emphasis-gapminder-r" style="flex-basis: 33.3%;justify-content: flex-start;">
<div id="fig-emphasis-gapminder-r-3" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-emphasis-gapminder-r-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02c-good-graphics_files/figure-html/fig-emphasis-gapminder-r-3.png" class="img-fluid figure-img" data-ref-parent="fig-emphasis-gapminder-r" width="1200">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-emphasis-gapminder-r-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(c) A boxplot shows overall change in aggregate over time, but does not show individual country data.
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-emphasis-gapminder-r-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.14: Three different charts created from the same data. Which one best demonstrates that in every country, the life expectancy increased between 1982 and 2007?
</figcaption>
</figure>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<details class="code-fold">
<summary>Show the code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># %pip install gapminder</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> gapminder <span class="im">import</span> gapminder</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn.objects <span class="im">as</span> so</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt <span class="co"># to clear plots</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>my_gap <span class="op">=</span> gapminder.query(<span class="st">'year.isin([1982,2007])'</span>)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>my_gap <span class="op">=</span> my_gap.query(<span class="st">'country.isin(["Korea, Rep.", "China", "Afghanistan", "India"])'</span>)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>my_gap <span class="op">=</span> my_gap.assign(yearFactor<span class="op">=</span>pd.Categorical(my_gap.year))</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>plot <span class="op">=</span> so.Plot(my_gap, x <span class="op">=</span> <span class="st">"country"</span>, y <span class="op">=</span> <span class="st">"lifeExp"</span>, color <span class="op">=</span> <span class="st">"yearFactor"</span>).<span class="op">\</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  add(so.Bar(), so.Dodge()).<span class="op">\</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a>  label(y <span class="op">=</span> <span class="st">"Life Expectancy"</span>)</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a>plot.show()</span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>plt.clf() <span class="co"># Clear plot workspace</span></span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>plot <span class="op">=</span> so.Plot(my_gap, x <span class="op">=</span> <span class="st">"year"</span>, y <span class="op">=</span> <span class="st">"lifeExp"</span>, color <span class="op">=</span> <span class="st">"country"</span>).<span class="op">\</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  add(so.Lines()).<span class="op">\</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>  label(y <span class="op">=</span> <span class="st">"Life Expectancy"</span>)</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a>plot.show()</span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>plt.clf()  <span class="co"># Clear plot workspace</span></span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a>sns.boxplot(data <span class="op">=</span> my_gap, x <span class="op">=</span> <span class="st">"year"</span>, y <span class="op">=</span> <span class="st">"lifeExp"</span>)</span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div id="fig-emphasis-gapminder-py" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-emphasis-gapminder-py-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-emphasis-gapminder-py" style="flex-basis: 33.3%;justify-content: flex-start;">
<div id="fig-emphasis-gapminder-py-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-emphasis-gapminder-py-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02c-good-graphics_files/figure-html/fig-emphasis-gapminder-py-1.png" class="img-fluid figure-img" data-ref-parent="fig-emphasis-gapminder-py" width="614">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-emphasis-gapminder-py-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) A bar chart allows comparisons of change over time for each country as well as cross-country comparisons.
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-emphasis-gapminder-py" style="flex-basis: 33.3%;justify-content: flex-start;">
<div id="fig-emphasis-gapminder-py-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-emphasis-gapminder-py-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02c-good-graphics_files/figure-html/fig-emphasis-gapminder-py-2.png" class="img-fluid figure-img" data-ref-parent="fig-emphasis-gapminder-py" width="614">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-emphasis-gapminder-py-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) A line chart centers changes over time for each country.
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-emphasis-gapminder-py" style="flex-basis: 33.3%;justify-content: flex-start;">
<div id="fig-emphasis-gapminder-py-3" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-emphasis-gapminder-py-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02c-good-graphics_files/figure-html/fig-emphasis-gapminder-py-3.png" class="img-fluid figure-img" data-ref-parent="fig-emphasis-gapminder-py" width="384">
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-emphasis-gapminder-py-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(c) A boxplot shows overall change in aggregate over time, but does not show individual country data.
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-emphasis-gapminder-py-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.15: Three different charts created from the same data. Which one best demonstrates that in every country, the life expectancy increased between 1982 and 2007?
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<p>If the goal is to emphasize that every single country had an increase in life expectancy over the period, the best chart is the line chart - we can see upward slopes for each country leading to the conclusion that life expectancy increased. This leverages the Gestalt principles of “similarity” and “common fate”. Similarity, in that all lines point in the same direction, and common fate (often used for motion, e.g.&nbsp;a flock of birds are a group because they move together) because the lines are all “moving together”.</p>
<p>We can derive the same information from the bar chart, but we have to work a bit more for it, because we naturally group bars together by country (proximity) and by year (similarity). We have to then notice that the 2007 bar is bigger for each country to come to the same conclusion – this takes a bit more cognitive effort.</p>
<p>We cannot get the specifics from the box plot, because we cannot see individual country data. This is a case where a summary statistic actually destroys the conclusion we might want to draw from the data and leaves us with weaker information - we can see that there is an increase in the minimum, median, and maximum life expectancy, but it is possible to have this and still have a single-country decrease in life expectancy, so we cannot draw the same conclusion from the box plot that we can from the bar or line charts.</p>
</div>
</div>
<p>The geometric mappings and aesthetic choices you make when creating plots have a huge impact on the conclusions that you (and others) can easily make when examining plots. Choosing the wrong geometry or statistic can obscure the point you want to make using the data, leading your reader to draw a conclusion that is unsupported, less important, or misleading.</p>
<p>On the other hand, using aesthetic mappings to highlight information can ensure that viewers see the important information you’re trying to communicate <a href="#fn3" class="footnote-ref" id="fnref3" role="doc-noteref"><sup>3</sup></a>, and can even tilt the balance when two equally valid conclusions are present in a chart. This power should be used responsibly.</p>
<div class="callout callout-style-default callout-demo callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Demo: Facets and Grouping
</div>
</div>
<div class="callout-body-container callout-body">
<p>When creating a visualization that involves many different (usually categorical) variables, it is important to decide which variable is the <strong>primary</strong> comparison of interest. This variable is the one which should be shown in the most easily comparable way – usually, directly on the same plot.</p>
<p>Let’s look at the <code>palmerpenguins</code> data. We have several categorical variables: <code>species</code>, <code>island</code>, <code>year</code> (technically numerical, but there are only 3 years), and <code>sex</code>. The most interesting part of this data set is how the morphology (measurements) of penguins changes based on their sex and species, so let’s explore what different charts examining <code>bill_len</code> and <code>body_mass</code> might look like across those variables. For this example, I’ll drop penguins with an unidentified sex for visual simplicity.</p>
<div class="cell" data-layout="[[-1,2,-1],[1,1]]">
<div id="fig-palmer-penguins-facets" class="quarto-layout-panel">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-palmer-penguins-facets-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<div class="quarto-layout-row">
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 25.0%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-palmer-penguins-facets" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-palmer-penguins-facets-1" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-palmer-penguins-facets-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="02c-good-graphics_files/figure-html/fig-palmer-penguins-facets-7.png" class="lightbox" data-gallery="penguins-facets" title="Figure&nbsp;21.16&nbsp;(a): This plot uses shape, color, and linetype to distinguish the different groups. It’s cluttered, but it is possible to make comparisons across species and sex"><img src="02c-good-graphics_files/figure-html/fig-palmer-penguins-facets-7.png" class="img-fluid figure-img" data-ref-parent="fig-palmer-penguins-facets" width="2100"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-palmer-penguins-facets-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(a) This plot uses shape, color, and linetype to distinguish the different groups. It’s cluttered, but it is possible to make comparisons across species and sex
</figcaption>
</figure>
</div>
</div>
<div class="quarto-figure-spacer quarto-layout-cell" style="flex-basis: 25.0%;justify-content: flex-start;">
<p>&nbsp;</p>
</div>
</div>
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-palmer-penguins-facets" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-palmer-penguins-facets-2" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-palmer-penguins-facets-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="02c-good-graphics_files/figure-html/fig-palmer-penguins-facets-8.png" class="lightbox" data-gallery="penguins-facets" title="Figure&nbsp;21.16&nbsp;(b): This plot facets by species, allowing the user to make easy comparisons across sex for each species separately. Cross species comparisons are somewhat more difficult in this plot because the viewer must shift back and forth between panels."><img src="02c-good-graphics_files/figure-html/fig-palmer-penguins-facets-8.png" class="img-fluid figure-img" data-ref-parent="fig-palmer-penguins-facets" width="2100"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-palmer-penguins-facets-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(b) This plot facets by species, allowing the user to make easy comparisons across sex for each species separately. Cross species comparisons are somewhat more difficult in this plot because the viewer must shift back and forth between panels.
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell-subref quarto-layout-cell" data-ref-parent="fig-palmer-penguins-facets" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-palmer-penguins-facets-3" class="quarto-float quarto-figure quarto-figure-center anchored">
<figure class="quarto-float quarto-subfloat-fig figure">
<div aria-describedby="fig-palmer-penguins-facets-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<a href="02c-good-graphics_files/figure-html/fig-palmer-penguins-facets-9.png" class="lightbox" data-gallery="penguins-facets" title="Figure&nbsp;21.16&nbsp;(c): This plot facets by sex, allowing the user to make easy judgments about the effect of species on measurements. Comparisons between sexes must be made across panels, and require more cognitive effort."><img src="02c-good-graphics_files/figure-html/fig-palmer-penguins-facets-9.png" class="img-fluid figure-img" data-ref-parent="fig-palmer-penguins-facets" width="2100"></a>
</div>
<figcaption class="quarto-float-caption-bottom quarto-subfloat-caption quarto-subfloat-fig" id="fig-palmer-penguins-facets-3-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
(c) This plot facets by sex, allowing the user to make easy judgments about the effect of species on measurements. Comparisons between sexes must be made across panels, and require more cognitive effort.
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-palmer-penguins-facets-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.16: Three views of the <code>palmerpenguins</code> data comparing bill_len and body_mass across sex and species. Click on figures to enlarge.
</figcaption>
</figure>
</div>
</div>
<p>Which plot makes it easier to answer the following questions:</p>
<ul>
<li>Which species of penguin has the most overlap between the size of males and females?</li>
<li>Which species of penguin is the most physically different across both males and females?</li>
<li>What is the overall relationship across species for the size of males vs.&nbsp;females?</li>
</ul>
<p>Different aesthetic mappings and facets can lead to different overall conclusions from the same data. It is important when you are exploring data to generate many different plots, so that you get a more comprehensive picture of your data. When you want to explain the data to others, it is equally important to carefully choose the most important findings from the data and present charts that back up those findings.</p>
</div>
</div>
</section>
</section>
<section id="sec-design-process" class="level2 page-columns page-full" data-number="21.3">
<h2 data-number="21.3" class="anchored" data-anchor-id="sec-design-process"><span class="header-section-number">21.3</span> Designing Good Graphics Using the Grammar</h2>
<section id="representing-data-accurately" class="level3 page-columns page-full" data-number="21.3.1">
<h3 data-number="21.3.1" class="anchored" data-anchor-id="representing-data-accurately"><span class="header-section-number">21.3.1</span> Representing Data Accurately</h3>
<p>In order to read data off of a chart correctly, several things must happen in sequence:</p>
<ol type="1">
<li>The data must be accurately written to the chart, that is, the transformation from data -&gt; geometry must be accurate</li>
<li>The geometric objects that make up the chart must be perceived accurately - the mapping from geometric object size or location to mental model of geometric object size or location must be correct.</li>
<li>The mental model of geometric object size or location must be accurately converted to a numerical value. We know that this isn’t lossless, but we hope that this is at least reasonably accurate.</li>
</ol>
<p>If step 1 is not done correctly, the chart is misleading or inaccurate. However, steps 2 and 3 depend on our brains accurately <strong>perceiving</strong> and <strong>estimating</strong> information mentally. These steps can involve a lot of effort, and as mental effort increases, we tend to take shortcuts. Sometimes, these shortcuts work well, but not always.</p>
<p>When you design a chart, it’s good to consider what mental tasks viewers of your chart need to perform. Then, ask yourself whether there is an equivalent way to represent the data that requires fewer mental operations, or a different representation that requires <strong>easier</strong> mental calculations.</p>
<div class="cell">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/accuracy-guidelines-1.png" class="img-fluid figure-img" style="width:75.0%" alt="A chart with two panels. The left panel is labeled 'Aligned scale' and features three lines of different lengths which all start at the bottom of the chart. The right panel is labeled 'Unaligned scale' and features three lines of different lengths which start at different locations.  It is easier to compare the lengths of the lines in the left panel, since they all start in the same place."></p>
<figcaption>Which of the lines is the longest? Shortest? It is much easier to determine the relative length of the line when the ends are aligned. The three lines have the same length in both panels, but the operation is much more difficult when the lines do not start or end at the same place.</figcaption>
</figure>
</div>
</div>
</div>
<p>When making judgments corresponding to numerical quantities, there is an order of tasks from easiest (1) to hardest (6), with equivalent tasks at the same level. See <a href="https://www.doi.org/10.2307/2288400">this paper</a> for the major source of this ranking; other follow-up studies have been integrated, but the essential order is largely unchanged.</p>
<ol type="1">
<li>Position (common scale)</li>
<li>Position (non-aligned scale)</li>
<li>Length, Direction, Angle, Slope</li>
<li>Area</li>
<li>Volume, Density, Curvature</li>
<li>Shading, Color Saturation, Color Hue</li>
</ol>
<p>If we compare a pie chart and a stacked bar chart, the bar chart asks readers to make judgments of position on a non-aligned scale, while a pie chart asks readers to assess angle. This is one reason why pie charts tend not to be a good general option – people must compare values using area or angle instead of position or length, which is a more difficult judgment under most circumstances. When there are a limited number of categories (2-4) and you have data that is easily compared to quarters of a circle, it may be justifiable to use a pie chart over a stacked bar chart - some studies have shown that pie charts are preferable under these conditions. As a general rule, though, we have an easier time comparing position than angle or area.</p>
<div>

</div>
<div class="cell quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/pie-vs-bar-1.png" class="img-fluid figure-img" alt="A stacked bar chart showing the proportion of people living in North America by country" width="1200"></p>
<figcaption>Stacked bar chart</figcaption>
</figure>
</div>
</div>
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/pie-vs-bar-2.png" class="img-fluid figure-img" alt="A pie chart showing the proportion of people living in North America by country" width="1200"></p>
<figcaption>Pie chart</figcaption>
</figure>
</div>
</div>
</div>
<div class="quarto-layout-row">
<div class="quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<p>Stacked bar and pie charts showing the relative proportion of people in North America living in the US, Canada, and Mexico in 2007. Which chart is easier to read relative information (e.g.&nbsp;there are about 3x as many people living in Mexico as Canada) from? Which chart is easier to estimate raw proportions (e.g.&nbsp;the US makes up about 70% of the population of North America) from?</p>
</div>
</div>
</div>
<p>When creating a chart, it is helpful to consider which variables you want to show, and how accurate reader perception needs to be to get useful information from the chart. In many cases, less is more - you can easily overload someone, which may keep them from engaging with your chart at all <span class="citation" data-cites="contiAttackingInformationVisualization2005"><a href="#ref-contiAttackingInformationVisualization2005" role="doc-biblioref">[6]</a></span>. Variables which require the reader to notice small changes should be shown on position scales (x, y) rather than using color, alpha blending, etc.</p>
<p>Consider the hierarchy of graphical tasks again.</p>
<p>You may notice a general increase in dimensionality from 1-3 to 4 (2d) to 5 (3d). In general, showing information in 3 dimensions when 2 will suffice can be misleading. Just <em>how</em> misleading depends a lot on the type of chart you’re using. Most of the time, the addition of an extra dimension causes an increase in chart area allocated to the item that is disproportionate to the actual numerical value being represented.</p>
<div id="fig-disproportionate-pixels" class="quarto-float quarto-figure quarto-figure-center anchored" alt="A three-dimensional pie chart, where each of the sections has a different height - this seems to double-encode the value represented by the angle of the pie slice. As a result, the area of the chart devoted to one sector is vastly larger than the area of the chart devoted to the other sectors, even though the true values are not nearly so different.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-disproportionate-pixels-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/wrangling/3d_graphs_suck.jpg" class="img-fluid figure-img" alt="A three-dimensional pie chart, where each of the sections has a different height - this seems to double-encode the value represented by the angle of the pie slice. As a result, the area of the chart devoted to one sector is vastly larger than the area of the chart devoted to the other sectors, even though the true values are not nearly so different.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-disproportionate-pixels-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.17: Here, the area and height both encode the same variable, leading to a far disproportionate number of pixels allocated to “Stocks” than “Cash Investments” (h/t Junk Charts). In the first chart, stocks make up 60% of the portfolio, but have 67.5% of the pixels; Cash makes up 5% of the portfolio but those investments represent 2.3% of the pixels.
</figcaption>
</figure>
</div>
<p>Extra dimensions and other annotations are sometimes called “chartjunk” and should only be used if they contribute to the overall numerical accuracy of the chart (e.g.&nbsp;they should not just be for decoration).</p>

<div class="no-row-height column-margin column-container"><div class="">
<div class="quarto-video ratio ratio-16x9"><iframe data-external="1" src="https://www.youtube.com/embed/E91bGT9BjYk" title="Ted ED: How to spot a misleading graph - Lea Gaslowitz" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen=""></iframe></div>
<p><a href="https://www.businessinsider.com/the-27-worst-charts-of-all-time-2013-6">Business Insider: The Worst Graphs Ever</a></p>
</div></div></section>
<section id="show-the-data" class="level3" data-number="21.3.2">
<h3 data-number="21.3.2" class="anchored" data-anchor-id="show-the-data"><span class="header-section-number">21.3.2</span> Show the Data</h3>
<p>This section is inspired by Chapter 8 of Getting More out of Graphics by Antony Unwin. We’ll work with the FIDE (International Chess Federation) data, which ranks individual chess players using all official games. The <code>Chess2020</code> object from the <code>ChessGmooG</code> data package created to accompany Getting More out of Graphics contains the rankings from December 2020.</p>
<div class="callout callout-style-default callout-setup callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-9-contents" aria-controls="callout-9" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Chess Data Setup
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-9" class="callout-9-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>First, we need to do a bit of data setup so that both R and Python can access the data. This time, it’s critical to run the R code first and then python, since we’re exporting the data from R to a CSV that can be read in using python.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="annotated-cell-5"><pre class="sourceCode r code-annotation-code code-with-copy code-annotated"><code class="sourceCode r"><span id="annotated-cell-5-1"><a href="#annotated-cell-5-1" aria-hidden="true" tabindex="-1"></a><span class="do">## packages for the chapter</span></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-5" data-target-annotation="0">0</button><span id="annotated-cell-5-2" class="code-annotation-target"><a href="#annotated-cell-5-2" aria-hidden="true" tabindex="-1"></a><span class="co"># install.packages(c("ggridges", "ChessGmooG"))</span></span>
<span id="annotated-cell-5-3"><a href="#annotated-cell-5-3" aria-hidden="true" tabindex="-1"></a></span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-5" data-target-annotation="1">1</button><span id="annotated-cell-5-4" class="code-annotation-target"><a href="#annotated-cell-5-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ChessGmooG)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-5" data-target-annotation="2">2</button><span id="annotated-cell-5-5" class="code-annotation-target"><a href="#annotated-cell-5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(Chess2020)</span>
<button class="code-annotation-anchor" data-target-cell="annotated-cell-5" data-target-annotation="3">3</button><span id="annotated-cell-5-6" class="code-annotation-target"><a href="#annotated-cell-5-6" aria-hidden="true" tabindex="-1"></a>readr<span class="sc">::</span><span class="fu">write_csv</span>(Chess2020, <span class="at">file =</span> <span class="st">"../data/Chess2020.csv"</span>)</span><div class="code-annotation-gutter-bg"></div><div class="code-annotation-gutter"></div></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-annotation">
<dl class="code-annotation-container-hidden code-annotation-container-grid">
<dt data-target-cell="annotated-cell-5" data-target-annotation="0">0</dt>
<dd>
<span data-code-cell="annotated-cell-5" data-code-lines="2" data-code-annotation="0">Install the R packages necessary for this example</span>
</dd>
<dt data-target-cell="annotated-cell-5" data-target-annotation="1">1</dt>
<dd>
<span data-code-cell="annotated-cell-5" data-code-lines="4" data-code-annotation="1">Load the data package</span>
</dd>
<dt data-target-cell="annotated-cell-5" data-target-annotation="2">2</dt>
<dd>
<span data-code-cell="annotated-cell-5" data-code-lines="5" data-code-annotation="2">Load the data</span>
</dd>
<dt data-target-cell="annotated-cell-5" data-target-annotation="3">3</dt>
<dd>
<span data-code-cell="annotated-cell-5" data-code-lines="6" data-code-annotation="3">Export the data to CSV so it can be loaded in Python</span>
</dd>
</dl>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> numpy <span class="im">as</span> np</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>Chess2020 <span class="op">=</span> pd.read_csv(<span class="st">"../data/Chess2020.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-example callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="header-section-number">21.3.2.1</span> Exploring Distributions: Rating and Age
</div>
</div>
<div class="callout-body-container callout-body">
<p>First, it’s a good idea to generate some basic distributional plots to explore the contents of the data.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_bw</span>())</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Chess2020, <span class="fu">aes</span>(<span class="at">x =</span> DEC20)) <span class="sc">+</span> </span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">10</span>) <span class="sc">+</span> </span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Rating"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"# Players"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" style="width:100.0%" alt="A histogram of FIDE Rating by number of players. The distribution starts at 1500 players with a rating of 1000, and increases to a peak of 3500 players at a rating of 1750. There is a sharp increase in the number of players at rating 2000, and then a steep decline until 2750, where the bins disappear."></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn.objects <span class="im">as</span> so</span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn <span class="im">as</span> sns</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt <span class="co"># Set figure size</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">6</span>,<span class="dv">2</span>))</span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>so.Plot(Chess2020, x <span class="op">=</span> <span class="st">"DEC20"</span>).add(so.Bars(), so.Hist(binwidth<span class="op">=</span><span class="dv">10</span>)).label(x <span class="op">=</span> <span class="st">"Rating"</span>, y <span class="op">=</span> <span class="st">"# Players"</span>).show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid figure-img" style="width:100.0%" alt="A histogram of FIDE Rating by number of players. The distribution starts at 1500 players with a rating of 1000, and increases to a peak of 3500 players at a rating of 1750. There is a sharp increase in the number of players at rating 2000, and then a steep decline until 2750, where the bins disappear."></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/unnamed-chunk-4-2.png" class="img-fluid figure-img" style="width:100.0%" alt="A histogram of FIDE Rating by number of players. The distribution starts at 1500 players with a rating of 1000, and increases to a peak of 3500 players at a rating of 1750. There is a sharp increase in the number of players at rating 2000, and then a steep decline until 2750, where the bins disappear."></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>The data only includes players whose rating is above 1000, which explains the sharp drop-off on the left edge of the distribution. There are slight hints of bumps in the distribution at about 1200 and at the max of about 1750. Other features include the slight spike at 2000, an additional very narrow bump just after 2000, and the long tail after that point.</p>
<div id="fig-mental-model-dist-components" class="quarto-float quarto-figure quarto-figure-center anchored" alt="A sketch of the outline of a histogram, with 50% opacity curves showing spikes, normal distributions, and other shapes that could be decomposed from the overall shape.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-mental-model-dist-components-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="../images/wrangling/mental-model-dist-components.png" class="img-fluid figure-img" style="width:50.0%" alt="A sketch of the outline of a histogram, with 50% opacity curves showing spikes, normal distributions, and other shapes that could be decomposed from the overall shape.">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-mental-model-dist-components-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.18: Decomposing the histograms into hypothetical distributions that might explain the data.
</figcaption>
</figure>
</div>
<p>What if the different curves are due to activity? We have active and inactive players, and we might find that some of the distribution’s features are activity related.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>Chess2020 <span class="ot">&lt;-</span> Chess2020 <span class="sc">|&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Activity =</span> <span class="fu">if_else</span>(Flag <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"wi"</span>, <span class="st">"i"</span>), <span class="st">"Inactive"</span>, <span class="st">"Active"</span>))</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Chess2020, <span class="fu">aes</span>(<span class="at">x =</span> DEC20)) <span class="sc">+</span> </span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">binwidth =</span> <span class="dv">10</span>) <span class="sc">+</span> </span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Rating"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"# Players"</span>) <span class="sc">+</span> </span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(<span class="sc">~</span>Activity)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/unnamed-chunk-5-5.png" class="img-fluid figure-img" alt="The image features two side-by-side histograms depicting the distribution of player ratings. The left histogram is labeled &quot;Active&quot; and shows the number of active players along the y-axis and their ratings along the x-axis, with values ranging from 1000 to approximately 2800. The highest concentration of players is between 1500 and 2000 ratings. The right histogram is labeled &quot;Inactive&quot; and similarly represents the distribution for inactive players, with a comparable range on the x-axis. The peak is also in the 1500 to 2000 range, but with slightly fewer players compared to the active category. Both histograms have a grey fill and share the same x and y-axis scales, allowing for direct comparison." width="1800"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">6</span>,<span class="dv">3</span>))</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>Chess2020[<span class="st">'Activity'</span>] <span class="op">=</span> Chess2020.Flag.replace(to_replace<span class="op">=</span>{<span class="st">"i"</span>:<span class="st">"Inactive"</span>, <span class="st">"wi"</span>: <span class="st">"Inactive"</span>, <span class="st">"w"</span>: <span class="st">"Active"</span>})</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>Chess2020 <span class="op">=</span> Chess2020.fillna({<span class="st">"Activity"</span>:<span class="st">"Active"</span>})</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>so.Plot(Chess2020, x <span class="op">=</span> <span class="st">"DEC20"</span>).add(so.Bars(), so.Hist(binwidth<span class="op">=</span><span class="dv">10</span>)).facet(col<span class="op">=</span><span class="st">"Activity"</span>).label(x <span class="op">=</span> <span class="st">"Rating"</span>, y <span class="op">=</span> <span class="st">"# Players"</span>).show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" alt="The image features two side-by-side histograms depicting the distribution of player ratings. The left histogram is labeled &quot;Active&quot; and shows the number of active players along the y-axis and their ratings along the x-axis, with values ranging from 1000 to approximately 2800. The highest concentration of players is between 1500 and 2000 ratings. The right histogram is labeled &quot;Inactive&quot; and similarly represents the distribution for inactive players, with a comparable range on the x-axis. The peak is also in the 1500 to 2000 range, but with slightly fewer players compared to the active category. Both histograms have a blue fill and share the same x and y-axis scales, allowing for direct comparison." width="614"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/unnamed-chunk-6-2.png" class="img-fluid figure-img" alt="The image features two side-by-side histograms depicting the distribution of player ratings. The left histogram is labeled &quot;Active&quot; and shows the number of active players along the y-axis and their ratings along the x-axis, with values ranging from 1000 to approximately 2800. The highest concentration of players is between 1500 and 2000 ratings. The right histogram is labeled &quot;Inactive&quot; and similarly represents the distribution for inactive players, with a comparable range on the x-axis. The peak is also in the 1500 to 2000 range, but with slightly fewer players compared to the active category. Both histograms have a blue fill and share the same x and y-axis scales, allowing for direct comparison." width="576"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>The left “bump” only occurs in Active players, and the right “bump” becomes much more clearly a one-sided peak at 2000, and only occurs in Inactive players. It seems likely that players are more likely to become inactive once they reach their perceived peak, and for many players that occurs at 2000.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>Chess2020 <span class="ot">&lt;-</span> Chess2020 <span class="sc">|&gt;</span> </span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Bday =</span> <span class="fu">as.numeric</span>(Bday), </span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>         <span class="at">Age =</span> <span class="dv">2020</span> <span class="sc">-</span> Bday,</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>         <span class="at">Age =</span> <span class="fu">if_else</span>(Age <span class="sc">==</span> <span class="dv">2020</span>, <span class="cn">NA</span>, Age))</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a><span class="fu">mean</span>(<span class="fu">is.na</span>(Chess2020<span class="sc">$</span>Age)) <span class="co"># Only missing age for about 2.4% of players</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="do">## [1] 0.02367435</span></span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>Chess2020 <span class="sc">|&gt;</span></span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Activity <span class="sc">==</span> <span class="st">"Active"</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span>Age, <span class="at">y =</span> DEC20)) <span class="sc">+</span> </span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">alpha =</span> <span class="fl">0.01</span>) <span class="sc">+</span> </span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span> </span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Age in 2020"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Rating"</span>) <span class="sc">+</span></span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)<span class="sc">*</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-r-rating-age-orig" class="quarto-float quarto-figure quarto-figure-center anchored" alt="The image is a scatter plot showing the relationship between age in 2020 and ratings. The x-axis represents age, ranging from 0 to 100, while the y-axis represents the rating, ranging from 1000 to 2500. The data points form a dense, black cluster throughout the graph, with a notable upward trend in ratings at ages 10 to 20, which plateaus and slightly declines from around age 30 onwards. A blue line runs through the data, highlighting the central trend of the values: it rises steeply at the beginning, evens out, and then gradually declines past age 50. The background is white with faint grey grid lines.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-r-rating-age-orig-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02c-good-graphics_files/figure-html/fig-r-rating-age-orig-5.png" class="img-fluid figure-img" alt="The image is a scatter plot showing the relationship between age in 2020 and ratings. The x-axis represents age, ranging from 0 to 100, while the y-axis represents the rating, ranging from 1000 to 2500. The data points form a dense, black cluster throughout the graph, with a notable upward trend in ratings at ages 10 to 20, which plateaus and slightly declines from around age 30 onwards. A blue line runs through the data, highlighting the central trend of the values: it rises steeply at the beginning, evens out, and then gradually declines past age 50. The background is white with faint grey grid lines." width="1800">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-r-rating-age-orig-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.19: Age in 2020 and Rating, with a smooth line drawn over top. There is significant overplotting in the data, with clusters between 10 and 20 (Rating between 1000 and 2000, in a parallelogram-ish shape) and another cluster between 45 and 70 (Rating between 1500 and 2000).
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co">#%pip install seaborn_objects_recipes</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> seaborn_objects_recipes <span class="im">as</span> sor</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>Chess2020[<span class="st">'Bday'</span>] <span class="op">=</span> pd.to_numeric(Chess2020.Bday)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>Chess2020[<span class="st">'Age'</span>] <span class="op">=</span> <span class="dv">2020</span><span class="op">-</span>Chess2020.Bday</span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>Chess2020[Chess2020.Age<span class="op">==</span><span class="dv">2020</span>] <span class="op">=</span> pd.NA</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>Chess2020.Age.isna().mean() <span class="co"># Only missing age for about 2.4% of players</span></span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a><span class="co">## np.float64(0.023674352141505425)</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>active2020 <span class="op">=</span> Chess2020.query(<span class="st">'Activity=="Active"'</span>)</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  so.Plot(active2020, x <span class="op">=</span> <span class="st">'Age'</span>, y <span class="op">=</span> <span class="st">"DEC20"</span>).</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  add(so.Dot(color<span class="op">=</span><span class="st">'black'</span>, alpha<span class="op">=</span><span class="fl">.002</span>)).</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  add(so.Line(), lowess<span class="op">:=</span> sor.Lowess(frac<span class="op">=</span><span class="fl">0.1</span>, gridsize<span class="op">=</span><span class="dv">1000</span>)).</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  label(x <span class="op">=</span> <span class="st">"Age in 2020"</span>, y <span class="op">=</span> <span class="st">"Rating"</span>).</span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  scale(x <span class="op">=</span> so.Continuous().tick(every<span class="op">=</span><span class="dv">10</span>)).</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>  show()</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div id="fig-py-rating-age-orig" class="quarto-float quarto-figure quarto-figure-center anchored" alt="The image is a scatter plot showing the relationship between age in 2020 and ratings. The x-axis represents age, ranging from 0 to 100, while the y-axis represents the rating, ranging from 1000 to 2500. The data points form a dense, black cluster throughout the graph, with a notable upward trend in ratings at ages 10 to 20, which plateaus and slightly declines from around age 30 onwards. A blue line runs through the data, highlighting the central trend of the values: it rises steeply at the beginning, evens out, and then gradually declines past age 50. The background is white with faint grey grid lines.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-py-rating-age-orig-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02c-good-graphics_files/figure-html/fig-py-rating-age-orig-1.png" class="img-fluid figure-img" alt="The image is a scatter plot showing the relationship between age in 2020 and ratings. The x-axis represents age, ranging from 0 to 100, while the y-axis represents the rating, ranging from 1000 to 2500. The data points form a dense, black cluster throughout the graph, with a notable upward trend in ratings at ages 10 to 20, which plateaus and slightly declines from around age 30 onwards. A blue line runs through the data, highlighting the central trend of the values: it rises steeply at the beginning, evens out, and then gradually declines past age 50. The background is white with faint grey grid lines." width="614">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-py-rating-age-orig-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.20: Age in 2020 and Rating, with a smooth line drawn over top. There is significant overplotting in the data, with a cluster between 10 and 20 (Rating between 1000 and 2000, in a parallelogram-ish shape) and another cluster between 45 and 70 (Rating between 1500 and 2000).
</figcaption>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>It appears that players can start getting ratings of <span class="math inline">\(&gt; 1000\)</span> around 8 or 9, at which point they get included in the data. Their rating increases steeply as they age, up to about 20 years old, at which point there is a much more gradual increase to age 30. After that, performance stays steady until age 60 and begins to decline.</p>
<p>However, it seems likely that there are some drop-out effects here, as we are only looking at active players, and the number of e.g.&nbsp;20 year olds playing may decrease from the number of e.g.&nbsp;16 year olds playing.</p>
</div>
</div>
<p><strong>Show the Data</strong></p>
<p>Notice the utility here of showing the whole data set and then highlighting a trend - we’re not really hiding anything from the viewer, so they can still see the messiness, but we’ve chosen alpha carefully to try to balance density and overplotting with being able to see the points at all. Then, we highlight the overall trend with a line that stands out from the black-and-white plot.</p>
<p>When you have too much data, it can be challenging to figure out the best way to represent it. Some options:</p>
<ul>
<li>Optimize shape and <span class="math inline">\(\alpha\)</span> selection to show spread and balance spread with overplotting issues.</li>
<li>Sample points and only show a subset (the title/subtitle/caption should indicate the sampling method)</li>
<li>Use binning and map color to the number of points in each bin.</li>
</ul>
<p>Additionally, when you have overplotting but not too much data, it can be helpful to try <code>geom_jitter</code> to move similar values into a point cloud around the value. That won’t help in this situation, but it’s a good trick in general.</p>
<p>The next set of tabs shows these options as executed in <code>ggplot2</code> (for brevity, I’m not showing python/seaborn here).</p>
<div class="callout callout-style-default callout-example callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="header-section-number">21.3.2.2</span> Overplotting Solutions
</div>
</div>
<div class="callout-body-container callout-body">
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true">Shape and <span class="math inline">\(\alpha\)</span> Optimization</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false">Sampling Points</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-3" role="tab" aria-controls="tabset-7-3" aria-selected="false">Binning</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>Chess2020 <span class="sc">|&gt;</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Activity <span class="sc">==</span> <span class="st">"Active"</span>) <span class="sc">|&gt;</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span>Age, <span class="at">y =</span> DEC20)) <span class="sc">+</span> </span>
<span id="cb10-5"><a href="#cb10-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">1</span>, <span class="at">alpha =</span> .<span class="dv">05</span>) <span class="sc">+</span> </span>
<span id="cb10-6"><a href="#cb10-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span> </span>
<span id="cb10-7"><a href="#cb10-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Age in 2020"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Rating"</span>) <span class="sc">+</span></span>
<span id="cb10-8"><a href="#cb10-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)<span class="sc">*</span><span class="dv">10</span>) <span class="sc">+</span> </span>
<span id="cb10-9"><a href="#cb10-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Age and Rating"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/unnamed-chunk-7-3.png" class="img-fluid figure-img" alt="The image is a scatter plot with a large number of data points, represented as transparent black dots, displaying the relationship between age and rating. The horizontal axis is labeled &quot;Age in 2020&quot; and ranges from 0 to 100, while the vertical axis is labeled &quot;Rating&quot; with a range from 1000 to 2500. A blue line represents a trend through the data points, indicating an increase in rating from ages 0 to about 30, where it peaks and then gradually declines until the age of 100. There is a slight shaded area around the blue line, suggesting a margin of error or variance. The graphs title is &quot;Age and Rating.&quot;" width="1800"></p>
</figure>
</div>
</div>
</div>
<p>Notice that this gives us somewhat better definition of the density areas than <a href="#fig-r-rating-age-orig" class="quarto-xref">Figure&nbsp;<span>21.19</span></a>, and allows us to see that the point density is much higher in the cluster between 10 and 20 than it is between 45 and 70.</p>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>Chess2020 <span class="sc">|&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Activity <span class="sc">==</span> <span class="st">"Active"</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">sample_frac</span>(<span class="at">size =</span> .<span class="dv">2</span>, <span class="at">replace =</span> F) <span class="sc">|&gt;</span></span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span>Age, <span class="at">y =</span> DEC20)) <span class="sc">+</span> </span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>(<span class="at">shape =</span> <span class="dv">1</span>, <span class="at">alpha =</span> .<span class="dv">25</span>) <span class="sc">+</span> </span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>() <span class="sc">+</span> </span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Age in 2020"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Rating"</span>) <span class="sc">+</span></span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)<span class="sc">*</span><span class="dv">10</span>) <span class="sc">+</span> </span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Age and Rating"</span>, <span class="at">subtitle =</span> <span class="st">"For a sample of 20% of the active players in the FIDE 2020 data"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" alt="The image is a scatter plot with a large number of data points, represented as transparent black dots, displaying the relationship between age and rating. The horizontal axis is labeled &quot;Age in 2020&quot; and ranges from 0 to 100, while the vertical axis is labeled &quot;Rating&quot; with a range from 1000 to 2500. A blue line represents a trend through the data points, indicating an increase in rating from ages 0 to about 30, where it peaks and then gradually declines until the age of 100. There is a slight shaded area around the blue line, suggesting a margin of error or variance. The graphs title is &quot;Age and Rating&quot; with subtitle &quot;For a sample of 20% of the active players in the FIDE 2020 data.&quot;" width="1800"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-7-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-3-tab">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>Chess2020 <span class="sc">|&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Activity <span class="sc">==</span> <span class="st">"Active"</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span>Age, <span class="at">y =</span> DEC20)) <span class="sc">+</span> </span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_hex</span>() <span class="sc">+</span> </span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">"#E8EBF8"</span>, <span class="at">high =</span> <span class="st">"#1432BA"</span>, <span class="at">trans=</span><span class="st">"log10"</span>) <span class="sc">+</span> </span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">color =</span> <span class="st">"orange"</span>) <span class="sc">+</span> </span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Age in 2020"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Rating"</span>) <span class="sc">+</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)<span class="sc">*</span><span class="dv">10</span>) <span class="sc">+</span> </span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Age and Rating"</span>)</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>Chess2020 <span class="sc">|&gt;</span></span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Activity <span class="sc">==</span> <span class="st">"Active"</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span>Age, <span class="at">y =</span> DEC20)) <span class="sc">+</span> </span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bin_2d</span>(<span class="at">binwidth =</span> <span class="fu">list</span>(<span class="at">x =</span> <span class="dv">2</span>, <span class="at">y =</span> <span class="dv">100</span>)) <span class="sc">+</span> </span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_gradient</span>(<span class="at">low =</span> <span class="st">"#E8EBF8"</span>, <span class="at">high =</span> <span class="st">"#1432BA"</span>, <span class="at">trans=</span><span class="st">"log10"</span>) <span class="sc">+</span> </span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_smooth</span>(<span class="at">color =</span> <span class="st">"orange"</span>) <span class="sc">+</span> </span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Age in 2020"</span>) <span class="sc">+</span> <span class="fu">ylab</span>(<span class="st">"Rating"</span>) <span class="sc">+</span></span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)<span class="sc">*</span><span class="dv">10</span>) <span class="sc">+</span> </span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Age and Rating"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell quarto-layout-panel" data-layout-ncol="2">
<div class="quarto-layout-row">
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-data-reduction-binning-1" class="quarto-float quarto-figure quarto-figure-center anchored" alt="The image is a hexbin plot depicting the relationship between age and chess rating in 2020. The horizontal axis represents age, ranging from 0 to 100, while the vertical axis represents rating, ranging from 1000 to 3000. The plot is populated with hexagonal bins that vary in shades of blue, indicating the density of data points, with darker shades representing higher counts. A smooth orange trend line with a slight upward curve from ages 10 to 20, then slightly declines around age 45, leveling and finally tapering off by age 100. A color scale on the right shows the count with breaks of 10, 10, 100, and 1000.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-data-reduction-binning-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02c-good-graphics_files/figure-html/fig-data-reduction-binning-1.png" class="img-fluid figure-img" alt="The image is a hexbin plot depicting the relationship between age and chess rating in 2020. The horizontal axis represents age, ranging from 0 to 100, while the vertical axis represents rating, ranging from 1000 to 3000. The plot is populated with hexagonal bins that vary in shades of blue, indicating the density of data points, with darker shades representing higher counts. A smooth orange trend line with a slight upward curve from ages 10 to 20, then slightly declines around age 45, leveling and finally tapering off by age 100. A color scale on the right shows the count with breaks of 10, 10, 100, and 1000." width="1800">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-data-reduction-binning-1-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.21: Two different binned plots using hexagonal and rectangular bins, respectively.
</figcaption>
</figure>
</div>
</div>
<div class="cell-output-display quarto-layout-cell" style="flex-basis: 50.0%;justify-content: flex-start;">
<div id="fig-data-reduction-binning-2" class="quarto-float quarto-figure quarto-figure-center anchored" alt="The image is a 2d-binned plot depicting the relationship between age and chess rating in 2020. The horizontal axis represents age, ranging from 0 to 100, while the vertical axis represents rating, ranging from 1000 to 3000. The plot is populated with square bins that vary in shades of blue, indicating the density of data points, with darker shades representing higher counts. A smooth orange trend line with a slight upward curve from ages 10 to 20, then slightly declines around age 45, leveling and finally tapering off by age 100. A color scale on the right shows the count with breaks of 10, 10, 100, and 1000.">
<figure class="quarto-float quarto-float-fig figure">
<div aria-describedby="fig-data-reduction-binning-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
<img src="02c-good-graphics_files/figure-html/fig-data-reduction-binning-2.png" class="img-fluid figure-img" alt="The image is a 2d-binned plot depicting the relationship between age and chess rating in 2020. The horizontal axis represents age, ranging from 0 to 100, while the vertical axis represents rating, ranging from 1000 to 3000. The plot is populated with square bins that vary in shades of blue, indicating the density of data points, with darker shades representing higher counts. A smooth orange trend line with a slight upward curve from ages 10 to 20, then slightly declines around age 45, leveling and finally tapering off by age 100. A color scale on the right shows the count with breaks of 10, 10, 100, and 1000." width="1800">
</div>
<figcaption class="quarto-float-caption-bottom quarto-float-caption quarto-float-fig" id="fig-data-reduction-binning-2-caption-0ceaefa1-69ba-4598-a22c-09a6ac19f8ca">
Figure&nbsp;21.22: Two different binned plots using hexagonal and rectangular bins, respectively.
</figcaption>
</figure>
</div>
</div>
</div>
</div>
<p>There are several intentional but non-trivial modifications here:</p>
<ul>
<li>The fill scale has been set with low as a very light blue and high as a dark blue (the default goes the other way, which is usually not a “natural” mapping – more saturation = more of the thing)</li>
<li>The fill scale uses a log10 transformation. When there is a wide range of values (e.g.&nbsp;from 0 to 1000) you can fit more information into the finite number of shades of color we can perceive if you use a log scale. Think about a topographic map – you do not necessarily want linear scaling for the lines if you’re limited to only 7 lines.</li>
<li>The smooth line has been changed to orange, as orange vs.&nbsp;blue is still a relatively safe set of colors to use for all types of colorblindness.</li>
</ul>
<p>While this is no longer showing the raw data (as we’ve binned and computed a statistic), it’s still reasonably close to the raw data. This is perhaps the first plot where we get a true sense of how many actively playing children there are in chess matches, and how dense they are relative to the distribution of ratings once out of childhood.</p>
</div>
</div>
</div>
</div>
</div>
<div class="callout callout-style-default callout-example callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="header-section-number">21.3.2.3</span> Age, Gender, and Ratings
</div>
</div>
<div class="callout-body-container callout-body">
<p>Returning to our exploration, let’s consider the age distribution of active vs.&nbsp;inactive players.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-8-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-1" role="tab" aria-controls="tabset-8-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-8-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-8-2" role="tab" aria-controls="tabset-8-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-8-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-8-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>Chess2020 <span class="sc">|&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(Activity == "Active") |&gt;</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Age, <span class="at">color =</span> Activity)) <span class="sc">+</span> </span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>()<span class="sc">+</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">"Age in 2020"</span>) <span class="sc">+</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">breaks =</span> (<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)<span class="sc">*</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="1800"></p>
<figcaption>The image is a line graph displaying density distribution of two different activities categorized as “Active” and “Inactive” over a range of ages in 2020. The x-axis represents age, spanning from 0 to 100, and the y-axis represents density, ranging from 0.00 to approximately 0.035. The “Active” category is depicted with a red line, while the “Inactive” category is shown with a blue line. The red line peaks sharply between ages 10 and 15, indicating higher density, and then gradually decreases with a small bump at 30 and a large bump at 50. The blue line peaks slightly later, closer to age 20, and decreases more steadily, with smaller fluctuations. Both lines taper off as age approaches 100. On the right, a legend identifies the color coding for each category. The graph is set on a white background with a grid.</figcaption>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-8-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-8-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">6</span>,<span class="dv">4</span>))</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  so.Plot(Chess2020, x <span class="op">=</span> <span class="st">'Age'</span>, color <span class="op">=</span> <span class="st">'Activity'</span>).</span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  add(so.Line(), so.KDE()).</span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  label(x <span class="op">=</span> <span class="st">"Age in 2020"</span>, y <span class="op">=</span> <span class="st">"Density"</span>).</span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>  scale(x <span class="op">=</span> so.Continuous().tick(every<span class="op">=</span><span class="dv">10</span>)).</span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>  show()</span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" alt="The image is a line graph displaying age density in 2020 for two activity categories: &quot;Active&quot; and &quot;Inactive.&quot; The x-axis represents ages ranging from 0 to 110, while the y-axis represents density ranging from 0.0000 to 0.0200. The &quot;Active&quot; category is shown with a blue line and the &quot;Inactive&quot; category with an orange line. Both lines start at age ~0, with the &quot;Active&quot; line peaking sharply between ages 10 and 15, indicating higher density, and then gradually decreasing with a small bump at 30 and a large bump at 50. The &quot;Inactive&quot; line follows a similar initial trend but peaks slightly later, closer to age 20, and decreases more steadily, with smaller fluctuations alongside the &quot;Active&quot; line. The background has a grid layout, and a legend on the right side indicates the color associated with each activity type." width="614"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/unnamed-chunk-10-2.png" class="img-fluid figure-img" alt="The image is a line graph displaying age density in 2020 for two activity categories: &quot;Active&quot; and &quot;Inactive.&quot; The x-axis represents ages ranging from 0 to 110, while the y-axis represents density ranging from 0.0000 to 0.0200. The &quot;Active&quot; category is shown with a blue line and the &quot;Inactive&quot; category with an orange line. Both lines start at age ~0, with the &quot;Active&quot; line peaking sharply between ages 10 and 15, indicating higher density, and then gradually decreasing with a small bump at 30 and a large bump at 50. The &quot;Inactive&quot; line follows a similar initial trend but peaks slightly later, closer to age 20, and decreases more steadily, with smaller fluctuations alongside the &quot;Active&quot; line. The background has a grid layout, and a legend on the right side indicates the color associated with each activity type." width="576"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>We also have information on players’ gender. Chess has traditionally been perceived as very male-dominated, but let’s see if that stereotype holds up to the data.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-9-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-1" role="tab" aria-controls="tabset-9-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-9-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-9-2" role="tab" aria-controls="tabset-9-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-9-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-9-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(Chess2020, <span class="fu">aes</span>(<span class="at">x =</span> Age, <span class="at">color =</span> Sex)) <span class="sc">+</span> </span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(count)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/unnamed-chunk-11-5.png" class="img-fluid figure-img" alt="The image is a line graph displaying age distribution data for two sexes, labeled as &quot;F&quot; and &quot;M.&quot; The x-axis represents &quot;Age,&quot; ranging from 0 to 100, and the y-axis represents &quot;count,&quot; going from 0 to 10,000, with grid lines for reference. Two lines are depicted: a red line for &quot;F&quot; (female) and a blue line for &quot;M&quot; (male). The blue line peaks sharply around age 25 with a count slightly above 7,500 before gradually declining with age. The red line also peaks around age 25, though lower, with a count just above 2,500, and then slopes downward more smoothly. The legend on the right side uses colored boxes to label each line according to &quot;Sex.&quot;" width="1800"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-9-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-9-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  so.Plot(Chess2020, x <span class="op">=</span> <span class="st">'Age'</span>, color <span class="op">=</span> <span class="st">'Sex'</span>).</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  add(so.Line(), so.KDE(common_norm <span class="op">=</span> <span class="va">True</span>, common_grid <span class="op">=</span> <span class="va">True</span>)).</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  label(x <span class="op">=</span> <span class="st">"Age in 2020"</span>, y <span class="op">=</span> <span class="st">"Density"</span>).</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>  scale(x <span class="op">=</span> so.Continuous().tick(every<span class="op">=</span><span class="dv">10</span>)).</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>  show()</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" alt="The image is a line graph displaying age distribution data for two sexes, labeled as &quot;F&quot; and &quot;M.&quot; The x-axis represents &quot;Age,&quot; ranging from 0 to 100, and the y-axis represents &quot;Density,&quot; going from 0 to 0.025, with grid lines for reference. Two lines are depicted: a red line for &quot;F&quot; (female) and a blue line for &quot;M&quot; (male). The blue line peaks sharply around age 25 with a count slightly below 0.025 before gradually declining with age. The red line also peaks around age 25, though lower, with a count just above 0.005, and then slopes downward more smoothly. The legend on the right side uses colored boxes to label each line according to &quot;Sex.&quot;" width="614"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>Ok, so there are clearly fewer females who have rating <span class="math inline">\(&gt; 1000\)</span> according to FIDE. What if we look at active vs.&nbsp;inactive players of both genders?</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-10-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-1" role="tab" aria-controls="tabset-10-1" aria-selected="true">R</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-10-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-10-2" role="tab" aria-controls="tabset-10-2" aria-selected="false">Python</a></li></ul>
<div class="tab-content">
<div id="tabset-10-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-10-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>Chess2020 <span class="sc">|&gt;</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Age, <span class="at">color =</span> Sex)) <span class="sc">+</span> </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="fu">after_stat</span>(count))) <span class="sc">+</span> </span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(Activity<span class="sc">~</span>.)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/unnamed-chunk-13-3.png" class="img-fluid figure-img" alt="The image consists of two stacked density plots representing age distributions for active and inactive groups, segmented by sex. Both plots feature a horizontal x-axis labeled &quot;Age&quot; and a vertical y-axis labeled &quot;count.&quot; The upper plot is labeled &quot;Active,&quot; and the lower plot is labeled &quot;Inactive,&quot; with these labels placed vertically on the right sides of the graphs. Each plot shows two curves, a red curve representing female (F) data and a blue curve representing male (M) data. In both plots, the male curve exhibits a higher initial peak compared to the female curve, indicating more males in the younger age categories. The legend on the right differentiates the colors associated with each sex. The peak age for both genders is lower in active players than in inactive players, indicating that there may have been a shift towards starting players at younger ages within the chess community." width="1800"></p>
</figure>
</div>
</div>
</div>
</div>
<div id="tabset-10-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-10-2-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>plt.figure(figsize<span class="op">=</span>(<span class="dv">6</span>,<span class="dv">5</span>))</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>(</span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  so.Plot(Chess2020, x <span class="op">=</span> <span class="st">'Age'</span>, color <span class="op">=</span> <span class="st">'Sex'</span>).</span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  add(so.Line(), so.KDE(common_norm <span class="op">=</span> <span class="va">True</span>, common_grid <span class="op">=</span> <span class="va">True</span>)).</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a>  label(x <span class="op">=</span> <span class="st">"Age in 2020"</span>, y <span class="op">=</span> <span class="st">"Density"</span>).</span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a>  facet(row <span class="op">=</span> <span class="st">"Activity"</span>).</span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a>  scale(x <span class="op">=</span> so.Continuous().tick(every<span class="op">=</span><span class="dv">10</span>)).</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a>  show()</span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" alt="The image consists of two stacked density plots representing age distributions for active and inactive groups, segmented by sex. Both plots feature a horizontal x-axis labeled &quot;Age&quot; and a vertical y-axis labeled &quot;Density.&quot; The upper plot is labeled &quot;Active,&quot; and the lower plot is labeled &quot;Inactive,&quot; with these labels placed vertically on the right sides of the graphs. Each plot shows two curves, a red curve representing female (F) data and a blue curve representing male (M) data. In both plots, the male curve exhibits a higher initial peak compared to the female curve, indicating more males in the younger age categories. The legend on the right differentiates the colors associated with each sex. The peak age for both genders is lower in active players than in inactive players, indicating that there may have been a shift towards starting players at younger ages within the chess community." width="614"></p>
</figure>
</div>
</div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/unnamed-chunk-14-2.png" class="img-fluid figure-img" alt="The image consists of two stacked density plots representing age distributions for active and inactive groups, segmented by sex. Both plots feature a horizontal x-axis labeled &quot;Age&quot; and a vertical y-axis labeled &quot;Density.&quot; The upper plot is labeled &quot;Active,&quot; and the lower plot is labeled &quot;Inactive,&quot; with these labels placed vertically on the right sides of the graphs. Each plot shows two curves, a red curve representing female (F) data and a blue curve representing male (M) data. In both plots, the male curve exhibits a higher initial peak compared to the female curve, indicating more males in the younger age categories. The legend on the right differentiates the colors associated with each sex. The peak age for both genders is lower in active players than in inactive players, indicating that there may have been a shift towards starting players at younger ages within the chess community." width="576"></p>
</figure>
</div>
</div>
</div>
</div>
</div>
</div>
<p>It is clear that there are a few interesting things going on in this plot. First, there is about a 5-year shift left in the age distribution of active players compared to inactive players, suggesting the possibility of demographic changes – either players starting earlier, young players reaching &gt;1000 rating more frequently, or some other factor.</p>
<p>Second, it is clear that the behavior of men playing chess is different than that of women: men continue playing well into their 60s, while women usually quit before age 40.</p>
</div>
</div>
<p>Observations:</p>
<ul>
<li><p>It is helpful, when possible, to show the full data, with aesthetics and facets chosen to highlight different variable combinations.</p></li>
<li><p>Summary statistics can be useful to highlight relationships amid noise.</p></li>
<li><p>Data reduction strategies (binning, alpha blending, sampling) can be useful when overplotting obscures the information present in the chart.</p></li>
</ul>
</section>
<section id="sec-annotation" class="level3" data-number="21.3.3">
<h3 data-number="21.3.3" class="anchored" data-anchor-id="sec-annotation"><span class="header-section-number">21.3.3</span> Annotations</h3>
<p>Annotations (labels, arrows, highlighted information, and captions) allow you to communicate specific parts of the data.</p>
<p>Good annotations help readers understand key findings, interpret data without having to reference legends, and see (and make sense of) structure, changes, and anomalies in the data.</p>
<div class="callout callout-style-default callout-demo callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="header-section-number">21.3.3.1</span> COVID - Flattening the curve
</div>
</div>
<div class="callout-body-container callout-body">
<p>In early 2020, the news started mentioning a cluster of pneumonia cases in China. The first cases were detected in the US in Washington state (Jan 20). A second case was confirmed on January 24 in Illinois, and the third-fifth cases were confirmed on January 26 in Arizona and California. By mid-February, Italy had become another hotspot.</p>
<p>On March 9, one of the classic graphics of the COVID-19 pandemic was released (<span class="quarto-unresolved-ref">?fig-flatten-curve</span>), showing the power of both annotation and animation.</p>
<p><img src="../images/wrangling/flatten-the-curve-smaller.gif" class="img-fluid" alt="This #FlattenTheCurve graph surged to prominence this week. But it didn’t say why it is so bad when medical treatment capacity is overwhelmed -> mortality rate rises. So, here is a small animation that shows the value of early containment and double dividend of delay. #Covid19. Image by Alexander Radtke (lxrdk?), posted on Twitter.">{#fig-flatten-curve width=“100%” fig-alt=“A plot labeled ‘Why it is so important to act early on COVID-19’, with x-axis showing time and y-axis showwing people in need of medical care. A shift to”early containment” pushes the case curve out over time (with the same number of cases overall), and simultaneously, a curve showing treatment capacity changes, until the treatment capacity is above the number of people in need of medical care. The proportion of the case curve above the treatment capacity is shaded in purple and corresponds to badly treated patients (high mortality), while the proportion of the case curve below treatment capacity represents properly cared-for patients (low mortality). As the curve moves, annotations pop up showing the effect of medical workers becoming ill (reduced treatment capacity) and the effect of medical research (increased treatment capacity).”}</p>
<p>On March 11, the WHO declared COVID-19 a pandemic. By March 15, many states issued stay-home orders and only essential workers were allowed out.</p>
</div>
</div>
<div class="callout callout-style-default callout-example callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="header-section-number">21.3.3.2</span> Different Types of Annotations
</div>
</div>
<div class="callout-body-container callout-body">
<p>In this example, we’ll stay on the same COVID theme, but we’ll use <a href="https://data.cityofnewyork.us/Health/COVID-19-Daily-Counts-of-Cases-Hospitalizations-an/rc75-m7u3/about_data">COVID (SARS-CoV-2) case counts in New York City</a>, which was one of the big hotspots in the US early in the pandemic. This example will be done in <code>ggplot2</code> because annotations tend to be more of a pain to create manually in seaborn.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(zoo) <span class="co"># rollapply function</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a>covid <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"../data/COVID-19_Daily_Counts_of_Cases,_Hospitalizations,_and_Deaths_20251020.csv"</span>) <span class="sc">|&gt;</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(date_of_interest<span class="sc">:</span>DEATH_COUNT) <span class="sc">|&gt;</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">date =</span> <span class="fu">mdy</span>(date_of_interest)) <span class="sc">|&gt;</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="sc">-</span>date_of_interest, <span class="sc">-</span>PROBABLE_CASE_COUNT) <span class="sc">|&gt;</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Case_Count_-_Week_Average</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">rollapply</span>(CASE_COUNT, <span class="dv">7</span>, mean, <span class="at">align=</span><span class="st">"center"</span>, <span class="at">fill =</span> <span class="st">"NA"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="sc">-</span>date, <span class="at">names_to =</span> <span class="st">"variable"</span>, <span class="at">values_to =</span> <span class="st">"count"</span>) <span class="sc">|&gt;</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">str_replace_all</span>(variable, <span class="st">"_"</span>, <span class="st">" "</span>) <span class="sc">|&gt;</span> <span class="fu">str_to_title</span>()) <span class="sc">|&gt;</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">variable =</span> <span class="fu">str_replace_all</span>(variable, <span class="at">pattern =</span> <span class="fu">c</span>(<span class="st">"Case Count"</span> <span class="ot">=</span> <span class="st">"Cases"</span>, <span class="st">"Death Count"</span> <span class="ot">=</span> <span class="st">"Deaths"</span>, <span class="st">"Hospitalized Count"</span> <span class="ot">=</span> <span class="st">"Hospitalizations"</span>)))</span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(covid)</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a><span class="do">## # A tibble: 6 × 3</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a><span class="do">##   date       variable             count</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a><span class="do">##   &lt;date&gt;     &lt;chr&gt;                &lt;dbl&gt;</span></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a><span class="do">## 1 2020-02-29 Cases                    1</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a><span class="do">## 2 2020-02-29 Hospitalizations         1</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a><span class="do">## 3 2020-02-29 Deaths                   0</span></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a><span class="do">## 4 2020-02-29 Cases - Week Average    NA</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a><span class="do">## 5 2020-03-01 Cases                    0</span></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a><span class="do">## 6 2020-03-01 Hospitalizations         1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>color_values <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Cases"</span> <span class="ot">=</span> <span class="st">"#8780de"</span>, <span class="st">"Cases - Week Average"</span> <span class="ot">=</span> <span class="st">"#544ad0"</span>, <span class="st">"Deaths"</span> <span class="ot">=</span> <span class="st">"#ff7800"</span>, <span class="st">"Hospitalizations"</span> <span class="ot">=</span> <span class="st">"#26a269"</span>)</span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>alpha_values <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Cases"</span> <span class="ot">=</span> .<span class="dv">5</span>, <span class="st">"Cases - Week Average"</span> <span class="ot">=</span> <span class="dv">1</span>, <span class="st">"Deaths"</span> <span class="ot">=</span> <span class="dv">1</span>, <span class="st">"Hospitalizations"</span> <span class="ot">=</span> <span class="dv">1</span>)</span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>p <span class="ot">&lt;-</span> <span class="fu">filter</span>(covid, date <span class="sc">&gt;</span> <span class="fu">ymd</span>(<span class="dv">20200101</span>), date <span class="sc">&lt;=</span> <span class="fu">ymd</span>(<span class="dv">20201231</span>)) <span class="sc">|&gt;</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> date, <span class="at">y =</span> count, <span class="at">color =</span> variable, <span class="at">alpha =</span> variable)) <span class="sc">+</span> </span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>() <span class="sc">+</span></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_alpha_manual</span>(<span class="st">"Counts"</span>, <span class="at">values =</span> alpha_values) <span class="sc">+</span> </span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_manual</span>(<span class="st">"Counts"</span>, <span class="at">values =</span> color_values) <span class="sc">+</span> </span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">"# Recorded People"</span>) <span class="sc">+</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"SARS-CoV2 Cases, Hospitalizations, and Deaths in NYC"</span>) <span class="sc">+</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.title.x =</span> <span class="fu">element_blank</span>())</span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a>p</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid figure-img" width="2100"></p>
</figure>
</div>
</div>
</div>
<p>Now, this is a perfectly useful plot, but as you’ll remember from the short-term memory section, direct annotation can be more effective than using a legend. Let’s try that.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>p_annotate_lines <span class="ot">&lt;-</span> p <span class="sc">+</span>  </span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">y =</span> <span class="dv">2700</span>, <span class="at">x =</span> <span class="fu">ymd</span>(<span class="st">"20201201"</span>), <span class="at">label =</span> <span class="st">"Cases (7d avg)"</span>, <span class="at">color =</span> color_values[<span class="dv">2</span>], <span class="at">hjust =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">y =</span> <span class="dv">5500</span>, <span class="at">x =</span> <span class="fu">ymd</span>(<span class="st">"20201225"</span>), <span class="at">label =</span> <span class="st">"Daily Cases</span><span class="sc">\n</span><span class="st">    (work week variation)"</span>, <span class="at">color =</span> color_values[<span class="dv">1</span>], <span class="at">hjust =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">y =</span> <span class="dv">520</span>, <span class="at">x =</span> <span class="fu">ymd</span>(<span class="st">"20201231"</span>), <span class="at">label =</span> <span class="st">"Hospitalizations"</span>, <span class="at">color =</span> color_values[<span class="dv">4</span>], <span class="at">hjust =</span> <span class="dv">1</span>) <span class="sc">+</span> </span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">y =</span> <span class="sc">-</span><span class="dv">120</span>, <span class="at">x =</span> <span class="fu">ymd</span>(<span class="st">"20201231"</span>), <span class="at">label =</span> <span class="st">"Deaths"</span>, <span class="at">color =</span> color_values[<span class="dv">3</span>], <span class="at">hjust =</span> <span class="dv">1</span>)</span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>p_annotate_lines</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid figure-img" width="2100"></p>
</figure>
</div>
</div>
</div>
<p>This is nice – we don’t have to refer to the legend and each line is labeled on the chart directly. We also have devoted more room on the chart to the data itself, which is a plus.</p>
<p>Annotations can also be used to provide useful contextual information.</p>
<div class="callout callout-style-simple callout-none no-icon callout-titled">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-14-contents" aria-controls="callout-14" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Contextual Information - COVID in NYC, 2020
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-14" class="callout-14-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<p>The <a href="../data/COVID19_CaseHospDeath_UserGuide_20201202.docx">user guide for the data</a> provides the following information:</p>
<blockquote class="blockquote">
<p>This file includes data since February 29, 2020, which is the date that the Health Department classifies as the start of the COVID-19 outbreak in NYC as it was the date of the first laboratory-confirmed COVID-19 case.</p>
</blockquote>
<blockquote class="blockquote">
<p>In March, April, and early May, the NYC Health Department had discouraged people with mild and moderate symptoms from being tested, so data from those months primarily represent people with more severe illness. Until mid-May, patients with more severe COVID-19 illness were more likely to have been tested and included in these data.</p>
</blockquote>
<p>We can get additional context on the pandemic timeline from the <a href="https://www.cdc.gov/museum/timeline/covid19.html">CDC Museum COVID-19 Timeline</a>:</p>
<ul>
<li><p>March 15, 2020 - States begin to implement shutdowns in order to prevent the spread of COVID-19. The New York City public school system— the largest school system in the U.S., with 1.1 million students— shuts down, while Ohio calls for restaurants and bars to close.</p></li>
<li><p>March 28, 2020 - CDC issues a domestic travel advisory for New York, New Jersey, and Connecticut due to high community transmission of COVID-19 in those states, urging residents to refrain from all non-essential domestic travel for at least 14 days, effective immediately.</p></li>
<li><p>April 10, 2020 - With 159,937 confirmed cases, New York State now has more reported cases of COVID-19 than Spain (153,000), Italy (143,000), or China (82,000). Amid critical hospital bed and ventilator shortages, aerial images emerge of workers in hazmat suits burying coffins in mass graves at Hart Island off the Bronx, an area used for over 150 years by New York City officials as a mass burial site for those with no next-of-kin or who cannot afford funerals.</p></li>
</ul>
</div>
</div>
</div>
<p>Let’s see whether we can add this information to the chart too.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>count_travel_adv <span class="ot">&lt;-</span> <span class="fu">filter</span>(covid, date <span class="sc">==</span> <span class="fu">ymd</span>(<span class="dv">20200328</span>), </span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>                           variable <span class="sc">==</span> <span class="st">"Cases - Week Average"</span>)<span class="sc">$</span>count</span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>count_mass_graves <span class="ot">&lt;-</span> <span class="fu">filter</span>(covid, date <span class="sc">==</span> <span class="fu">ymd</span>(<span class="dv">20200410</span>), </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>                            variable <span class="sc">==</span> <span class="st">"Deaths"</span>)<span class="sc">$</span>count</span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>p_info_annot <span class="ot">&lt;-</span> </span>
<span id="cb22-7"><a href="#cb22-7" aria-hidden="true" tabindex="-1"></a>  p_annotate_lines <span class="sc">+</span> </span>
<span id="cb22-8"><a href="#cb22-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_date</span>(<span class="at">expand =</span> <span class="fu">expansion</span>(<span class="at">add=</span><span class="fu">c</span>(<span class="dv">75</span>, <span class="dv">0</span>)), </span>
<span id="cb22-9"><a href="#cb22-9" aria-hidden="true" tabindex="-1"></a>               <span class="at">date_labels =</span> <span class="st">"%b %y"</span>, <span class="at">date_breaks =</span> <span class="st">"1 month"</span>) <span class="sc">+</span> </span>
<span id="cb22-10"><a href="#cb22-10" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-11"><a href="#cb22-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"rect"</span>, </span>
<span id="cb22-12"><a href="#cb22-12" aria-hidden="true" tabindex="-1"></a>           <span class="at">xmin =</span> <span class="fu">ymd</span>(<span class="dv">20200301</span>), <span class="at">xmax =</span> <span class="fu">ymd</span>(<span class="dv">20200515</span>), <span class="at">ymin =</span> <span class="dv">0</span>, <span class="at">ymax =</span> <span class="dv">6500</span>, </span>
<span id="cb22-13"><a href="#cb22-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">alpha =</span> <span class="fl">0.05</span>, <span class="at">fill =</span> <span class="st">"black"</span>) <span class="sc">+</span> </span>
<span id="cb22-14"><a href="#cb22-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fu">ymd</span>(<span class="dv">20200520</span>), <span class="at">y =</span> <span class="dv">6500</span>, </span>
<span id="cb22-15"><a href="#cb22-15" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"Tests available for</span><span class="sc">\n</span><span class="st">severe cases only"</span>,</span>
<span id="cb22-16"><a href="#cb22-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">vjust =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">"grey30"</span>) <span class="sc">+</span> </span>
<span id="cb22-17"><a href="#cb22-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-18"><a href="#cb22-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"segment"</span>, <span class="at">linetype =</span> <span class="st">"dotted"</span>, </span>
<span id="cb22-19"><a href="#cb22-19" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> <span class="fu">ymd</span>(<span class="dv">20200229</span>), <span class="at">xend =</span> <span class="fu">ymd</span>(<span class="dv">20200229</span>), </span>
<span id="cb22-20"><a href="#cb22-20" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> <span class="dv">500</span>, <span class="at">yend =</span> <span class="dv">0</span>) <span class="sc">+</span> </span>
<span id="cb22-21"><a href="#cb22-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"segment"</span>, <span class="at">linetype =</span> <span class="st">"dotted"</span>, </span>
<span id="cb22-22"><a href="#cb22-22" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> <span class="fu">ymd</span>(<span class="dv">20200229</span>), <span class="at">xend =</span> <span class="fu">ymd</span>(<span class="dv">20200224</span>), </span>
<span id="cb22-23"><a href="#cb22-23" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> <span class="dv">500</span>, <span class="at">yend =</span> <span class="dv">500</span>) <span class="sc">+</span> </span>
<span id="cb22-24"><a href="#cb22-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fu">ymd</span>(<span class="dv">20200224</span>), <span class="at">y =</span> <span class="dv">500</span>, </span>
<span id="cb22-25"><a href="#cb22-25" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"1st Pos</span><span class="sc">\n</span><span class="st">COVID Test"</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb22-26"><a href="#cb22-26" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-27"><a href="#cb22-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"segment"</span>, <span class="at">linetype =</span> <span class="st">"dotted"</span>, </span>
<span id="cb22-28"><a href="#cb22-28" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> <span class="fu">ymd</span>(<span class="dv">20200315</span>), <span class="at">xend =</span> <span class="fu">ymd</span>(<span class="dv">20200315</span>), </span>
<span id="cb22-29"><a href="#cb22-29" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> <span class="dv">1350</span>, <span class="at">yend =</span> <span class="dv">0</span>) <span class="sc">+</span> </span>
<span id="cb22-30"><a href="#cb22-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"segment"</span>, <span class="at">linetype =</span> <span class="st">"dotted"</span>, </span>
<span id="cb22-31"><a href="#cb22-31" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> <span class="fu">ymd</span>(<span class="dv">20200315</span>), <span class="at">xend =</span> <span class="fu">ymd</span>(<span class="dv">20200305</span>), </span>
<span id="cb22-32"><a href="#cb22-32" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> <span class="dv">1350</span>, <span class="at">yend =</span> <span class="dv">1350</span>) <span class="sc">+</span> </span>
<span id="cb22-33"><a href="#cb22-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fu">ymd</span>(<span class="dv">20200305</span>), <span class="at">y =</span> <span class="dv">1350</span>, </span>
<span id="cb22-34"><a href="#cb22-34" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"NYC Schools</span><span class="sc">\n</span><span class="st">Shut Down"</span>, <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb22-35"><a href="#cb22-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-36"><a href="#cb22-36" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"segment"</span>, <span class="at">linetype =</span> <span class="st">"dotted"</span>,</span>
<span id="cb22-37"><a href="#cb22-37" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> <span class="fu">ymd</span>(<span class="dv">20200328</span>), <span class="at">xend =</span> <span class="fu">ymd</span>(<span class="dv">20200328</span>), </span>
<span id="cb22-38"><a href="#cb22-38" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> <span class="dv">0</span>, <span class="at">yend =</span> count_travel_adv) <span class="sc">+</span> </span>
<span id="cb22-39"><a href="#cb22-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"segment"</span>, <span class="at">linetype =</span> <span class="st">"dotted"</span>, </span>
<span id="cb22-40"><a href="#cb22-40" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> <span class="fu">ymd</span>(<span class="dv">20200328</span>), <span class="at">xend =</span> <span class="fu">ymd</span>(<span class="dv">20200318</span>), </span>
<span id="cb22-41"><a href="#cb22-41" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> count_travel_adv, <span class="at">yend =</span> count_travel_adv) <span class="sc">+</span> </span>
<span id="cb22-42"><a href="#cb22-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fu">ymd</span>(<span class="dv">20200318</span>), <span class="at">y =</span> count_travel_adv, </span>
<span id="cb22-43"><a href="#cb22-43" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"CDC Issues</span><span class="sc">\n</span><span class="st">Travel Advisory</span><span class="sc">\n</span><span class="st">for NY State"</span>, </span>
<span id="cb22-44"><a href="#cb22-44" aria-hidden="true" tabindex="-1"></a>           <span class="at">hjust =</span> <span class="dv">1</span>, <span class="at">vjust =</span> <span class="fl">0.5</span>)  <span class="sc">+</span> </span>
<span id="cb22-45"><a href="#cb22-45" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb22-46"><a href="#cb22-46" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"segment"</span>, <span class="at">linetype =</span> <span class="st">"dotted"</span>, </span>
<span id="cb22-47"><a href="#cb22-47" aria-hidden="true" tabindex="-1"></a>           <span class="at">x =</span> <span class="fu">ymd</span>(<span class="dv">20200410</span>), <span class="at">xend =</span> <span class="fu">ymd</span>(<span class="dv">20200410</span>), </span>
<span id="cb22-48"><a href="#cb22-48" aria-hidden="true" tabindex="-1"></a>           <span class="at">y =</span> <span class="dv">0</span>, <span class="at">yend =</span> count_mass_graves) <span class="sc">+</span> </span>
<span id="cb22-49"><a href="#cb22-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">annotate</span>(<span class="st">"text"</span>, <span class="at">x =</span> <span class="fu">ymd</span>(<span class="dv">20200405</span>), <span class="at">y =</span> <span class="sc">-</span><span class="dv">100</span>, </span>
<span id="cb22-50"><a href="#cb22-50" aria-hidden="true" tabindex="-1"></a>           <span class="at">label =</span> <span class="st">"Mass graves in NYC"</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">vjust =</span> <span class="dv">1</span>) </span>
<span id="cb22-51"><a href="#cb22-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb22-52"><a href="#cb22-52" aria-hidden="true" tabindex="-1"></a>p_info_annot</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="02c-good-graphics_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid figure-img" width="2100"></p>
</figure>
</div>
</div>
</div>
<p>We had to slightly extend the x-axis to accommodate the annotations, but this also has a rhetorical purpose – NYC didn’t have its first positive test until March 20, but the actual spread of cases in NYC was likely occurring well before that date – they just couldn’t be measured.</p>
<p>It is possible to add too many annotations to a chart and clutter it up. The last chart above is getting close, and it would be reasonable to e.g.&nbsp;omit the 1st positive covid test annotation because it’s implicit, but the additional context may also be useful.</p>
<p>What variations would you add?</p>
</div>
</div>
</section>
</section>
<section id="sec-checklist" class="level2" data-number="21.4">
<h2 data-number="21.4" class="anchored" data-anchor-id="sec-checklist"><span class="header-section-number">21.4</span> Evaluating Graphics: Effectiveness, Clarity, and Comprehension</h2>
<p>When evaluating a chart that you hope to use for presentation, it is important to first think through what the goal of the chart is. Then, it can be helpful to work through the grammar of graphics to ensure that each element of the chart contributes to the overall goal.</p>
<ol type="1">
<li><p>Message</p>
<ul>
<li>What is the message you hope to convey?</li>
<li>What elements of the data are necessary for that message?</li>
<li>What level of audience are you targeting? What education, expectations, culture, and perceptual abilities or challenges do they have?</li>
</ul></li>
<li><p>Mappings</p>
<ul class="task-list">
<li><label><input type="checkbox">Are mappings appropriate for the type of variable?</label></li>
<li><label><input type="checkbox">Do the <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> mappings show variables that are most important for accurate quantitative comparisons?</label></li>
<li><label><input type="checkbox">Are aesthetic mappings carefully chosen to minimize clutter?</label></li>
<li><label><input type="checkbox">Are aesthetic mappings chosen for accessibility? If color is used, is another aesthetic also used to dual-encode the information?</label></li>
</ul></li>
<li><p>Geometries</p>
<ul class="task-list">
<li><label><input type="checkbox">Are appropriate geoms used for the data type and comparison goals?</label></li>
<li><label><input type="checkbox">If there are multiple layers,</label>
<ul class="task-list">
<li><label><input type="checkbox">Do the layers work together to show the same aspects of the data at different levels?</label></li>
<li><label><input type="checkbox">Do layers enhance clarity, or increase clutter?</label></li>
</ul></li>
<li><label><input type="checkbox">Are key patterns visible?</label></li>
</ul></li>
<li><p>Scales and Transformations</p></li>
</ol>
<ul>
<li><p>Location scales</p>
<ul class="task-list">
<li><label><input type="checkbox">Is the data well distributed across the full range of the scale?</label>
<ul>
<li>If most of the data is compressed into a small part of the scale consider a scale transformation (log, sqrt) or a plot-within-a-plot (<code>ggpp</code>) to show both the compressed area and the total range.</li>
</ul></li>
<li><label><input type="checkbox">If the <span class="math inline">\(x\)</span> and <span class="math inline">\(y\)</span> axis scales show the same units, does the aspect ratio of the plot reflect this?</label></li>
</ul></li>
<li><p>Color scales</p>
<ul class="task-list">
<li><label><input type="checkbox">Is the color scale used the most accessible scale for the data?</label></li>
<li><label><input type="checkbox">If color is mapped to a continuous value, is the scale transformed to maximize the contrast across the range of the variable?<br>
Log transforms can often be useful to increase contrast between different orders of magnitude of a continuous value.</label></li>
</ul></li>
<li><p>Transformations</p>
<ul>
<li><label><input type="checkbox">Are any transformations used clearly identified? e.g.&nbsp;a log scale should have ticks that are not uniformly spaced to provide an additional cue that the transformation is present.</label></li>
<li><label><input type="checkbox">Are transformed elements labeled clearly?</label></li>
<li><label><input type="checkbox">Does the transformation improve comprehension?</label></li>
<li>Coordinate Systems
<ul class="task-list">
<li><label><input type="checkbox">Is the coordinate system appropriate for the message?<br>
If polar coordinates are used, is there a clear justification for deviating from better-understood cartesian coordinates?</label></li>
</ul></li>
</ul></li>
</ul>
<ol start="5" type="1">
<li><p>Facets and Layout</p>
<ul class="task-list">
<li><label><input type="checkbox">Does the layout support the comparisons of interest?<br>
Are facets that viewers may want to compare ordered so that they are adjacent?</label></li>
<li><label><input type="checkbox">How much effort is required to make secondary comparisons?<br>
Consider visual distance traveled between elements in the secondary comparison, alignment of axes, etc.</label></li>
<li><label><input type="checkbox">Are there too many facets shown?<br>
How does the number of facets required for the comparison compare to the overall increase in visual clutter?</label></li>
<li><label><input type="checkbox">Are facet labels clear and easy to understand?</label></li>
</ul></li>
<li><p>Annotations</p>
<ul class="task-list">
<li><label><input type="checkbox">Are key points annotated clearly?</label></li>
<li><label><input type="checkbox">Do annotations reduce clutter?</label></li>
<li><label><input type="checkbox">Would it be more effective to replace legends with on-plot labels, or would this increase visual clutter?</label></li>
<li><label><input type="checkbox">Does the design support the overall message of the plot?</label></li>
<li><label><input type="checkbox">Are artifacts in the data annotated and explained?</label></li>
</ul></li>
</ol>
</section>
<section id="sec-good-graphics-refs" class="level2" data-number="21.5">
<h2 data-number="21.5" class="anchored" data-anchor-id="sec-good-graphics-refs"><span class="header-section-number">21.5</span> References</h2>


<div id="refs" class="references csl-bib-body" data-entry-spacing="0" role="list">
<div id="ref-wikipediacontributorsWetwareBrain2025" class="csl-entry" role="listitem">
<div class="csl-left-margin">[1] </div><div class="csl-right-inline">Wikipedia contributors, <span>“Wetware (brain),”</span> <em>Wikipedia</em>, Aug. 2025 [Online]. Available: <a href="https://en.wikipedia.org/w/index.php?title=Wetware_(brain)&amp;oldid=1306946759">https://en.wikipedia.org/w/index.php?title=Wetware_(brain)&amp;oldid=1306946759</a>. [Accessed: Sep. 03, 2025]</div>
</div>
<div id="ref-wikipediacontributors23c" class="csl-entry" role="listitem">
<div class="csl-left-margin">[2] </div><div class="csl-right-inline">Wikipedia contributors, <span>“Color blindness,”</span> <em>Wikipedia</em>, May 2023. </div>
</div>
<div id="ref-treisman_preattentive_1985" class="csl-entry" role="listitem">
<div class="csl-left-margin">[3] </div><div class="csl-right-inline">A. Treisman, <span>“Preattentive processing in vision,”</span> <em>Computer Vision, Graphics, and Image Processing</em>, vol. 31, no. 2, pp. 156–177, Aug. 1985, doi: <a href="https://doi.org/10.1016/S0734-189X(85)80004-9">10.1016/S0734-189X(85)80004-9</a>. </div>
</div>
<div id="ref-healey_high-speed_1996" class="csl-entry" role="listitem">
<div class="csl-left-margin">[4] </div><div class="csl-right-inline">C. G. Healey, K. S. Booth, and J. T. Enns, <span>“High-speed visual estimation using preattentive processing,”</span> <em>ACM Transactions on Computer-Human Interaction (TOCHI)</em>, vol. 3, no. 2, pp. 107–135, 1996, doi: <a href="https://doi.org/10.1145/230562.230563">10.1145/230562.230563</a>. </div>
</div>
<div id="ref-gapminder" class="csl-entry" role="listitem">
<div class="csl-left-margin">[5] </div><div class="csl-right-inline">J. Bryan, <em>Gapminder: Data from gapminder</em>. 2023 [Online]. Available: <a href="https://CRAN.R-project.org/package=gapminder">https://CRAN.R-project.org/package=gapminder</a></div>
</div>
<div id="ref-contiAttackingInformationVisualization2005" class="csl-entry" role="listitem">
<div class="csl-left-margin">[6] </div><div class="csl-right-inline">G. Conti, M. Ahamad, and J. Stasko, <span>“Attacking information visualization system usability overloading and deceiving the human,”</span> in <em>Proceedings of the 2005 symposium on usable privacy and security</em>, 2005, pp. 89–100. </div>
</div>
</div>
</section>
<section id="footnotes" class="footnotes footnotes-end-of-document" role="doc-endnotes">
<hr>
<ol>
<li id="fn1"><p>When the COVID-19 outbreak started, many maps were using white-to-red gradients to show case counts and/or deaths. <a href="https://www.esri.com/arcgis-blog/products/product/mapping/mapping-coronavirus-responsibly/">The emotional association between red and blood, danger, and death may have caused people to become more frightened than what was reasonable given the available information.</a><a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn2"><p>Lisa Charlotte Rost. <a href="https://www.dataquest.io/blog/what-to-consider-when-choosing-colors-for-data-visualization/">What to consider when choosing colors for data visualization.</a><a href="#fnref2" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
<li id="fn3"><p>See <a href="https://doi.org/10.1080/10618600.2016.1209116">this paper</a> for more details. This is the last chapter of my dissertation, for what it’s worth. It was a lot of fun. (no sarcasm, seriously, it was fun!)<a href="#fnref3" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/srvanderplas\.github\.io\/stat-computing-r-python\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      const annoteTargets = window.document.querySelectorAll('.code-annotation-anchor');
      for (let i=0; i<annoteTargets.length; i++) {
        const annoteTarget = annoteTargets[i];
        const targetCell = annoteTarget.getAttribute("data-target-cell");
        const targetAnnotation = annoteTarget.getAttribute("data-target-annotation");
        const contentFn = () => {
          const content = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          if (content) {
            const tipContent = content.cloneNode(true);
            tipContent.classList.add("code-annotation-tip-content");
            return tipContent.outerHTML;
          }
        }
        const config = {
          allowHTML: true,
          content: contentFn,
          onShow: (instance) => {
            selectCodeLines(instance.reference);
            instance.reference.classList.add('code-annotation-active');
            window.tippy.hideAll();
          },
          onHide: (instance) => {
            unselectCodeLines();
            instance.reference.classList.remove('code-annotation-active');
          },
          maxWidth: 300,
          delay: [50, 0],
          duration: [200, 0],
          offset: [5, 10],
          arrow: true,
          trigger: 'click',
          appendTo: function(el) {
            return el.parentElement.parentElement.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto',
          placement: 'right',
          positionFixed: true,
          popperOptions: {
            modifiers: [
            {
              name: 'flip',
              options: {
                flipVariations: false, // true by default
                allowedAutoPlacements: ['right'],
                fallbackPlacements: ['right', 'top', 'top-start', 'top-end', 'bottom', 'bottom-start', 'bottom-end', 'left'],
              },
            },
            {
              name: 'preventOverflow',
              options: {
                mainAxis: false,
                altAxis: false
              }
            }
            ]        
          }      
        };
        window.tippy(annoteTarget, config); 
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<script src="https://giscus.app/client.js" data-repo="srvanderplas/stat-computing-r-python" data-repo-id="R_kgDOIvwd2g" data-category="General" data-category-id="DIC_kwDOIvwd2s4CTksR" data-mapping="pathname" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="en" crossorigin="anonymous" async="">
</script>
<input type="hidden" id="giscus-base-theme" value="light">
<input type="hidden" id="giscus-alt-theme" value="dark">
<nav class="page-navigation column-body">
  <div class="nav-page nav-page-previous">
      <a href="../part-wrangling/02b-graphics.html" class="pagination-link" aria-label="A Grammar of Graphics">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-number">20</span>&nbsp; <span class="chapter-title">A Grammar of Graphics</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../part-wrangling/03-data-cleaning.html" class="pagination-link" aria-label="Data Cleaning">
        <span class="nav-page-text"><span class="chapter-number">22</span>&nbsp; <span class="chapter-title">Data Cleaning</span></span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
<p>Copyright 2025, Susan Vanderplas</p>
</div>   
    <div class="nav-footer-center">
      &nbsp;
    <div class="toc-actions d-sm-block d-md-none"><ul><li><a href="https://github.com/srvanderplas/stat-computing-r-python/edit/main/part-wrangling/02c-good-graphics.qmd" class="toc-action"><i class="bi bi-github"></i>Edit this page</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
    <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/srvanderplas">
      <i class="bi bi-github" role="img" aria-label="GitHub">
</i> 
    </a>
  </li>  
</ul>
    </div>
  </div>
</footer>
<script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>




</body></html>